[{"id":"6dc3f0bb.36c81","type":"tab","label":"Parâmetros do Teste","disabled":false,"info":""},{"id":"e45fea15.9c4e3","type":"tab","label":"Verificação ","disabled":false,"info":""},{"id":"d046cfc3.2c33f","type":"tab","label":"Calibração - Loadcell","disabled":false,"info":""},{"id":"e377c8c5.5d2a2","type":"tab","label":"Calibração - Pitot","disabled":false,"info":""},{"id":"760dfb14.3731dc","type":"tab","label":"Display","disabled":false,"info":""},{"id":"6c53f7a3.674208","type":"tab","label":"Fluxos de Teste","disabled":false,"info":""},{"id":"6a7f58b5.ba1848","type":"tab","label":"Manipulação DB","disabled":false,"info":""},{"id":"16936092.ae94e7","type":"ui_base","theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#000000","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"Arial,Arial,Helvetica,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Dashboard Aero","default":"#4B7930","baseColor":"#000000","baseFont":"Courier,monospace","reset":false},"themeState":{"base-color":{"default":"#097479","value":"#097479","edited":true},"page-titlebar-backgroundColor":{"value":"#097479","edited":true},"page-backgroundColor":{"value":"#111111","edited":true},"page-sidebar-backgroundColor":{"value":"#000000","edited":false},"group-textColor":{"value":"#0eb8c0","edited":false},"group-borderColor":{"value":"#555555","edited":true},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":true},"widget-backgroundColor":{"value":"#097479","edited":true},"widget-borderColor":{"value":"#333333","edited":true},"base-font":{"value":"Arial,Arial,Helvetica,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Bancada de Teste de Tração da Equipe Aerodesign UTFPR Curitiba","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"cc946df4.d29788","type":"ui_tab","z":"","name":"Home","icon":"home","order":1,"disabled":false,"hidden":false},{"id":"ee2a061a.d7f98","type":"ui_spacer","name":"spacer","group":"","order":6,"width":6,"height":1},{"id":"88b41238.12aff8","type":"ui_spacer","name":"spacer","group":"","order":7,"width":6,"height":1},{"id":"a460ae06.4beef8","type":"ui_spacer","name":"spacer","group":"","order":8,"width":6,"height":1},{"id":"bc48626b.e41","type":"ui_spacer","name":"spacer","group":"","order":9,"width":6,"height":1},{"id":"129f038b.7e6834","type":"ui_group","z":"","name":"Teste de Tração de Motores Brushless","tab":"cc946df4.d29788","order":1,"disp":true,"width":"16","collapse":false},{"id":"79421ef8.99aa18","type":"ui_spacer","name":"spacer","group":"8db365f.dcde498","order":4,"width":2,"height":1},{"id":"afc641ec.416278","type":"ui_spacer","name":"spacer","group":"8db365f.dcde498","order":6,"width":2,"height":1},{"id":"bb0242aa.7877f8","type":"ui_tab","z":"","name":"Verificação","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"1e52356.f784f4b","type":"ui_group","z":"","name":"Checagem dos sensores","tab":"bb0242aa.7877f8","order":1,"disp":true,"width":24,"collapse":false},{"id":"efeab544.29a578","type":"ui_group","z":"","name":"Calibração da Célula de Carga","tab":"877f50f.7b0f9b","order":1,"disp":true,"width":"15","collapse":false},{"id":"877f50f.7b0f9b","type":"ui_tab","z":"","name":"Calibração Estática","icon":"equalizer","order":3,"disabled":false,"hidden":false},{"id":"56f4e22e.26a6f4","type":"ui_tab","z":"","name":"Calibração Dinâmica","icon":"dashboard","order":4,"disabled":false,"hidden":false},{"id":"f8672a17.da19f8","type":"ui_group","z":"","name":"Precisa","tab":"56f4e22e.26a6f4","order":1,"disp":true,"width":12,"collapse":false},{"id":"8e02a935.d8b008","type":"ui_spacer","name":"spacer","group":"efeab544.29a578","order":8,"width":3,"height":1},{"id":"91b0f10c.5e3a8","type":"ui_spacer","name":"spacer","group":"efeab544.29a578","order":10,"width":3,"height":1},{"id":"876b1fd4.13aec8","type":"ui_spacer","name":"spacer","group":"efeab544.29a578","order":11,"width":3,"height":1},{"id":"73139fbf.294b88","type":"ui_spacer","name":"spacer","group":"efeab544.29a578","order":12,"width":3,"height":1},{"id":"f4eca8ec.9de4c","type":"ui_spacer","name":"spacer","group":"efeab544.29a578","order":13,"width":3,"height":1},{"id":"9ffc575f.da1f48","type":"ui_spacer","name":"spacer","group":"efeab544.29a578","order":14,"width":3,"height":1},{"id":"f4cd4ea8.9495f8","type":"ui_spacer","name":"spacer","group":"efeab544.29a578","order":15,"width":3,"height":1},{"id":"c6501c64.c3339","type":"ui_spacer","name":"spacer","group":"efeab544.29a578","order":16,"width":3,"height":1},{"id":"4db3a94.99aa1d8","type":"ui_tab","z":"","name":"Display","icon":"trending_up","order":5,"disabled":false,"hidden":false},{"id":"1285dd49.e3515b","type":"ui_group","z":"","name":"Parâmetros do Teste","tab":"4db3a94.99aa1d8","order":1,"disp":false,"width":"13","collapse":false},{"id":"eb0f497e.b5b388","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"7e318539.2000bc","type":"ui_group","z":"","name":"Menu","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"4fd9ba16.57eaa4","type":"ui_group","z":"","name":"Group 2","tab":"","order":3,"disp":true,"width":"6","collapse":false},{"id":"b7188333.18b0a","type":"ui_group","z":"","name":"Group 1","tab":"","order":2,"disp":true,"width":"6","collapse":false},{"id":"70d1fe30.a3b2f8","type":"ui_group","z":"","name":"Group 3","tab":"","order":4,"disp":true,"width":"6","collapse":false},{"id":"3e26bae5.c7f52e","type":"ui_group","z":"","name":"Rotina","tab":"4db3a94.99aa1d8","order":2,"disp":false,"width":"13","collapse":false},{"id":"b4eec92e.11ffd","type":"ui_group","z":"","name":"Loop","tab":"4db3a94.99aa1d8","order":3,"disp":false,"width":"13","collapse":false},{"id":"8164f52c.e4d86","type":"ui_group","z":"","name":"Data","tab":"4db3a94.99aa1d8","order":4,"disp":false,"width":13,"collapse":false},{"id":"638d889c.647d","type":"ui_group","z":"","name":"Rotinaescolha","tab":"4db3a94.99aa1d8","order":5,"disp":false,"width":"13","collapse":false},{"id":"38621fb2.7abc7","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"1dbc443.906a43c","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"f0dad106.0e302","type":"ui_group","z":"","name":"Loopescolha","tab":"4db3a94.99aa1d8","order":6,"disp":false,"width":"13","collapse":false},{"id":"cf5ef35d.d04a78","type":"ui_group","z":"","name":"IniciarTeste","tab":"4db3a94.99aa1d8","order":7,"disp":false,"width":"26","collapse":false},{"id":"148a003d.e3167","type":"MySQLdatabase","z":"","name":"","host":"127.0.0.1","port":"3306","db":"node-red-temp","tz":""},{"id":"f7f2fa05.2620c","type":"MySQLdatabase","z":"","name":"","host":"127.0.0.1","port":"3308","db":"cadastro","tz":""},{"id":"20b7d0bd.c079","type":"ui_group","z":"","name":"PWM","tab":"","order":1,"disp":true,"width":12,"collapse":false},{"id":"a0d000c5.3838e","type":"ui_group","z":"","name":"Dashboard de Resultados","tab":"fd79a8be.c7dc48","order":1,"disp":true,"width":30,"collapse":false},{"id":"fd79a8be.c7dc48","type":"ui_tab","z":"","name":"Visualizar resultado","icon":"dashboard","disabled":false,"hidden":false},{"id":"1f913ed.6b33ec1","type":"ui_group","z":"","name":"Name list","tab":"","order":1,"disp":true,"width":"15","collapse":false},{"id":"7fac1cc6.19da94","type":"ui_group","z":"","name":"Name list","tab":"","order":1,"disp":true,"width":"15","collapse":false},{"id":"12f5485a.e21e48","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":7,"width":1,"height":1},{"id":"9818161a.014308","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":11,"width":1,"height":1},{"id":"501cb9b6.932888","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":13,"width":1,"height":1},{"id":"557dfd3b.9cef04","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":15,"width":1,"height":1},{"id":"d5370250.a18d6","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":16,"width":1,"height":1},{"id":"3a9a762e.81e24a","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":17,"width":1,"height":1},{"id":"cb1ef849.9cd8d8","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":18,"width":1,"height":1},{"id":"40811757.5f2538","type":"ui_group","z":"","name":"Filters","tab":"","order":2,"disp":true,"width":"24","collapse":false},{"id":"93d6a2b.1f6836","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"12","collapse":false},{"id":"d2d59195.597c9","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"12","collapse":false},{"id":"7abfb95b.1123e8","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"12","collapse":false},{"id":"f4296daa.d0ff98","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":6,"width":10,"height":1},{"id":"ddbc256a.66f4a","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":8,"width":10,"height":1},{"id":"142e5b1e.f94b45","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":9,"width":10,"height":1},{"id":"d75829df.eee23","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":10,"width":10,"height":1},{"id":"33b11127.6b55a6","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":11,"width":10,"height":1},{"id":"ed5ffa00.50cf5","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":12,"width":10,"height":1},{"id":"3c09e9e1.bcd9f6","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":13,"width":10,"height":1},{"id":"4e19d30c.00196c","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":14,"width":10,"height":1},{"id":"3f6c715.4cb898e","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":15,"width":10,"height":1},{"id":"2f406867.dab36","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":16,"width":10,"height":1},{"id":"b439ca7c.23daa","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":17,"width":10,"height":1},{"id":"bc42c945.af01c","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":18,"width":10,"height":1},{"id":"f6f88ca2.26d6b","type":"ui_spacer","name":"spacer","group":"1e52356.f784f4b","order":1,"width":6,"height":1},{"id":"af4a9b12.cbc8a8","type":"ui_spacer","name":"spacer","group":"1e52356.f784f4b","order":4,"width":6,"height":1},{"id":"1c89968b.5ad1f9","type":"ui_spacer","name":"spacer","group":"1e52356.f784f4b","order":6,"width":2,"height":1},{"id":"2979d63.a6fa92a","type":"ui_spacer","name":"spacer","group":"1e52356.f784f4b","order":12,"width":2,"height":1},{"id":"3eda2a42.498316","type":"ui_spacer","name":"spacer","group":"1e52356.f784f4b","order":14,"width":2,"height":1},{"id":"88628968.d5de38","type":"ui_spacer","name":"spacer","group":"1e52356.f784f4b","order":16,"width":2,"height":1},{"id":"9fc0b253.50d35","type":"ui_spacer","name":"spacer","group":"1e52356.f784f4b","order":18,"width":2,"height":1},{"id":"efd27ff0.f0cbf","type":"ui_spacer","name":"spacer","group":"1e52356.f784f4b","order":22,"width":2,"height":1},{"id":"c86a5b71.28f368","type":"ui_spacer","name":"spacer","group":"1e52356.f784f4b","order":24,"width":2,"height":1},{"id":"c38e153e.6ad5c8","type":"ui_group","z":"","name":"Calibração RPM","tab":"877f50f.7b0f9b","order":2,"disp":true,"width":"6","collapse":false},{"id":"4ef5f78.ffccc08","type":"ui_group","z":"","name":"Carregar teste","tab":"cc946df4.d29788","order":2,"disp":true,"width":8,"collapse":false},{"id":"747cd00b.7f633","type":"ui_group","z":"","name":"Não","tab":"56f4e22e.26a6f4","order":2,"disp":true,"width":12,"collapse":false},{"id":"26cf270b.2056b8","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"Estático/Dinâmico","label":"Tipo de Teste","tooltip":"","place":"Escolha a opção","group":"129f038b.7e6834","order":2,"width":14,"height":1,"passthru":true,"multiple":false,"options":[{"label":"","value":"Teste Estático","type":"str"},{"label":"","value":"Teste Dinâmico","type":"str"}],"payload":"","topic":"teste","x":610,"y":240,"wires":[["ff305678.fa3538"]]},{"id":"c4332066.6b31c8","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"Rotina/OpenLoop","label":"Formato do Teste","tooltip":"","place":"Escolha a opção","group":"129f038b.7e6834","order":4,"width":14,"height":1,"passthru":true,"multiple":false,"options":[{"label":"Rotina","value":"Rotina","type":"str"},{"label":"Open Loop","value":"Open Loop","type":"str"}],"payload":"","topic":"teste","x":610,"y":300,"wires":[["776f3272.44bc9c"]]},{"id":"d0fa7354.6ddf48","type":"inject","z":"6dc3f0bb.36c81","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":190,"y":360,"wires":[["26cf270b.2056b8","c4332066.6b31c8","34fa5777.fd6858","93c3c5e6.518348","b652184c.cfb708","ae4f3104.6cf81"]]},{"id":"e4f63b41.60e9b8","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"motor","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":460,"wires":[["38f22727.bedcb8"]]},{"id":"8034bff1.ec3e78","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"helice","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":680,"wires":[["458d821b.e5b2a4"]]},{"id":"ff305678.fa3538","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"tipo_teste","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":240,"wires":[["150c16eb.145b39"]]},{"id":"776f3272.44bc9c","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"metodo_teste","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":300,"wires":[["d6046b56.b69b7"]]},{"id":"43d68bf6.171604","type":"ui_button","z":"6dc3f0bb.36c81","name":"","group":"129f038b.7e6834","order":12,"width":4,"height":1,"passthru":false,"label":"Limpar","tooltip":"","color":"","bgcolor":"red","icon":"touch_app","payload":"","payloadType":"num","topic":"","x":170,"y":440,"wires":[["26cf270b.2056b8","c4332066.6b31c8","470b1f16.5f922","34fa5777.fd6858","93c3c5e6.518348","b652184c.cfb708"]]},{"id":"150c16eb.145b39","type":"function","z":"6dc3f0bb.36c81","name":"Retorna Teste","func":"var tipo_teste = global.get('tipo_teste');\nmsg.payload = \"O tipo de teste escolhido foi\"+ \" \" + tipo_teste;\nglobal.set('tipo_teste', tipo_teste);\nreturn msg;","outputs":1,"noerr":0,"x":1100,"y":240,"wires":[["2bf4618f.e75c36"]]},{"id":"d6046b56.b69b7","type":"function","z":"6dc3f0bb.36c81","name":"Retorna método","func":"var metodo_teste = global.get('metodo_teste');\nmsg.payload = \"O método escolhido foi\" + \" \" + metodo_teste;\nglobal.set('metodo_teste', metodo_teste);\nreturn msg;","outputs":1,"noerr":0,"x":1100,"y":300,"wires":[["2bf4618f.e75c36"]]},{"id":"38f22727.bedcb8","type":"function","z":"6dc3f0bb.36c81","name":"Retorna motor","func":"var motor = global.get('motor');\nmsg.payload = \"O motor do teste é\" + \" \" + motor;\nglobal.set('motor', motor);\nreturn msg;","outputs":1,"noerr":0,"x":1100,"y":460,"wires":[["2bf4618f.e75c36"]]},{"id":"458d821b.e5b2a4","type":"function","z":"6dc3f0bb.36c81","name":"Retorna hélice","func":"var helice = global.get('helice');\nmsg.payload = \"A hélice do teste é\" + \" \" + helice;\nglobal.set('helice', helice);\nreturn msg;","outputs":1,"noerr":0,"x":1080,"y":680,"wires":[["2bf4618f.e75c36"]]},{"id":"8023dc2d.3400f","type":"ui_button","z":"6dc3f0bb.36c81","name":"","group":"129f038b.7e6834","order":11,"width":12,"height":1,"passthru":true,"label":"Confirmar","tooltip":"","color":"","bgcolor":"green","icon":"thumb_up","payload":"concatenar","payloadType":"global","topic":"","x":700,"y":760,"wires":[["ed4e06e6.f27ec8","e77292da.27cd3"]]},{"id":"2bf4618f.e75c36","type":"function","z":"6dc3f0bb.36c81","name":"Concatenar informações","func":"var tipo_teste = global.get('tipo_teste')\nvar metodo_teste = global.get('metodo_teste')\nvar motor = global.get('motor')\nvar helice = global.get('helice')\n\nvar teste = tipo_teste + metodo_teste + helice + motor;\nconcatenar = [tipo_teste,metodo_teste,motor,helice];\nglobal.set('concatenar', concatenar);\nglobal.set('teste', teste)\nreturn msg;","outputs":1,"noerr":0,"x":1390,"y":400,"wires":[[]]},{"id":"c3102e26.9a3fb","type":"ui_button","z":"6dc3f0bb.36c81","name":"Motor","group":"129f038b.7e6834","order":5,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#87A980","icon":"flight","payload":"","payloadType":"str","topic":"","x":90,"y":1180,"wires":[[]]},{"id":"5020bf25.4efb88","type":"ui_button","z":"6dc3f0bb.36c81","name":"Hélice","group":"129f038b.7e6834","order":9,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#FFCC66","icon":"toys","payload":"","payloadType":"str","topic":"","x":90,"y":1300,"wires":[[]]},{"id":"da19ad70.4b316","type":"ui_button","z":"6dc3f0bb.36c81","name":"Metodo","group":"129f038b.7e6834","order":3,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#DAC4B4","icon":"view_list","payload":"","payloadType":"str","topic":"","x":100,"y":1260,"wires":[[]]},{"id":"470b1f16.5f922","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["6bb5987e.c74748","76109d2f.c0ff1c","a4a59900.8175b8","7ccca92d.42ed1","16ffef69.dcd909","be67008b.897128","3616df69.f15dc8","c875b14c.428778","68a73c0d.79bedc","81008bb2.ba2d28","865e31a3.d82b8","418a7cec.e7f5a4","593ebe8a.3a85b","9bcd3eb1.93d49"],"x":180,"y":540,"wires":[]},{"id":"36e7568e.51257a","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":11,"width":10,"height":1,"passthru":false,"label":"Sensor de Temperatura 1","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":150,"y":1300,"wires":[[]]},{"id":"6b1ed06c.14a04","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":7,"width":10,"height":1,"passthru":false,"label":"Sensor de Pressão BMP180","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":450,"y":1420,"wires":[[]]},{"id":"fd84e8f5.53e74","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":19,"width":10,"height":1,"passthru":false,"label":"Célula de Carga","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":410,"y":1540,"wires":[[]]},{"id":"5e9c363a.485ca8","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":23,"width":10,"height":1,"passthru":false,"label":"Sensor de Velocidade do ar","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":150,"y":1540,"wires":[[]]},{"id":"e5e5639c.d823c","type":"ui_button","z":"e45fea15.9c4e3","name":"Iniciar calibração","group":"1e52356.f784f4b","order":2,"width":10,"height":1,"passthru":false,"label":"Iniciar verificação ","tooltip":"","color":"","bgcolor":"green","icon":"","payload":"true","payloadType":"bool","topic":"","x":140,"y":260,"wires":[["2633da85.cb8586"]]},{"id":"9b28fb2e.1b7818","type":"ui_button","z":"e45fea15.9c4e3","name":"Icone de Calibração","group":"1e52356.f784f4b","order":3,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"green","icon":"flight_takeoff","payload":"","payloadType":"str","topic":"","x":300,"y":1240,"wires":[[]]},{"id":"2633da85.cb8586","type":"exec","z":"e45fea15.9c4e3","command":"python3 calibration_pressure_sensor.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":420,"y":260,"wires":[["223156fe.82d5b2"],[],[]]},{"id":"223156fe.82d5b2","type":"function","z":"e45fea15.9c4e3","name":"Verificando","func":"str = msg.payload;\nvar partsOfStr = str.split(',');\n\nvar temp = (Number(partsOfStr[0]));\nvar press = (Number(partsOfStr[1]));\nvar press_mar = (Number(partsOfStr[2]));\nvar altitude = (Number(partsOfStr[3]));\n\nif (altitude||temp||press||press_mar === 0){\n    msg.payload = 'Not OK';\n}\nelse{\n    msg.payload = 'OK';\n}\nreturn msg;","outputs":1,"noerr":0,"x":690,"y":260,"wires":[["b6fc7e9f.0cde6"]]},{"id":"b6fc7e9f.0cde6","type":"switch","z":"e45fea15.9c4e3","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Not OK","vt":"str"},{"t":"eq","v":"OK","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":850,"y":260,"wires":[["157b7f32.6c7bc9","890d1121.19238","e5594d94.1cd5c"],["157b7f32.6c7bc9","e5594d94.1cd5c"]]},{"id":"157b7f32.6c7bc9","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":8,"width":2,"height":1,"name":"Pressão","label":"","format":"{{msg.payload}}","layout":"col-center","x":1040,"y":260,"wires":[]},{"id":"fef6c176.c62ab8","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc"],"x":955,"y":320,"wires":[["157b7f32.6c7bc9"]]},{"id":"e5594d94.1cd5c","type":"exec","z":"e45fea15.9c4e3","command":"python3 temperature_sensor.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":390,"y":400,"wires":[["9986b3b1.c55198"],[],[]]},{"id":"9986b3b1.c55198","type":"function","z":"e45fea15.9c4e3","name":"Verificando","func":"str = msg.payload;\nvar partsOfStr = str.split(',');\n\nvar temp = (Number(partsOfStr[0]));\n\nif (temp === 0){\n    msg.payload = 'Not OK';\n}\nelse{\n    msg.payload = 'OK';\n}\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":400,"wires":[["ee4addca.6425c"]]},{"id":"ee4addca.6425c","type":"switch","z":"e45fea15.9c4e3","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Not OK","vt":"str"},{"t":"eq","v":"OK","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":850,"y":420,"wires":[["9cc68445.452db","9aa3907a.e1313","b60d8192.69dc78"],["9cc68445.452db","b60d8192.69dc78"]]},{"id":"9cc68445.452db","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":10,"width":2,"height":1,"name":"Temperatura","label":"","format":"{{msg.payload}}","layout":"col-center","x":1050,"y":440,"wires":[]},{"id":"b60d8192.69dc78","type":"exec","z":"e45fea15.9c4e3","command":"python3 raw_load_cell.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":370,"y":620,"wires":[["83223509.ad0df8"],[],[]]},{"id":"83223509.ad0df8","type":"function","z":"e45fea15.9c4e3","name":"Verificando","func":"str = msg.payload;\nvar partsOfStr = str.split(',');\n\nvar tracao = (Number(partsOfStr[0]));\nflow.set(\"tracao\", tracao)\n\nif (tracao === 0){\n    msg.payload = 'Not OK';\n}\nelse{\n    msg.payload = 'OK';\n}\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":620,"wires":[["a0774c4a.8676e"]]},{"id":"d6cc431.be66e4","type":"ui_button","z":"6dc3f0bb.36c81","name":"Teste","group":"129f038b.7e6834","order":1,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#A6BBCF","icon":"flight_takeoff","payload":"","payloadType":"str","topic":"","x":90,"y":1220,"wires":[[]]},{"id":"fe7ea4f0.d64498","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":20,"width":2,"height":1,"name":"Celula de Carga OK","label":"","format":"{{msg.payload}}","layout":"col-center","x":1070,"y":600,"wires":[]},{"id":"d7a14a91.3f99f8","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc"],"x":915,"y":660,"wires":[["fe7ea4f0.d64498"]]},{"id":"70b0b5c8.f5e7a4","type":"exec","z":"d046cfc3.2c33f","command":"python3 -u offset_load_cell.py","addpay":true,"append":"","useSpawn":"true","timer":"","oldrc":false,"name":"","x":570,"y":140,"wires":[["cfa506f8.9fa398"],[],[]]},{"id":"cfa506f8.9fa398","type":"function","z":"d046cfc3.2c33f","name":"","func":"str = msg.payload;\nvar partsOfStr = str.split(',');\nvar offset = (Number(partsOfStr[0]));\n\nmsg.payload = offset;\n\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":140,"wires":[["d5121c40.4254a"]]},{"id":"7c28c949.84993","type":"change","z":"d046cfc3.2c33f","name":"","rules":[{"t":"set","p":"offset","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":970,"y":200,"wires":[["b050470.b4ca438","d3eb0037.78e44"]]},{"id":"39884cf3.0269d4","type":"exec","z":"d046cfc3.2c33f","command":"python3 -u raw_load_cell.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1660,"y":140,"wires":[["1613ca87.42e625"],[],[]]},{"id":"1613ca87.42e625","type":"function","z":"d046cfc3.2c33f","name":"","func":"str = msg.payload;\nvar partsOfStr = str.split(',');\nvar tracao = (Number(partsOfStr[0]));\n\nmsg.payload = tracao;\n\nreturn msg;\n","outputs":1,"noerr":0,"x":1910,"y":140,"wires":[["37714e85.93f8ea"]]},{"id":"56202763.f7f188","type":"ui_button","z":"d046cfc3.2c33f","name":"","group":"efeab544.29a578","order":1,"width":15,"height":1,"passthru":false,"label":"Iniciar calibração","tooltip":"","color":"","bgcolor":"green","icon":"touch_app","payload":"true","payloadType":"bool","topic":"","x":200,"y":140,"wires":[["70b0b5c8.f5e7a4"]]},{"id":"b050470.b4ca438","type":"ui_text","z":"d046cfc3.2c33f","group":"efeab544.29a578","order":2,"width":5,"height":1,"name":"offset","label":"Offset:","format":"{{msg.payload}}","layout":"row-left","x":1210,"y":200,"wires":[]},{"id":"d5121c40.4254a","type":"change","z":"d046cfc3.2c33f","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":140,"wires":[["7c28c949.84993"]]},{"id":"37714e85.93f8ea","type":"function","z":"d046cfc3.2c33f","name":"","func":"var tracao = msg.payload;\nvar offset = global.get('offset');\nvar peso = global.get('massatarada');\n\nvar tracao_correta = (tracao - offset)/peso;\n\nif (tracao_correta<0){\n    tracao_correta = 0;\n}\n\nmsg.payload = tracao_correta;\n\nglobal.set('tracao_correta', tracao_correta);\nreturn msg;","outputs":1,"noerr":0,"x":2130,"y":140,"wires":[["9a49dcbe.0851d","ce5a06e4.0220a8","b1055208.c3644"]]},{"id":"9a49dcbe.0851d","type":"while-loop","z":"d046cfc3.2c33f","name":"","condi":"true","x":1430,"y":140,"wires":[[],["39884cf3.0269d4"]]},{"id":"ce5a06e4.0220a8","type":"ui_gauge","z":"d046cfc3.2c33f","name":"","group":"efeab544.29a578","order":9,"width":9,"height":4,"gtype":"gage","title":"Valor puxado","label":"gramas","format":"{{value}}","min":0,"max":"5000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":2290,"y":220,"wires":[]},{"id":"d3eb0037.78e44","type":"ui_text","z":"d046cfc3.2c33f","group":"efeab544.29a578","order":3,"width":7,"height":1,"name":"coloque carga","label":"","format":"Puxe uma carga conhecida no centro do motor. Aperte ENTER quando colocar.","layout":"row-spread","x":910,"y":300,"wires":[]},{"id":"b6a8075d.a3ab6","type":"ui_text_input","z":"d046cfc3.2c33f","name":"Qual era o valor","label":"","tooltip":"","group":"efeab544.29a578","order":6,"width":5,"height":1,"passthru":true,"mode":"number","delay":300,"topic":"","x":460,"y":620,"wires":[["87f24458.3fdc68"]]},{"id":"87f24458.3fdc68","type":"change","z":"d046cfc3.2c33f","name":"","rules":[{"t":"set","p":"massatarada","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":620,"wires":[[]]},{"id":"2048cc35.e28c4c","type":"exec","z":"d046cfc3.2c33f","command":"python3 -u raw_load_cell.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":400,"y":520,"wires":[["eca0f68b.8e77d"],[],[]]},{"id":"eca0f68b.8e77d","type":"function","z":"d046cfc3.2c33f","name":"GET DATA MEAN","func":"str = msg.payload;\nvar partsOfStr = str.split(',');\nvar tracao = (Number(partsOfStr[0]));\n\nmsg.payload = tracao;\n\nreturn msg;","outputs":1,"noerr":0,"x":690,"y":520,"wires":[["77185112.5a4ac8"]]},{"id":"77185112.5a4ac8","type":"change","z":"d046cfc3.2c33f","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":520,"wires":[["53d83e4f.0fb3f8"]]},{"id":"53d83e4f.0fb3f8","type":"change","z":"d046cfc3.2c33f","name":"","rules":[{"t":"set","p":"datamean","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1180,"y":520,"wires":[["c3e8ea7c.122998"]]},{"id":"69e58526.02eeb4","type":"ui_text","z":"d046cfc3.2c33f","group":"efeab544.29a578","order":5,"width":7,"height":1,"name":"Confirmar peso","label":"","format":"{{msg.payload}}","layout":"row-left","x":1680,"y":520,"wires":[]},{"id":"3d6969c8.a5b59e","type":"ui_button","z":"d046cfc3.2c33f","name":"PRESS","group":"efeab544.29a578","order":4,"width":3,"height":1,"passthru":false,"label":"ENTER","tooltip":"","color":"","bgcolor":"green","icon":"touch_app","payload":"true","payloadType":"bool","topic":"","x":140,"y":520,"wires":[["2048cc35.e28c4c"]]},{"id":"c3e8ea7c.122998","type":"change","z":"d046cfc3.2c33f","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Confirme o valor colocado em gramas:","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1430,"y":520,"wires":[["69e58526.02eeb4"]]},{"id":"8b21b7ee.ee48b","type":"ui_button","z":"d046cfc3.2c33f","name":"Recomeçar calibração","group":"efeab544.29a578","order":17,"width":6,"height":1,"passthru":false,"label":"Recomeçar ","tooltip":"","color":"black","bgcolor":"yellow","icon":"restore","payload":"","payloadType":"num","topic":"","x":140,"y":700,"wires":[["fc20f6f6.15abe"]]},{"id":"85e8c474.795ae","type":"ui_button","z":"d046cfc3.2c33f","name":"Confirmar carga colocada","group":"efeab544.29a578","order":7,"width":3,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"green","icon":"check_circle","payload":"massatarada","payloadType":"global","topic":"","x":1230,"y":140,"wires":[["9a49dcbe.0851d"]]},{"id":"31ad114d.51f5c6","type":"ui_button","z":"d046cfc3.2c33f","name":"","group":"efeab544.29a578","order":18,"width":9,"height":1,"passthru":false,"label":"Confirmar calibração","tooltip":"","color":"","bgcolor":"green","icon":"thumb_up","payload":"true","payloadType":"bool","topic":"","x":140,"y":760,"wires":[[]]},{"id":"66b29300.7ec02c","type":"link in","z":"d046cfc3.2c33f","name":"","links":["fc20f6f6.15abe"],"x":295,"y":620,"wires":[["b6a8075d.a3ab6"]]},{"id":"fc20f6f6.15abe","type":"link out","z":"d046cfc3.2c33f","name":"","links":["95c164c3.9d92a8","66b29300.7ec02c","3c670b75.75020c","6f8fc703.de5c78","16105b9e.c2b8c4","4cce8ec5.507a48"],"x":315,"y":700,"wires":[]},{"id":"16105b9e.c2b8c4","type":"link in","z":"d046cfc3.2c33f","name":"","links":["fc20f6f6.15abe"],"x":555,"y":560,"wires":[["eca0f68b.8e77d"]]},{"id":"95c164c3.9d92a8","type":"link in","z":"d046cfc3.2c33f","name":"","links":["fc20f6f6.15abe"],"x":695,"y":340,"wires":[["d3eb0037.78e44"]]},{"id":"6f8fc703.de5c78","type":"link in","z":"d046cfc3.2c33f","name":"","links":["fc20f6f6.15abe"],"x":1075,"y":280,"wires":[["b050470.b4ca438"]]},{"id":"3c670b75.75020c","type":"link in","z":"d046cfc3.2c33f","name":"","links":["fc20f6f6.15abe"],"x":2055,"y":280,"wires":[["ce5a06e4.0220a8"]]},{"id":"4cce8ec5.507a48","type":"link in","z":"d046cfc3.2c33f","name":"","links":["fc20f6f6.15abe"],"x":1555,"y":580,"wires":[["69e58526.02eeb4"]]},{"id":"eb886d07.9f6dc8","type":"ui_button","z":"e45fea15.9c4e3","name":"Restart","group":"1e52356.f784f4b","order":25,"width":0,"height":0,"passthru":false,"label":"Reiniciar","tooltip":"","color":"black","bgcolor":"yellow","icon":"restore","payload":"","payloadType":"num","topic":"","x":140,"y":160,"wires":[["3f37c34.b6b0fbc"]]},{"id":"3f37c34.b6b0fbc","type":"link out","z":"e45fea15.9c4e3","name":"","links":["fef6c176.c62ab8","d7a14a91.3f99f8","1366383a.d72f88","e0c40117.9f117"],"x":245,"y":160,"wires":[]},{"id":"d78fdbcc.35109","type":"ui_dropdown","z":"760dfb14.3731dc","name":"Rotinas","label":"Tipo de Teste","tooltip":"","place":"Escolha a opção","group":"3e26bae5.c7f52e","order":1,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"","value":"Potência Máxima","type":"str"},{"label":"","value":"Curva de Torque ","type":"str"},{"label":"","value":"Modo Baby","type":"str"},{"label":"","value":"Modo Baby turbo","type":"str"}],"payload":"","topic":"","x":1360,"y":420,"wires":[["70128b7f.22341c","9d1847f1.95bdb8","770a2683.cab49","d280ecf0.6d688","6ad46023.d045d"]]},{"id":"2f0b2ae6.27d28e","type":"ui_dropdown","z":"760dfb14.3731dc","name":"Open Loop","label":"Tipo de Teste","tooltip":"","place":"Escolha a opção","group":"b4eec92e.11ffd","order":1,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"","value":"Open Loop","type":"str"}],"payload":"","topic":"","x":1390,"y":580,"wires":[["70128b7f.22341c","9cf3f5ab.858908","653173e8.49ab14","6ad46023.d045d"]]},{"id":"291d2ac0.a8ef06","type":"switch","z":"760dfb14.3731dc","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Open Loop","vt":"str"},{"t":"eq","v":"Rotina","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":920,"y":480,"wires":[["a50984d5.bc3c78"],["f46f6c95.5a23e"]]},{"id":"70128b7f.22341c","type":"ui_ui_control","z":"760dfb14.3731dc","name":"","events":"all","x":1400,"y":520,"wires":[[]]},{"id":"a50984d5.bc3c78","type":"change","z":"760dfb14.3731dc","name":"Mudar para Loop","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Display_Rotina\",\"Display_Rotinaescolha\"],\"show\":[\"Display_Loop\",\"Display_Loopescolha\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":1070,"y":420,"wires":[["70128b7f.22341c"]]},{"id":"f46f6c95.5a23e","type":"change","z":"760dfb14.3731dc","name":"Mudar para Rotina","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Display_Loop\",\"Display_Loopescolha\"],\"show\":[\"Display_Rotina\",\"Display_Rotinaescolha\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":560,"wires":[["70128b7f.22341c"]]},{"id":"ed4e06e6.f27ec8","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["9b12a2.8fa07d6","c697df34.5692f"],"x":835,"y":760,"wires":[]},{"id":"c697df34.5692f","type":"link in","z":"760dfb14.3731dc","name":"","links":["ed4e06e6.f27ec8"],"x":95,"y":220,"wires":[["6ee968ad.15a348"]]},{"id":"6ee968ad.15a348","type":"function","z":"760dfb14.3731dc","name":"Variaveis","func":"str = msg.payload;\nvar Tipo_Teste = str[0];\nvar Metodo_Teste = str[1];\nvar Motor = str[2];\nvar Helice = str[3];\n\nif (Tipo_Teste || Metodo_Teste || Motor || Helice === null){\n    msg.payload=true;\n}\nelse{\n    msg.payload=false;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":240,"y":220,"wires":[["3f645d60.e7b91a"]]},{"id":"3f645d60.e7b91a","type":"switch","z":"760dfb14.3731dc","name":"Avalia input","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":450,"y":220,"wires":[["7e8e797f.a6c208"],[]]},{"id":"7e8e797f.a6c208","type":"function","z":"760dfb14.3731dc","name":"","func":"var tipo_teste = global.get('tipo_teste');\nvar metodo_teste = global.get('metodo_teste');\nvar motor = global.get('motor');\nvar helice = global.get('helice');\n\nmsg1 = {payload: tipo_teste}\nmsg2 = {payload: metodo_teste}\nmsg3 = {payload: motor}\nmsg4 = {payload: helice}\n\nreturn [msg1, msg2, msg3, msg4];","outputs":4,"noerr":0,"x":650,"y":220,"wires":[["90150e46.93108"],["291d2ac0.a8ef06","a3b48c26.03a958"],["ebdcb847.b03af"],["56621b1c.fb0afc"]]},{"id":"90150e46.93108","type":"ui_button","z":"760dfb14.3731dc","name":"Tipo de teste","group":"1285dd49.e3515b","order":2,"width":3,"height":1,"passthru":false,"label":"{{msg.payload}}","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":910,"y":140,"wires":[[]]},{"id":"5091f979.c32738","type":"ui_button","z":"760dfb14.3731dc","name":"","group":"1285dd49.e3515b","order":1,"width":8,"height":1,"passthru":false,"label":"Você escolheu o tipo de teste:","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":170,"y":400,"wires":[[]]},{"id":"fcd91259.7bf1a","type":"ui_button","z":"760dfb14.3731dc","name":"Motor","group":"1285dd49.e3515b","order":9,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#87A980","icon":"flight","payload":"","payloadType":"str","topic":"","x":130,"y":560,"wires":[[]]},{"id":"e8e3e20e.d01ab","type":"ui_button","z":"760dfb14.3731dc","name":"Hélice","group":"1285dd49.e3515b","order":12,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#FFCC66","icon":"toys","payload":"","payloadType":"str","topic":"","x":130,"y":680,"wires":[[]]},{"id":"ffea9700.df72f","type":"ui_button","z":"760dfb14.3731dc","name":"Metodo","group":"1285dd49.e3515b","order":6,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#DAC4B4","icon":"view_list","payload":"","payloadType":"str","topic":"","x":140,"y":640,"wires":[[]]},{"id":"e238546.4c36528","type":"ui_button","z":"760dfb14.3731dc","name":"Teste","group":"1285dd49.e3515b","order":3,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#A6BBCF","icon":"flight_takeoff","payload":"","payloadType":"str","topic":"","x":130,"y":600,"wires":[[]]},{"id":"8db666ea.aa4168","type":"ui_button","z":"760dfb14.3731dc","name":"","group":"1285dd49.e3515b","order":4,"width":8,"height":1,"passthru":false,"label":"Você escolheu o método:","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":150,"y":340,"wires":[[]]},{"id":"1b6160d5.bac647","type":"ui_button","z":"760dfb14.3731dc","name":"","group":"1285dd49.e3515b","order":7,"width":8,"height":1,"passthru":false,"label":"Motor a ser testado:","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":140,"y":460,"wires":[[]]},{"id":"64c18b3a.f3e5e4","type":"ui_button","z":"760dfb14.3731dc","name":"","group":"1285dd49.e3515b","order":10,"width":8,"height":1,"passthru":false,"label":"Hélice a ser testada:","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":140,"y":500,"wires":[[]]},{"id":"a3b48c26.03a958","type":"ui_button","z":"760dfb14.3731dc","name":"Metodo de teste","group":"1285dd49.e3515b","order":5,"width":3,"height":1,"passthru":false,"label":"{{msg.payload}}","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":920,"y":200,"wires":[[]]},{"id":"ebdcb847.b03af","type":"ui_button","z":"760dfb14.3731dc","name":"Motor","group":"1285dd49.e3515b","order":8,"width":3,"height":1,"passthru":false,"label":"{{msg.payload}}","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":890,"y":260,"wires":[[]]},{"id":"56621b1c.fb0afc","type":"ui_button","z":"760dfb14.3731dc","name":"Hélice","group":"1285dd49.e3515b","order":11,"width":3,"height":1,"passthru":false,"label":"{{msg.payload}}","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":890,"y":320,"wires":[[]]},{"id":"4dd880f6.4ee438","type":"exec","z":"760dfb14.3731dc","command":"python3 calibration_pressure_sensor.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":480,"y":920,"wires":[["432a174e.c0606"],[],[]]},{"id":"432a174e.c0606","type":"function","z":"760dfb14.3731dc","name":"","func":"str = msg.payload;\nvar partsOfStr = str.split(',');\n\nvar temp = (Number(partsOfStr[0]));\nvar press = (Number(partsOfStr[1]));\nvar press_mar = (Number(partsOfStr[2]));\nvar altitude = (Number(partsOfStr[3]));\n\nmsg1 = {payload: temp}\nmsg2 = {payload: press}\nmsg3 = {payload: press_mar}\nmsg4 = {payload: altitude}\n\nreturn [msg1, msg2, msg3, msg4];\n","outputs":4,"noerr":0,"x":730,"y":920,"wires":[["cd23dcb3.c4308"],["3f6a7f49.2aa49"],["e6dfab00.814f28"],["3e6c21bb.904c6e"]]},{"id":"6b7e5d6a.5d2f4c","type":"inject","z":"760dfb14.3731dc","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":210,"y":920,"wires":[["4dd880f6.4ee438"]]},{"id":"9d1847f1.95bdb8","type":"ui_text","z":"760dfb14.3731dc","group":"638d889c.647d","order":1,"width":0,"height":0,"name":"Modo Potencia Máxima","label":"Modo potencia máxima: motor é colocado em 100% por 1 minuto.","format":"","layout":"row-spread","x":1600,"y":260,"wires":[]},{"id":"770a2683.cab49","type":"ui_text","z":"760dfb14.3731dc","group":"638d889c.647d","order":2,"width":0,"height":0,"name":"Modo Curva de Torque","label":"Modo Curva de Torque: perfeito para analisar a eficiência de sua hélice. ","format":"","layout":"row-spread","x":1600,"y":320,"wires":[]},{"id":"d280ecf0.6d688","type":"ui_text","z":"760dfb14.3731dc","group":"638d889c.647d","order":3,"width":0,"height":0,"name":"Modo Baby","label":"Modo Baby: é uma maneira de analisar o comportamento do motor em baixos torques.","format":"","layout":"row-spread","x":1570,"y":380,"wires":[]},{"id":"9cf3f5ab.858908","type":"ui_text","z":"760dfb14.3731dc","group":"f0dad106.0e302","order":1,"width":0,"height":0,"name":"Modo Open Loop","label":"Modo Open Loop: Aqui o controle é todo seu! Por meio de um potenciômetro, a potência do motor será controlada totalmente pelo usuário. Teste o sistema.","format":"","layout":"row-spread","x":1590,"y":620,"wires":[]},{"id":"653173e8.49ab14","type":"ui_slider","z":"760dfb14.3731dc","name":"","label":"Deslize o botão","tooltip":"","group":"f0dad106.0e302","order":2,"width":5,"height":2,"passthru":true,"outs":"all","topic":"","min":0,"max":"100","step":"1","x":1620,"y":680,"wires":[["bc49404b.fc876"]]},{"id":"bc49404b.fc876","type":"ui_gauge","z":"760dfb14.3731dc","name":"","group":"f0dad106.0e302","order":3,"width":8,"height":2,"gtype":"gage","title":"Potência do Motor","label":"%","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1810,"y":680,"wires":[]},{"id":"267892ae.5d9876","type":"exec","z":"760dfb14.3731dc","command":"python3 sensor_corrente.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":420,"y":1040,"wires":[["3931b4c5.739d1c"],[],[]]},{"id":"f0c4fa7a.da4458","type":"inject","z":"760dfb14.3731dc","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":190,"y":1040,"wires":[["267892ae.5d9876"]]},{"id":"3931b4c5.739d1c","type":"function","z":"760dfb14.3731dc","name":"Sensor de Corrente","func":"str = msg.payload;\nvar partsOfStr = str.split(',');\n\nvar corrente = (Number(partsOfStr[0]));\n\nmsg.payload = corrente;\nreturn msg;\n","outputs":1,"noerr":0,"x":760,"y":1040,"wires":[["d00f4909.c4f74"]]},{"id":"c0c3f24.e1da39","type":"exec","z":"760dfb14.3731dc","command":"python3 sensor_tensao.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":420,"y":1140,"wires":[["3eb8d770.465f"],[],[]]},{"id":"74aec47e.727064","type":"inject","z":"760dfb14.3731dc","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":190,"y":1140,"wires":[["c0c3f24.e1da39"]]},{"id":"3eb8d770.465f","type":"function","z":"760dfb14.3731dc","name":"Sensor de Tensão","func":"str = msg.payload;\nvar partsOfStr = str.split(',');\n\nvar tensao = (Number(partsOfStr[0]));\n\nmsg.payload = tensao;\nreturn msg;\n","outputs":1,"noerr":0,"x":750,"y":1120,"wires":[["6f6729bf.9ba3b"]]},{"id":"a488dedc.c56b2","type":"function","z":"760dfb14.3731dc","name":"Tração","func":"var tracao = global.get('tracao');\nmsg.payload = tracao*9.81;\nreturn msg;","outputs":1,"noerr":0,"x":380,"y":1300,"wires":[[]]},{"id":"318a5276.df1f3e","type":"inject","z":"760dfb14.3731dc","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":200,"y":1300,"wires":[["a488dedc.c56b2"]]},{"id":"a366b95a.fde8a","type":"inject","z":"760dfb14.3731dc","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":170,"y":1220,"wires":[["722c56e0.bc5af"]]},{"id":"722c56e0.bc5af","type":"function","z":"760dfb14.3731dc","name":"Potência","func":"var corrente = global.get('corrente');\nvar tensao = global.get('tensao');\nvar potencia = corrente*tensao;\nmsg.payload = potencia\nreturn msg;","outputs":1,"noerr":0,"x":360,"y":1220,"wires":[["4e7af004.287b68"]]},{"id":"d00f4909.c4f74","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"corrente","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1130,"y":1040,"wires":[["9ecce4ab.04fb88"]]},{"id":"bfbd5ee2.595","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"tensao","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1090,"y":1120,"wires":[["a3409787.9e45a8"]]},{"id":"bcd6757e.f26048","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"low","count":"10","round":"2","mult":"single","reduce":false,"x":940,"y":1040,"wires":[[]]},{"id":"6f6729bf.9ba3b","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"low","count":"10","round":"2","mult":"single","reduce":false,"x":920,"y":1120,"wires":[["bfbd5ee2.595"]]},{"id":"4e7af004.287b68","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"low","count":"1","round":"2","mult":"single","reduce":false,"x":500,"y":1220,"wires":[["342f1530.c877ca"]]},{"id":"91b8bdb2.9a79","type":"pi-gpiod out","z":"6c53f7a3.674208","name":"BLDC PWM","host":"localhost","port":8888,"pin":"16","set":"","level":"0","out":"ser","sermin":"1000","sermax":"2000","x":1010,"y":20,"wires":[]},{"id":"8f1c7cf2.29a47","type":"function","z":"6c53f7a3.674208","name":"Minimum Throttle","func":"var minimum;\nminimum = 0;\nmsg.payload = minimum;\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":200,"wires":[["a44c3084.32f5d","32f50694.fe8c5a"]]},{"id":"a44c3084.32f5d","type":"delay","z":"6c53f7a3.674208","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1400,"y":200,"wires":[["b6523244.206fd"]]},{"id":"8104d307.59c56","type":"delay","z":"6c53f7a3.674208","name":"","pauseType":"delay","timeout":"7","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1060,"y":200,"wires":[["8f1c7cf2.29a47"]]},{"id":"613b5e7d.bcfb","type":"function","z":"6c53f7a3.674208","name":"Maximum Throttle","func":"var minimum;\nminimum = 100;\nmsg.payload = minimum;\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":200,"wires":[["7f7bcc43.2762c4","ad1d22bb.49943"]]},{"id":"32a63167.a2af4e","type":"link in","z":"6c53f7a3.674208","name":"","links":["7f7bcc43.2762c4","32f50694.fe8c5a","fbc2f6cd.143a78","e03300d5.1f2e8","e6d2a3fa.5fdda","8006450e.4fc488","ddce3c48.991ec","3e0ada5b.6780f6","8d5aa44f.0f3cc8","ffb51a99.cac4e8","409b9234.1607cc","135042be.a3babd","42338725.599218","1ef9f4a0.15394b","d387f95c.7b1408","72ba9a4.649db64","5f7fcf18.486ba","4ee56741.b03a48"],"x":855,"y":20,"wires":[["91b8bdb2.9a79"]]},{"id":"7f7bcc43.2762c4","type":"link out","z":"6c53f7a3.674208","name":"","links":["32a63167.a2af4e"],"x":775,"y":140,"wires":[]},{"id":"32f50694.fe8c5a","type":"link out","z":"6c53f7a3.674208","name":"","links":["32a63167.a2af4e"],"x":1355,"y":140,"wires":[]},{"id":"453fc0a.de6f04","type":"ui_button","z":"6c53f7a3.674208","name":"","group":"cf5ef35d.d04a78","order":1,"width":26,"height":1,"passthru":false,"label":"INICIAR TESTE","tooltip":"","color":"","bgcolor":"green","icon":"touch_app","payload":"timestamp","payloadType":"global","topic":"","x":80,"y":200,"wires":[["ee3a224a.2d745","bb6ecd58.a937b"]]},{"id":"ee3a224a.2d745","type":"function","z":"6c53f7a3.674208","name":"Battery_Voltage","func":"var battery_voltage = global.get('tensao');\nmsg.payload = battery_voltage;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":200,"wires":[["a4c218ee.5b4d48"]]},{"id":"a4c218ee.5b4d48","type":"switch","z":"6c53f7a3.674208","name":"","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"7.6","vt":"str"},{"t":"lte","v":"7.6","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":450,"y":200,"wires":[["613b5e7d.bcfb"],["613b5e7d.bcfb"]]},{"id":"b843e546.36ff48","type":"pi-gpiod out","z":"6c53f7a3.674208","name":"Relay GND","host":"localhost","port":8888,"pin":"20","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","x":1010,"y":80,"wires":[]},{"id":"ad1d22bb.49943","type":"function","z":"6c53f7a3.674208","name":"High signal to Transistor","func":"var relay;\nrelay = 1;\nmsg.payload = relay;\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":200,"wires":[["8104d307.59c56","1e913499.86067b"]]},{"id":"27a00b49.cfe0f4","type":"link in","z":"6c53f7a3.674208","name":"","links":["1e913499.86067b","452699b0.6c5328","a06713c4.5570a"],"x":855,"y":80,"wires":[["b843e546.36ff48"]]},{"id":"1e913499.86067b","type":"link out","z":"6c53f7a3.674208","name":"","links":["27a00b49.cfe0f4"],"x":1015,"y":140,"wires":[]},{"id":"3513ebba.67e1f4","type":"ui_slider","z":"6c53f7a3.674208","name":"Controle do Motor","label":"Controle do Motor","tooltip":"","group":"cf5ef35d.d04a78","order":2,"width":26,"height":1,"passthru":true,"outs":"all","topic":"","min":0,"max":"100","step":1,"x":1750,"y":180,"wires":[["ddce3c48.991ec"]]},{"id":"ddce3c48.991ec","type":"link out","z":"6c53f7a3.674208","name":"","links":["32a63167.a2af4e"],"x":1855,"y":80,"wires":[]},{"id":"f2342c9c.4d46b","type":"function","z":"6c53f7a3.674208","name":"Modo Baby - step 1","func":"var baby;\nbaby = 10;\nmsg.payload = baby;\nreturn msg;","outputs":1,"noerr":0,"x":110,"y":320,"wires":[["95956c9d.75c22","3e0ada5b.6780f6"]]},{"id":"95956c9d.75c22","type":"delay","z":"6c53f7a3.674208","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":280,"y":320,"wires":[["4a67d790.9d68c8"]]},{"id":"4a67d790.9d68c8","type":"function","z":"6c53f7a3.674208","name":"Modo Baby - step 2","func":"var baby;\nbaby = 20;\nmsg.payload = baby;\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":320,"wires":[["7113533a.0d467c","8d5aa44f.0f3cc8"]]},{"id":"7113533a.0d467c","type":"delay","z":"6c53f7a3.674208","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":620,"y":320,"wires":[["ef17ff0a.648b2"]]},{"id":"ef17ff0a.648b2","type":"function","z":"6c53f7a3.674208","name":"Modo Baby - step 3","func":"var baby;\nbaby = 30;\nmsg.payload = baby;\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":320,"wires":[["f8caff01.4854d","ffb51a99.cac4e8"]]},{"id":"f8caff01.4854d","type":"delay","z":"6c53f7a3.674208","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":960,"y":320,"wires":[["a685f5a9.2e5e68"]]},{"id":"3e0ada5b.6780f6","type":"link out","z":"6c53f7a3.674208","name":"","links":["32a63167.a2af4e"],"x":215,"y":280,"wires":[]},{"id":"8d5aa44f.0f3cc8","type":"link out","z":"6c53f7a3.674208","name":"","links":["32a63167.a2af4e"],"x":555,"y":280,"wires":[]},{"id":"ffb51a99.cac4e8","type":"link out","z":"6c53f7a3.674208","name":"","links":["32a63167.a2af4e"],"x":895,"y":280,"wires":[]},{"id":"a685f5a9.2e5e68","type":"function","z":"6c53f7a3.674208","name":"Modo Baby - step 4","func":"var baby;\nbaby = 0;\nmsg.payload = baby;\nreturn msg;","outputs":1,"noerr":0,"x":1130,"y":320,"wires":[["409b9234.1607cc","388b7165.ea0cae"]]},{"id":"409b9234.1607cc","type":"link out","z":"6c53f7a3.674208","name":"","links":["32a63167.a2af4e"],"x":1235,"y":280,"wires":[]},{"id":"666b2e75.dc7c2","type":"function","z":"6c53f7a3.674208","name":"Modo Turbo - step 1","func":"var baby;\nbaby = 50;\nmsg.payload = baby;\nreturn msg;","outputs":1,"noerr":0,"x":100,"y":440,"wires":[["94ee87d9.63d438","d387f95c.7b1408"]]},{"id":"94ee87d9.63d438","type":"delay","z":"6c53f7a3.674208","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":280,"y":440,"wires":[["c00fa065.54d1b"]]},{"id":"c00fa065.54d1b","type":"function","z":"6c53f7a3.674208","name":"Modo Turbo - step 2","func":"var baby;\nbaby = 60;\nmsg.payload = baby;\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":440,"wires":[["e7af1766.b48618","72ba9a4.649db64"]]},{"id":"e7af1766.b48618","type":"delay","z":"6c53f7a3.674208","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":640,"y":440,"wires":[["78b956be.bb2b48"]]},{"id":"78b956be.bb2b48","type":"function","z":"6c53f7a3.674208","name":"Modo Turbo - step 3","func":"var baby;\nbaby = 70;\nmsg.payload = baby;\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":440,"wires":[["519df35.1a8910c","5f7fcf18.486ba"]]},{"id":"519df35.1a8910c","type":"delay","z":"6c53f7a3.674208","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1000,"y":440,"wires":[["62a26689.2afad8"]]},{"id":"d387f95c.7b1408","type":"link out","z":"6c53f7a3.674208","name":"","links":["32a63167.a2af4e"],"x":215,"y":400,"wires":[]},{"id":"72ba9a4.649db64","type":"link out","z":"6c53f7a3.674208","name":"","links":["32a63167.a2af4e"],"x":555,"y":400,"wires":[]},{"id":"5f7fcf18.486ba","type":"link out","z":"6c53f7a3.674208","name":"","links":["32a63167.a2af4e"],"x":895,"y":400,"wires":[]},{"id":"62a26689.2afad8","type":"function","z":"6c53f7a3.674208","name":"Modo Turbo - step 4","func":"var baby;\nbaby = 0;\nmsg.payload = baby;\nreturn msg;","outputs":1,"noerr":0,"x":1180,"y":440,"wires":[["4ee56741.b03a48","4bb417b.d3b82e8"]]},{"id":"4ee56741.b03a48","type":"link out","z":"6c53f7a3.674208","name":"","links":["32a63167.a2af4e"],"x":1275,"y":400,"wires":[]},{"id":"6ad46023.d045d","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"modo_escolhido","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1630,"y":460,"wires":[["5b32b1b.e5cef5"]]},{"id":"5b32b1b.e5cef5","type":"function","z":"760dfb14.3731dc","name":"Retorna Teste","func":"var modo_escolhido = global.get('modo_escolhido');\nmsg.payload = modo_escolhido;\nreturn msg;","outputs":1,"noerr":0,"x":1850,"y":460,"wires":[[]]},{"id":"b6523244.206fd","type":"switch","z":"6c53f7a3.674208","name":"","property":"modo_escolhido","propertyType":"global","rules":[{"t":"eq","v":"Open Loop","vt":"str"},{"t":"eq","v":"Modo Baby","vt":"str"},{"t":"eq","v":"Potência Máxima","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":1550,"y":200,"wires":[["3513ebba.67e1f4"],["f2342c9c.4d46b"],["666b2e75.dc7c2"]]},{"id":"388b7165.ea0cae","type":"function","z":"6c53f7a3.674208","name":"Low signal to Transistor","func":"var relay;\nrelay = 0;\nmsg.payload = relay;\nreturn msg;","outputs":1,"noerr":0,"x":1390,"y":320,"wires":[["452699b0.6c5328"]]},{"id":"452699b0.6c5328","type":"link out","z":"6c53f7a3.674208","name":"","links":["27a00b49.cfe0f4"],"x":1515,"y":280,"wires":[]},{"id":"4bb417b.d3b82e8","type":"function","z":"6c53f7a3.674208","name":"Low signal to Transistor","func":"var relay;\nrelay = 0;\nmsg.payload = relay;\nreturn msg;","outputs":1,"noerr":0,"x":1430,"y":440,"wires":[["a06713c4.5570a"]]},{"id":"a06713c4.5570a","type":"link out","z":"6c53f7a3.674208","name":"","links":["27a00b49.cfe0f4"],"x":1555,"y":400,"wires":[]},{"id":"cd23dcb3.c4308","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"low","count":"10","round":"2","mult":"single","reduce":false,"x":860,"y":840,"wires":[["d4da9992.b850e8"]]},{"id":"d4da9992.b850e8","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"temp_ambiente","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":840,"wires":[["646df9f1.031ed8"]]},{"id":"3f6a7f49.2aa49","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"low","count":"10","round":"2","mult":"single","reduce":false,"x":860,"y":880,"wires":[["5981f042.b9674"]]},{"id":"5981f042.b9674","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"press_mar","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":880,"wires":[["6aa5d2e2.f2b8fc"]]},{"id":"e6dfab00.814f28","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"low","count":"10","round":"2","mult":"single","reduce":false,"x":860,"y":920,"wires":[["5d4a776.0f72988"]]},{"id":"5d4a776.0f72988","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"press_ambiente","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":920,"wires":[["7022414.8d0ecc"]]},{"id":"3e6c21bb.904c6e","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"low","count":"10","round":"2","mult":"single","reduce":false,"x":860,"y":960,"wires":[["daece7c2.ce0cc8"]]},{"id":"daece7c2.ce0cc8","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"altitude","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030,"y":960,"wires":[["ca7d2b4f.eb59a8"]]},{"id":"646df9f1.031ed8","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":3,"width":6,"height":1,"name":"","label":"Temperatura Ambiente","format":"{{msg.payload}}","layout":"col-center","x":1400,"y":880,"wires":[]},{"id":"6aa5d2e2.f2b8fc","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":4,"width":6,"height":1,"name":"","label":"Pressão Nível do Mar","format":"{{msg.payload}}","layout":"col-center","x":1400,"y":920,"wires":[]},{"id":"7022414.8d0ecc","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":5,"width":6,"height":1,"name":"","label":"Pressão Ambiente","format":"{{msg.payload}}","layout":"col-center","x":1390,"y":960,"wires":[]},{"id":"ca7d2b4f.eb59a8","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":8,"width":7,"height":1,"name":"","label":"Altitude ","format":"{{msg.payload}}","layout":"col-center","x":1360,"y":1000,"wires":[]},{"id":"9ecce4ab.04fb88","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":6,"width":7,"height":1,"name":"","label":"Corrente ","format":"{{msg.payload}}","layout":"col-center","x":1300,"y":1040,"wires":[]},{"id":"a3409787.9e45a8","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":12,"width":7,"height":1,"name":"","label":"Tensão na Bateria","format":"{{msg.payload}}","layout":"col-center","x":1290,"y":1120,"wires":[]},{"id":"17d4ee7c.a431d2","type":"ui_gauge","z":"760dfb14.3731dc","name":"","group":"cf5ef35d.d04a78","order":9,"width":10,"height":4,"gtype":"gage","title":"Potência do Motor (%)","label":"W","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":900,"y":1220,"wires":[]},{"id":"feb36a6a.922cc8","type":"ui_gauge","z":"d046cfc3.2c33f","name":"Torque","group":"cf5ef35d.d04a78","order":10,"width":8,"height":4,"gtype":"gage","title":"Torque (N)","label":"N","format":"{{value}}","min":0,"max":"50","colors":["#00b500","#e6e600","#ca3838"],"seg1":"25","seg2":"40","x":2470,"y":20,"wires":[]},{"id":"b1055208.c3644","type":"function","z":"d046cfc3.2c33f","name":"Conversão massa torque","func":"torque = msg.payload;\ntorque_saida = torque*9.81/1000;\nmsg.payload = torque_saida;\nreturn msg;","outputs":1,"noerr":0,"x":2290,"y":20,"wires":[["feb36a6a.922cc8","d4d6905d.2ae74"]]},{"id":"342f1530.c877ca","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"potencia","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":1220,"wires":[["17d4ee7c.a431d2"]]},{"id":"d4d6905d.2ae74","type":"change","z":"d046cfc3.2c33f","name":"","rules":[{"t":"set","p":"torque_newton","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2480,"y":80,"wires":[[]]},{"id":"29e3fbbf.390654","type":"function","z":"6a7f58b5.ba1848","name":"Writing data to CSV file","func":"var time_now = msg.payload;\nvar motor = global.get('motor');\nvar helice = global.get('helice');\nvar tensao = global.get('tensao');\nvar corrente = global.get('corrente');\nvar pressao_mar = global.get('press_mar');\nvar pressao_amb = global.get('press_ambiente');\nvar altitude = global.get('altitude');\nvar timestamp= global.get('timestamp');\nvar potencia = global.get('potencia');\nvar torque = global.get('torque_newton');\n\nvar data = timestamp+\",\"+tensao+\",\"+corrente+\",\"+pressao_mar+\",\"+pressao_amb+\",\"+altitude+\",\"+potencia+\",\"+torque\n\nmsg.payload = data;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":120,"wires":[["732420c.37501e","ef79db84.8b5bb8"]]},{"id":"732420c.37501e","type":"file","z":"6a7f58b5.ba1848","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"false","encoding":"none","x":750,"y":120,"wires":[[]]},{"id":"67f732c7.0f2f2c","type":"while-loop","z":"6a7f58b5.ba1848","name":"","condi":"msg.payload !== 0 ","x":610,"y":200,"wires":[["80debbee.1d2828"],["29e3fbbf.390654"]]},{"id":"2c88933b.82dd0c","type":"ui_button","z":"6a7f58b5.ba1848","name":"","group":"cf5ef35d.d04a78","order":14,"width":6,"height":2,"passthru":false,"label":"Stop test","tooltip":"","color":"","bgcolor":"orange","icon":"","payload":"0","payloadType":"num","topic":"","x":240,"y":280,"wires":[["67f732c7.0f2f2c"]]},{"id":"b3ee618d.a1281","type":"link in","z":"6a7f58b5.ba1848","name":"","links":["8d29003.747e1","bb6ecd58.a937b"],"x":120,"y":40,"wires":[["ededeca2.075df","d51bc178.29e5c"]]},{"id":"1516119a.9cee4e","type":"fs-file-lister","z":"6a7f58b5.ba1848","name":"","start":"/home/pi/Documents/Tests","pattern":"*.csv*","folders":"*","hidden":true,"lstype":"files","path":true,"single":true,"depth":0,"stat":false,"showWarnings":true,"x":300,"y":520,"wires":[["49961aa4.8306ec"]]},{"id":"49961aa4.8306ec","type":"change","z":"6a7f58b5.ba1848","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":520,"wires":[["20b5b073.a952e"]]},{"id":"20b5b073.a952e","type":"ui_dropdown","z":"6a7f58b5.ba1848","name":"","label":"Escolha o Teste","tooltip":"","place":"Escolha o teste","group":"a0d000c5.3838e","order":1,"width":26,"height":1,"passthru":true,"multiple":false,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":720,"y":520,"wires":[["dd74262e.6e5498"]]},{"id":"88d627eb.2ee89","type":"file in","z":"6a7f58b5.ba1848","name":"Read File","filename":"","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":340,"y":720,"wires":[["6281b075.dc58d8"]]},{"id":"6281b075.dc58d8","type":"csv","z":"6a7f58b5.ba1848","name":"","sep":",","hdrin":false,"hdrout":false,"multi":"mult","ret":"\\r\\n","temp":"","skip":"0","strings":false,"x":570,"y":720,"wires":[["fdc83680.0ee26"]]},{"id":"ca25d8e2.7b4908","type":"ui_chart","z":"6a7f58b5.ba1848","name":"Tensão na Bateria","group":"a0d000c5.3838e","order":3,"width":10,"height":8,"label":"Tensão (V)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":true,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"1000","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":890,"y":900,"wires":[[]]},{"id":"a46ce0c4.34131","type":"inject","z":"6a7f58b5.ba1848","name":"","topic":"","payload":"[]","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":770,"y":820,"wires":[["ca25d8e2.7b4908","f6d4efbe.32651","6929b06.f7f145","bf9d0b84.52d178"]]},{"id":"a9a66f82.4c6c8","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Tensão)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col2}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":900,"wires":[["e579678f.ffd9e"]]},{"id":"e579678f.ffd9e","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Tensão(V)\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":660,"y":900,"wires":[["ca25d8e2.7b4908"]]},{"id":"fdc83680.0ee26","type":"function","z":"6a7f58b5.ba1848","name":"Dataset","func":"msg = \n\n{\n\"channel\":\n{\n\"id\":\"XXXXXXX\",\"name\":\"temperature sensor\",\n\"description\":\"Temperatura / Prototipo 1 Esp8266 /Sensor /PowerBank / Deepsleep \",\n\"latitude\":\"0.0\",\n\"longitude\":\"0.0\",\n\"field1\":\"Temperatura\",\n\"created_at\":\"2018-09-23T13:26:03Z\",\n\"updated_at\":\"2018-09-29T22:48:56Z\",\n\"last_entry_id\":964\n},\n\n\"feeds\":msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"x":180,"y":900,"wires":[["a9a66f82.4c6c8","bb5298e9.380518","93465c15.842fb","81ccbf54.2f124","89528e9c.09aa4","254ed027.dd4e2","81494c5b.29407"]]},{"id":"4f8e454e.2ea18c","type":"inject","z":"6a7f58b5.ba1848","name":"","topic":"","payload":"","payloadType":"date","repeat":"0.1","crontab":"","once":true,"onceDelay":0.1,"x":130,"y":460,"wires":[["5b3f3f2.27373c"]]},{"id":"106bb805.f4a008","type":"change","z":"6a7f58b5.ba1848","name":"","rules":[{"t":"set","p":"timestamp","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":460,"wires":[[]]},{"id":"5b3f3f2.27373c","type":"change","z":"6a7f58b5.ba1848","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$now()","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":460,"wires":[["106bb805.f4a008"]]},{"id":"861973ce.a7828","type":"debug","z":"6a7f58b5.ba1848","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":630,"y":620,"wires":[]},{"id":"dd74262e.6e5498","type":"function","z":"6a7f58b5.ba1848","name":"","func":"filename = msg.payload;\nmsg.filename=filename;\nreturn msg;","outputs":1,"noerr":0,"x":420,"y":620,"wires":[["88d627eb.2ee89","861973ce.a7828"]]},{"id":"4e2e0657.9d2a98","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Corrente\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":660,"y":980,"wires":[["f6d4efbe.32651"]]},{"id":"f6d4efbe.32651","type":"ui_chart","z":"6a7f58b5.ba1848","name":"","group":"a0d000c5.3838e","order":4,"width":10,"height":8,"label":"Corrente","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":true,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"1000","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":860,"y":980,"wires":[[]]},{"id":"39b8b303.4a549c","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Pressão Ambiente\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":660,"y":1040,"wires":[[]]},{"id":"beca036a.6abae","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Pressão Ambiente\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":660,"y":1100,"wires":[[]]},{"id":"bb5298e9.380518","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Corrente)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col3}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":980,"wires":[["4e2e0657.9d2a98"]]},{"id":"93465c15.842fb","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Pressão Mar)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col4}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":1040,"wires":[["39b8b303.4a549c"]]},{"id":"81ccbf54.2f124","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Pressão Amb.)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col5}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":1100,"wires":[["beca036a.6abae"]]},{"id":"a02fca35.2608e8","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Altitude(m)\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":660,"y":1160,"wires":[[]]},{"id":"f7e0ee48.8c951","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Potência (W)\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":660,"y":1220,"wires":[["6929b06.f7f145"]]},{"id":"6929b06.f7f145","type":"ui_chart","z":"6a7f58b5.ba1848","name":"","group":"a0d000c5.3838e","order":7,"width":10,"height":6,"label":"Potência","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":true,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"1000","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":860,"y":1220,"wires":[[]]},{"id":"7b069915.6e2328","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Torque (N)\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":660,"y":1280,"wires":[["bf9d0b84.52d178"]]},{"id":"bf9d0b84.52d178","type":"ui_chart","z":"6a7f58b5.ba1848","name":"","group":"a0d000c5.3838e","order":5,"width":10,"height":8,"label":"Torque (N)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":true,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"1000","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":870,"y":1280,"wires":[[]]},{"id":"89528e9c.09aa4","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Altitude)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col6}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":1160,"wires":[["a02fca35.2608e8"]]},{"id":"254ed027.dd4e2","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Potência (W))","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col7}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":1220,"wires":[[]]},{"id":"81494c5b.29407","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Torque)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col8}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":1280,"wires":[["7b069915.6e2328"]]},{"id":"8ec2c30a.f9a7e","type":"ui_button","z":"6a7f58b5.ba1848","name":"","group":"a0d000c5.3838e","order":2,"width":4,"height":1,"passthru":false,"label":"Atualizar","tooltip":"","color":"","bgcolor":"green","icon":"cached","payload":"true","payloadType":"bool","topic":"","x":100,"y":520,"wires":[["1516119a.9cee4e"]]},{"id":"bb6ecd58.a937b","type":"link out","z":"6c53f7a3.674208","name":"","links":["b3ee618d.a1281"],"x":220,"y":140,"wires":[]},{"id":"ededeca2.075df","type":"function","z":"6a7f58b5.ba1848","name":"Nome do arquivo","func":"var time_now = msg.payload;\nvar motor = global.get('motor');\nvar helice = global.get('helice');\n\nmsg.topic = motor;\nmsg.filename = \"/home/pi/Documents/Tests/\"+motor+\"_\"+helice+\"_\"+time_now+\".csv\"\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":120,"wires":[["29e3fbbf.390654"]]},{"id":"ef79db84.8b5bb8","type":"delay","z":"6a7f58b5.ba1848","name":"","pauseType":"delay","timeout":"0.5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":400,"y":200,"wires":[["6c39c959.65ab18","67f732c7.0f2f2c"]]},{"id":"34fa5777.fd6858","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"Motor Escolhido","label":"Qual o motor escolhido?","tooltip":"","place":"Escolha a opção","group":"129f038b.7e6834","order":6,"width":14,"height":1,"passthru":true,"multiple":false,"options":[{"label":"A2212/1000KV ","value":"A2212","type":"str"},{"label":"NTM 35-42 Series 1000KV","value":"NTM_3542Series","type":"str"},{"label":"Turnigy D3548/4 1100KV","value":"Turnigy_D3548","type":"str"}],"payload":"","topic":"teste","x":600,"y":460,"wires":[["e4f63b41.60e9b8"]]},{"id":"93c3c5e6.518348","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"Helice Escolhida","label":"Qual a hélice escolhida?","tooltip":"","place":"Escolha a opção","group":"129f038b.7e6834","order":10,"width":14,"height":1,"passthru":true,"multiple":false,"options":[{"label":"1045R","value":"1045R","type":"str"}],"payload":"","topic":"teste","x":580,"y":680,"wires":[["8034bff1.ec3e78"]]},{"id":"b652184c.cfb708","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"ESC Escolhido","label":"Qual o ESC escolhido?","tooltip":"","place":"Escolha a opção","group":"129f038b.7e6834","order":8,"width":14,"height":1,"passthru":true,"multiple":false,"options":[{"label":"ESC-30A 5.5V-12.6V","value":"ESC_30A","type":"str"}],"payload":"","topic":"teste","x":600,"y":560,"wires":[["45691f5e.13252"]]},{"id":"45691f5e.13252","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"esc","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":560,"wires":[["3464398f.8a29e6"]]},{"id":"3464398f.8a29e6","type":"function","z":"6dc3f0bb.36c81","name":"Retorna ESC","func":"var esc = global.get('esc');\nmsg.payload = \"O ESC do teste é\" + \" \" + esc;\nglobal.set('esc', esc);\nreturn msg;","outputs":1,"noerr":0,"x":1090,"y":560,"wires":[["2bf4618f.e75c36"]]},{"id":"85364c34.231ae","type":"ui_button","z":"6dc3f0bb.36c81","name":"ESC","group":"129f038b.7e6834","order":7,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#A6BBCF","icon":"view_list","payload":"","payloadType":"str","topic":"","x":90,"y":1340,"wires":[[]]},{"id":"6aab9f59.0ebdb","type":"ui_text","z":"6dc3f0bb.36c81","group":"129f038b.7e6834","order":13,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"col-center","x":1110,"y":840,"wires":[]},{"id":"e77292da.27cd3","type":"function","z":"6dc3f0bb.36c81","name":"Confirmação do Teste","func":"msg.payload = \"Teste confirmado. Vá para a aba 'Verificação'\";\nreturn msg;","outputs":1,"noerr":0,"x":880,"y":840,"wires":[["6aab9f59.0ebdb"]]},{"id":"593ebe8a.3a85b","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["470b1f16.5f922","ae4f3104.6cf81"],"x":955,"y":940,"wires":[["6aab9f59.0ebdb"]]},{"id":"ae4f3104.6cf81","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["593ebe8a.3a85b"],"x":195,"y":260,"wires":[]},{"id":"5d1076d8.911928","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":21,"width":10,"height":1,"passthru":false,"label":"Sensor de Rotação","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":420,"y":1480,"wires":[[]]},{"id":"5b661ec3.199be","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":13,"width":10,"height":1,"passthru":false,"label":"Sensor de Temperatura 2","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":140,"y":1360,"wires":[[]]},{"id":"519768a1.5b9078","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":9,"width":10,"height":1,"passthru":false,"label":"Sensor de Corrente do Motor","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":150,"y":1420,"wires":[[]]},{"id":"d158af6a.c3c5b","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":15,"width":10,"height":1,"passthru":false,"label":"Sensor de Corrente do uControlador","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":170,"y":1480,"wires":[[]]},{"id":"d2f58c06.73302","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":5,"width":10,"height":1,"passthru":false,"label":"Sensor de Tensão (Bateria Motor)","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":450,"y":1300,"wires":[[]]},{"id":"1594a8fc.2deb37","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":17,"width":10,"height":1,"passthru":false,"label":"Sensor de Tensão (Bateria uControlador)","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":470,"y":1360,"wires":[[]]},{"id":"a0774c4a.8676e","type":"switch","z":"e45fea15.9c4e3","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Not OK","vt":"str"},{"t":"eq","v":"OK","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":830,"y":620,"wires":[["fe7ea4f0.d64498","62739416.5a99dc","972a83af.ecc77"],["fe7ea4f0.d64498","972a83af.ecc77"]]},{"id":"1366383a.d72f88","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc"],"x":915,"y":480,"wires":[["9cc68445.452db"]]},{"id":"5b16961d.8a3d38","type":"function","z":"e45fea15.9c4e3","name":"","func":"i = msg.payload;\nsensores_falhados = i;\nglobal.set('sensores_falhados', sensores_falhados);\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":120,"wires":[[]]},{"id":"14e813fb.94157c","type":"link out","z":"e45fea15.9c4e3","name":"","links":["beb459b8.707ae8"],"x":1195,"y":220,"wires":[]},{"id":"beb459b8.707ae8","type":"link in","z":"e45fea15.9c4e3","name":"","links":["14e813fb.94157c","c5768c67.fb005","c6c8b85b.a5c8d8"],"x":1235,"y":120,"wires":[["5b16961d.8a3d38"]]},{"id":"c5768c67.fb005","type":"link out","z":"e45fea15.9c4e3","name":"","links":["beb459b8.707ae8"],"x":1195,"y":380,"wires":[]},{"id":"9aa3907a.e1313","type":"change","z":"e45fea15.9c4e3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":380,"wires":[["c5768c67.fb005"]]},{"id":"890d1121.19238","type":"change","z":"e45fea15.9c4e3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":220,"wires":[["14e813fb.94157c"]]},{"id":"62739416.5a99dc","type":"change","z":"e45fea15.9c4e3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":560,"wires":[["c6c8b85b.a5c8d8"]]},{"id":"c6c8b85b.a5c8d8","type":"link out","z":"e45fea15.9c4e3","name":"","links":["beb459b8.707ae8"],"x":1195,"y":560,"wires":[]},{"id":"972a83af.ecc77","type":"function","z":"e45fea15.9c4e3","name":"","func":"sensores_falhados = global.get('sensores_falhados');\nif(sensores_falhados === 1){\n    msg.payload = \"Tem sensor falhado aí! Verifique antes de iniciar o teste\"\n}\nelse{\n    msg.payload = \"Todos os sensores estão OK! Pode prosseguir para a calibração individual\"\n}\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":800,"wires":[["34d9f1e9.fbfcbe"]]},{"id":"34d9f1e9.fbfcbe","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":26,"width":24,"height":1,"name":"TEXTO CHECANDO","label":"","format":"{{msg.payload}}","layout":"col-center","x":560,"y":800,"wires":[]},{"id":"e0c40117.9f117","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc"],"x":415,"y":880,"wires":[["34d9f1e9.fbfcbe"]]},{"id":"dc1e7026.01916","type":"function","z":"6a7f58b5.ba1848","name":"Writing parameters to CSV file","func":"var motor = global.get('motor');\nvar helice = global.get('helice');\nvar esc = global.get('esc');\nvar tipo_teste = global.get('tipo_teste');\nvar metodo_teste = global.get('metodo_teste');\n\nvar data = motor+\",\"+helice+\",\"+esc+\",\"+tipo_teste+\",\"+metodo_teste\n\nmsg.payload = data;\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":60,"wires":[["a8a338a4.61b098"]]},{"id":"a8a338a4.61b098","type":"file","z":"6a7f58b5.ba1848","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"false","encoding":"none","x":690,"y":60,"wires":[[]]},{"id":"d51bc178.29e5c","type":"function","z":"6a7f58b5.ba1848","name":"Nome do arquivo","func":"var time_now = msg.payload;\nvar motor = global.get('motor');\nvar helice = global.get('helice');\n\nmsg.topic = motor;\nmsg.filename = \"/home/pi/Documents/Parâmetros_de_Testes/\"+motor+\"_\"+helice+\"_\"+time_now+\".csv\"\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":60,"wires":[["dc1e7026.01916"]]},{"id":"6d56bdda.085844","type":"fs-file-lister","z":"6dc3f0bb.36c81","name":"","start":"/home/pi/Documents/Parâmetros_de_Testes","pattern":"*.csv*","folders":"*","hidden":true,"lstype":"files","path":true,"single":true,"depth":0,"stat":false,"showWarnings":true,"x":500,"y":1080,"wires":[["10f70350.9b32ed"]]},{"id":"10f70350.9b32ed","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1080,"wires":[["910833d9.c25f"]]},{"id":"910833d9.c25f","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"","label":"","tooltip":"","place":"Escolha o teste que deseja carregar","group":"4ef5f78.ffccc08","order":1,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":900,"y":1080,"wires":[["e57b642f.656a98"]]},{"id":"89454211.eb1f7","type":"file in","z":"6dc3f0bb.36c81","name":"Read File","filename":"","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":480,"y":1160,"wires":[["a5abe77c.278978"]]},{"id":"a5abe77c.278978","type":"csv","z":"6dc3f0bb.36c81","name":"","sep":",","hdrin":false,"hdrout":false,"multi":"mult","ret":"\\r\\n","temp":"","skip":"0","strings":false,"x":690,"y":1160,"wires":[["32ac05ff.398eba"]]},{"id":"e57b642f.656a98","type":"function","z":"6dc3f0bb.36c81","name":"","func":"filename = msg.payload;\nmsg.filename=filename;\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":1160,"wires":[["89454211.eb1f7"]]},{"id":"32ac05ff.398eba","type":"function","z":"6dc3f0bb.36c81","name":"Puxando informações","func":"var motor = msg.payload[0].col1;;\nvar helice = msg.payload[0].col2;\nvar esc = msg.payload[0].col3;\nvar tipo_teste = msg.payload[0].col4;\nvar metodo_teste = msg.payload[0].col5;\n\nmsg1 = {payload: tipo_teste}\nmsg2 = {payload: metodo_teste}\nmsg3 = {payload: motor}\nmsg4 = {payload: esc}\nmsg5 = {payload: helice}\n\nreturn [msg1, msg2, msg3, msg4, msg5];","outputs":5,"noerr":0,"x":900,"y":1160,"wires":[["9dd7edf3.ad83c"],["322cb675.15c2ea"],["36eadd32.ecb7a2"],["153d5e24.e130b2"],["73a2a0a1.76c21"]]},{"id":"9dd7edf3.ad83c","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["2c83e895.0bc698"],"x":1195,"y":1080,"wires":[]},{"id":"322cb675.15c2ea","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["45ee134.13475ec"],"x":1195,"y":1120,"wires":[]},{"id":"36eadd32.ecb7a2","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["83c95f83.78eed"],"x":1195,"y":1160,"wires":[]},{"id":"153d5e24.e130b2","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["82e7e681.242fb8"],"x":1195,"y":1200,"wires":[]},{"id":"73a2a0a1.76c21","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["e688b908.4c4278"],"x":1195,"y":1240,"wires":[]},{"id":"2c83e895.0bc698","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["9dd7edf3.ad83c"],"x":515,"y":180,"wires":[["26cf270b.2056b8"]]},{"id":"45ee134.13475ec","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["322cb675.15c2ea"],"x":475,"y":360,"wires":[["c4332066.6b31c8"]]},{"id":"83c95f83.78eed","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["36eadd32.ecb7a2"],"x":475,"y":400,"wires":[["34fa5777.fd6858"]]},{"id":"82e7e681.242fb8","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["153d5e24.e130b2"],"x":475,"y":500,"wires":[["b652184c.cfb708"]]},{"id":"e688b908.4c4278","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["73a2a0a1.76c21"],"x":495,"y":620,"wires":[["93c3c5e6.518348"]]},{"id":"7214983a.dab0c8","type":"inject","z":"6dc3f0bb.36c81","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":330,"y":1080,"wires":[["6d56bdda.085844"]]},{"id":"6b73f0e2.e01a5","type":"inject","z":"6a7f58b5.ba1848","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":90,"y":580,"wires":[["1516119a.9cee4e"]]},{"id":"136e4ac8.22d585","type":"ui_button","z":"6dc3f0bb.36c81","name":"","group":"4ef5f78.ffccc08","order":2,"width":2,"height":1,"passthru":false,"label":"Atualizar","tooltip":"","color":"","bgcolor":"green","icon":"cached","payload":"true","payloadType":"bool","topic":"","x":320,"y":1020,"wires":[["6d56bdda.085844"]]},{"id":"205eb60c.51af0a","type":"function","z":"e377c8c5.5d2a2","name":"Verificando o tipo de teste","func":"var tipo_teste = global.get('tipo_teste');\n\nmsg.payload = tipo_teste;\n\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":300,"wires":[["2e99ce9b.aac722"]]},{"id":"2e99ce9b.aac722","type":"switch","z":"e377c8c5.5d2a2","name":"Split","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Teste Estático","vt":"str"},{"t":"eq","v":"Teste Dinâmico","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":300,"wires":[["de31b110.b576e"],["deafdc93.dfc1"]]},{"id":"9b12a2.8fa07d6","type":"link in","z":"e377c8c5.5d2a2","name":"","links":["ed4e06e6.f27ec8"],"x":115,"y":300,"wires":[["205eb60c.51af0a"]]},{"id":"de31b110.b576e","type":"change","z":"e377c8c5.5d2a2","name":"Mudar para Teste Estático","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Calibração Dinâmica_Precisa\"],\"show\":[\"Calibração Dinâmica_Não\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":220,"wires":[["5d0bc4bb.ce46bc"]]},{"id":"deafdc93.dfc1","type":"change","z":"e377c8c5.5d2a2","name":"Mudar para Teste Dinâmico","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Calibração Dinâmica_Precisa\"],\"show\":[\"Calibração Dinâmica_Não\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":340,"wires":[["5d0bc4bb.ce46bc"]]},{"id":"5d0bc4bb.ce46bc","type":"ui_ui_control","z":"e377c8c5.5d2a2","name":"","events":"all","x":1220,"y":300,"wires":[[]]},{"id":"7cc7548d.f069ec","type":"function","z":"e377c8c5.5d2a2","name":"","func":"msg.payload = \"Você escolheu teste estático, não há a necessidade de calibrar o Pitot :D\"\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":420,"wires":[["5d0bc4bb.ce46bc","cb9b695b.5fc548"]]},{"id":"cb9b695b.5fc548","type":"ui_text","z":"e377c8c5.5d2a2","group":"747cd00b.7f633","order":0,"width":0,"height":0,"name":"Não há necessidade.","label":"","format":"{{msg.payload}}","layout":"col-center","x":1310,"y":420,"wires":[]},{"id":"784e59e3.ce9998","type":"function","z":"e377c8c5.5d2a2","name":"","func":"msg.payload = \"Você escolheu teste dinâmico, vamos calibrar esse caraio\"\nreturn msg;","outputs":1,"noerr":0,"x":1070,"y":140,"wires":[["1594a9d1.bbeed6","5d0bc4bb.ce46bc"]]},{"id":"1594a9d1.bbeed6","type":"ui_text","z":"e377c8c5.5d2a2","group":"f8672a17.da19f8","order":0,"width":0,"height":0,"name":"Há necessidade.","label":"","format":"{{msg.payload}}","layout":"col-center","x":1310,"y":140,"wires":[]},{"id":"80debbee.1d2828","type":"debug","z":"6a7f58b5.ba1848","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":630,"y":280,"wires":[]},{"id":"6c39c959.65ab18","type":"debug","z":"6a7f58b5.ba1848","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":610,"y":340,"wires":[]}]
