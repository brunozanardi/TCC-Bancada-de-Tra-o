[{"id":"6dc3f0bb.36c81","type":"tab","label":"Parâmetros do Teste","disabled":false,"info":""},{"id":"e45fea15.9c4e3","type":"tab","label":"Verificação ","disabled":false,"info":""},{"id":"760dfb14.3731dc","type":"tab","label":"Display","disabled":false,"info":""},{"id":"6c53f7a3.674208","type":"tab","label":"Fluxos de Teste","disabled":false,"info":""},{"id":"6a7f58b5.ba1848","type":"tab","label":"Manipulação DB","disabled":false,"info":""},{"id":"e73b8405.466b88","type":"subflow","name":"Modo Degrau","info":"","category":"","in":[{"x":40,"y":220,"wires":[{"id":"6f9b8fe9.f1d978"}]}],"out":[],"env":[],"color":"#DDAA99"},{"id":"6e7f666f.e705a8","type":"subflow","name":"Modo Turbo","info":"","category":"","in":[{"x":20,"y":120,"wires":[{"id":"ea082484.6e2108"}]}],"out":[],"env":[],"color":"#DDAA99"},{"id":"a10284.9be9d58","type":"subflow","name":"Calibração ESC 30 A","info":"","category":"","in":[{"x":40,"y":140,"wires":[{"id":"92f450f7.e0efd"}]}],"out":[{"x":1960,"y":140,"wires":[{"id":"d7f0ac0c.cfd15","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"fe36eb2d.6b9e68","type":"subflow","name":"Modo Pico","info":"","category":"","in":[{"x":40,"y":400,"wires":[{"id":"e507602f.1cb618"}]}],"out":[],"env":[],"color":"#DDAA99"},{"id":"33a2d9a1.58df5e","type":"subflow","name":"Calibração ESC 80A","info":"","category":"","in":[{"x":20,"y":140,"wires":[{"id":"a1b35eff.f48548"}]}],"out":[{"x":1870,"y":140,"wires":[{"id":"9bde65b9.c8b3e","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"6c2b044a.6deeb4","type":"subflow","name":"Verificação Sensor BMP180","info":"","category":"","in":[{"x":80,"y":240,"wires":[{"id":"2633da85.cb8586"}]}],"out":[{"x":940,"y":180,"wires":[{"id":"b6fc7e9f.0cde6","port":0}]},{"x":940,"y":300,"wires":[{"id":"b6fc7e9f.0cde6","port":1}]}],"env":[],"color":"#DDAA99"},{"id":"c9ae39d3.fb822","type":"subflow","name":"Verificação Tensão Bateria Motor","info":"","category":"","in":[{"x":140,"y":240,"wires":[{"id":"9986b3b1.c55198"}]}],"out":[{"x":640,"y":180,"wires":[{"id":"ee4addca.6425c","port":0}]},{"x":640,"y":300,"wires":[{"id":"ee4addca.6425c","port":1}]}],"env":[],"color":"#DDAA99"},{"id":"a7d57ee5.4eda68","type":"subflow","name":"Verificação Célula de Carga","info":"","category":"","in":[{"x":200,"y":240,"wires":[{"id":"8c2f9b06.96768"}]}],"out":[{"x":740,"y":180,"wires":[{"id":"a0774c4a.8676e","port":0}]},{"x":740,"y":300,"wires":[{"id":"a0774c4a.8676e","port":1}]}],"env":[],"color":"#DDAA99"},{"id":"20533a99.a46f76","type":"subflow","name":"Verificação Sensor de Rotação","info":"","category":"","in":[{"x":320,"y":140,"wires":[{"id":"c8dc3aa9.4438e8"}]}],"out":[{"x":800,"y":80,"wires":[{"id":"f0c363b2.1bf8a8","port":0}]},{"x":800,"y":240,"wires":[{"id":"f0c363b2.1bf8a8","port":1}]}],"env":[],"color":"#DDAA99"},{"id":"b7bbb9ce.008c28","type":"subflow","name":"Verificação Sensor de Velocidade AR","info":"","category":"","in":[{"x":220,"y":140,"wires":[{"id":"b4cfe97f.f3aaa8"}]}],"out":[{"x":760,"y":100,"wires":[{"id":"8e344953.383d48","port":0}]},{"x":760,"y":180,"wires":[{"id":"8e344953.383d48","port":1}]}],"env":[],"color":"#DDAA99"},{"id":"17941c70.3cd594","type":"subflow","name":"Verificação Sensor de Temperatura Bateria","info":"","category":"","in":[{"x":340,"y":200,"wires":[{"id":"f14f9414.5683c8"}]}],"out":[{"x":840,"y":140,"wires":[{"id":"d88ea100.80b228","port":0}]},{"x":840,"y":260,"wires":[{"id":"d88ea100.80b228","port":1}]}],"env":[],"color":"#DDAA99"},{"id":"28ca1b7d.b04354","type":"subflow","name":"Verificação do Sensor de Corrente Motor","info":"","category":"","in":[{"x":200,"y":200,"wires":[{"id":"6905a74d.034bf"}]}],"out":[{"x":700,"y":100,"wires":[{"id":"dfe44b8c.73d87","port":0}]},{"x":700,"y":300,"wires":[{"id":"dfe44b8c.73d87","port":1}]}],"env":[],"color":"#DDAA99"},{"id":"16560827.4150e8","type":"subflow","name":"Verificação Bateria uControlador","info":"","category":"","in":[{"x":180,"y":140,"wires":[{"id":"5e830348.30d7ec"}]}],"out":[{"x":640,"y":60,"wires":[{"id":"c5f4b8e3.2c48e","port":0}]},{"x":640,"y":220,"wires":[{"id":"c5f4b8e3.2c48e","port":1}]}],"env":[],"color":"#DDAA99"},{"id":"6b193936.2f1078","type":"subflow","name":"Verificação Sensor de Correte uC","info":"","category":"","in":[{"x":200,"y":140,"wires":[{"id":"a05b0e8e.d03c88"}]}],"out":[{"x":680,"y":60,"wires":[{"id":"7540833f.477b5c","port":0}]},{"x":680,"y":220,"wires":[{"id":"7540833f.477b5c","port":1}]}],"env":[],"color":"#DDAA99"},{"id":"16936092.ae94e7","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#808080","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#ffff00","baseFont":"Arial,Arial,Helvetica,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Dashboard Aero","default":"#4B7930","baseColor":"#000000","baseFont":"Courier,monospace","reset":false},"themeState":{"base-color":{"default":"#0094CE","value":"#808080","edited":true},"page-titlebar-backgroundColor":{"value":"#808080","edited":true},"page-backgroundColor":{"value":"#fafafa","edited":true},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#a6a6a6","edited":false},"group-borderColor":{"value":"#ffffff","edited":true},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":true},"widget-backgroundColor":{"value":"#808080","edited":true},"widget-borderColor":{"value":"#ffffff","edited":true},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Bancada de Teste de Tração da Equipe Aerodesign UTFPR Curitiba","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"cc946df4.d29788","type":"ui_tab","z":"","name":"Home","icon":"home","order":1,"disabled":false,"hidden":false},{"id":"ee2a061a.d7f98","type":"ui_spacer","name":"spacer","group":"","order":6,"width":6,"height":1},{"id":"88b41238.12aff8","type":"ui_spacer","name":"spacer","group":"","order":7,"width":6,"height":1},{"id":"a460ae06.4beef8","type":"ui_spacer","name":"spacer","group":"","order":8,"width":6,"height":1},{"id":"bc48626b.e41","type":"ui_spacer","name":"spacer","group":"","order":9,"width":6,"height":1},{"id":"129f038b.7e6834","type":"ui_group","z":"","name":"Teste de Tração de Motores Brushless","tab":"cc946df4.d29788","order":1,"disp":true,"width":"16","collapse":false},{"id":"79421ef8.99aa18","type":"ui_spacer","name":"spacer","group":"8db365f.dcde498","order":4,"width":2,"height":1},{"id":"afc641ec.416278","type":"ui_spacer","name":"spacer","group":"8db365f.dcde498","order":6,"width":2,"height":1},{"id":"bb0242aa.7877f8","type":"ui_tab","z":"","name":"Verificação","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"1e52356.f784f4b","type":"ui_group","z":"","name":"Checagem dos sensores","tab":"bb0242aa.7877f8","order":1,"disp":true,"width":24,"collapse":false},{"id":"efeab544.29a578","type":"ui_group","z":"","name":"Calibração da Célula de Carga","tab":"","order":1,"disp":true,"width":11,"collapse":false},{"id":"f8672a17.da19f8","type":"ui_group","z":"","name":"Precisa","tab":"","order":1,"disp":true,"width":12,"collapse":false},{"id":"4db3a94.99aa1d8","type":"ui_tab","z":"","name":"Display","icon":"trending_up","order":5,"disabled":false,"hidden":false},{"id":"1285dd49.e3515b","type":"ui_group","z":"","name":"Parâmetros do Teste","tab":"4db3a94.99aa1d8","order":1,"disp":false,"width":"13","collapse":false},{"id":"eb0f497e.b5b388","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"7e318539.2000bc","type":"ui_group","z":"","name":"Menu","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"4fd9ba16.57eaa4","type":"ui_group","z":"","name":"Group 2","tab":"","order":3,"disp":true,"width":"6","collapse":false},{"id":"b7188333.18b0a","type":"ui_group","z":"","name":"Group 1","tab":"","order":2,"disp":true,"width":"6","collapse":false},{"id":"70d1fe30.a3b2f8","type":"ui_group","z":"","name":"Group 3","tab":"","order":4,"disp":true,"width":"6","collapse":false},{"id":"3e26bae5.c7f52e","type":"ui_group","z":"","name":"Rotina","tab":"4db3a94.99aa1d8","order":2,"disp":false,"width":17,"collapse":false},{"id":"b4eec92e.11ffd","type":"ui_group","z":"","name":"Loop","tab":"4db3a94.99aa1d8","order":3,"disp":false,"width":17,"collapse":false},{"id":"8164f52c.e4d86","type":"ui_group","z":"","name":"Data","tab":"4db3a94.99aa1d8","order":4,"disp":false,"width":17,"collapse":false},{"id":"638d889c.647d","type":"ui_group","z":"","name":"Rotinaescolha","tab":"4db3a94.99aa1d8","order":5,"disp":false,"width":17,"collapse":false},{"id":"38621fb2.7abc7","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"1dbc443.906a43c","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"f0dad106.0e302","type":"ui_group","z":"","name":"Loopescolha","tab":"4db3a94.99aa1d8","order":6,"disp":false,"width":17,"collapse":false},{"id":"cf5ef35d.d04a78","type":"ui_group","z":"","name":"IniciarTeste","tab":"4db3a94.99aa1d8","order":7,"disp":false,"width":30,"collapse":false},{"id":"148a003d.e3167","type":"MySQLdatabase","z":"","name":"","host":"127.0.0.1","port":"3306","db":"node-red-temp","tz":""},{"id":"f7f2fa05.2620c","type":"MySQLdatabase","z":"","name":"","host":"127.0.0.1","port":"3308","db":"cadastro","tz":""},{"id":"20b7d0bd.c079","type":"ui_group","z":"","name":"PWM","tab":"","order":1,"disp":true,"width":12,"collapse":false},{"id":"a0d000c5.3838e","type":"ui_group","z":"","name":"Dashboard de Resultados","tab":"fd79a8be.c7dc48","order":1,"disp":true,"width":30,"collapse":false},{"id":"fd79a8be.c7dc48","type":"ui_tab","z":"","name":"Visualizar resultado","icon":"dashboard","disabled":false,"hidden":false},{"id":"1f913ed.6b33ec1","type":"ui_group","z":"","name":"Name list","tab":"","order":1,"disp":true,"width":"15","collapse":false},{"id":"7fac1cc6.19da94","type":"ui_group","z":"","name":"Name list","tab":"","order":1,"disp":true,"width":"15","collapse":false},{"id":"40811757.5f2538","type":"ui_group","z":"","name":"Filters","tab":"","order":2,"disp":true,"width":"24","collapse":false},{"id":"93d6a2b.1f6836","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"12","collapse":false},{"id":"d2d59195.597c9","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"12","collapse":false},{"id":"7abfb95b.1123e8","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"12","collapse":false},{"id":"c38e153e.6ad5c8","type":"ui_group","z":"","name":"Calibração RPM","tab":"","order":2,"disp":true,"width":8,"collapse":false},{"id":"4ef5f78.ffccc08","type":"ui_group","z":"","name":"Carregar teste","tab":"cc946df4.d29788","order":2,"disp":true,"width":8,"collapse":false},{"id":"747cd00b.7f633","type":"ui_group","z":"","name":"Não","tab":"","order":2,"disp":true,"width":12,"collapse":false},{"id":"3ee4f678.a4e67a","type":"serial-port","z":"","serialport":"/dev/ttyACM0","serialbaud":"57600","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"954a129.77f23f","type":"serial-port","z":"","serialport":"/dev/ttyACM0","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"acbec2cf.ff5b5","type":"serial-port","z":"","serialport":"/dev/ttyACM1","serialbaud":"57600","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"985e9ca8.ce839","type":"ui_spacer","name":"spacer","group":"efeab544.29a578","order":1,"width":11,"height":1},{"id":"936c768.4e31a88","type":"ui_spacer","name":"spacer","group":"efeab544.29a578","order":2,"width":11,"height":1},{"id":"aca40f48.4a4f","type":"ui_group","z":"","name":"Banco de Dados","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"aca7b6e8.183af8","type":"ui_group","z":"","name":"Sistema_ON","tab":"4db3a94.99aa1d8","order":8,"disp":true,"width":"4","collapse":false},{"id":"b839b32a.9c8578","type":"ui_group","z":"","name":"Sistema_Off","tab":"4db3a94.99aa1d8","order":9,"disp":true,"width":"4","collapse":false},{"id":"8f2021d6.f9b56","type":"ui_group","z":"","name":"Slider","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"e86f0e0.71df67","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":2,"width":30,"height":1},{"id":"ec4f5000.54bc7","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":5,"width":30,"height":1},{"id":"6d68aced.d65f5c","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":17,"width":1,"height":1},{"id":"83627d09.2b3e8","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":20,"width":1,"height":1},{"id":"cd91973f.f71eb","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":23,"width":1,"height":1},{"id":"bd595d28.3343f","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":25,"width":5,"height":1},{"id":"50aeff45.ba491","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":26,"width":1,"height":1},{"id":"21895388.b45424","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":27,"width":10,"height":1},{"id":"6c3daade.71f0d4","type":"ui_spacer","name":"spacer","group":"cf5ef35d.d04a78","order":29,"width":1,"height":1},{"id":"a492a1ed.84e8a","type":"ui_spacer","name":"spacer","group":"1e52356.f784f4b","order":1,"width":6,"height":1},{"id":"f9dac5b4.1956c","type":"ui_spacer","name":"spacer","group":"1e52356.f784f4b","order":4,"width":6,"height":1},{"id":"828451f0.d0017","type":"ui_spacer","name":"spacer","group":"1e52356.f784f4b","order":23,"width":12,"height":1},{"id":"34f07639.b4f2ea","type":"serial-port","z":"","serialport":"/dev/ttyS0","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"99866445.acf5c","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":3,"width":4,"height":1},{"id":"4320ec86.ff2734","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":7,"width":4,"height":1},{"id":"840b6e2.1c77e9","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":8,"width":4,"height":1},{"id":"7185aa00.aae654","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":9,"width":4,"height":1},{"id":"ee636229.ed65c8","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":10,"width":4,"height":1},{"id":"7b4897c2.a6f448","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":11,"width":4,"height":1},{"id":"7f8d22f6.705434","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":12,"width":4,"height":1},{"id":"22c2b8e7.25741","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":13,"width":4,"height":1},{"id":"2c64558b.03746a","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":17,"width":4,"height":1},{"id":"77f2d24c.44d75c","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":18,"width":4,"height":1},{"id":"765e29a6.3d2288","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":19,"width":4,"height":1},{"id":"c6fc9822.b17e4","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":20,"width":4,"height":1},{"id":"da559279.3fc158","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":21,"width":4,"height":1},{"id":"41ac1259.cf6c24","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":22,"width":4,"height":1},{"id":"a2374f4b.f256e","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":24,"width":9,"height":1},{"id":"ebd0ce31.dc7558","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":26,"width":5,"height":1},{"id":"ba73f1dc.e67e48","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":27,"width":9,"height":1},{"id":"37237bb2.a90294","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":28,"width":5,"height":1},{"id":"6e65e9e5.542f4","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":29,"width":9,"height":1},{"id":"106c9bda.2f69ac","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":30,"width":5,"height":1},{"id":"b0c816d1.0d92d","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":31,"width":9,"height":1},{"id":"96d9ddb1.58e1e","type":"ui_spacer","name":"spacer","group":"a0d000c5.3838e","order":32,"width":5,"height":1},{"id":"9b609337.f7ff7","type":"ui_tab","z":"","name":"Teste de Controle","icon":"dashboard","order":5,"disabled":false,"hidden":false},{"id":"cef28bb5.be21d","type":"ui_group","z":"","name":"teste de controle 1","tab":"9b609337.f7ff7","order":1,"disp":true,"width":13,"collapse":false},{"id":"26cf270b.2056b8","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"Estático/Dinâmico","label":"Tipo de Teste","tooltip":"","place":"Escolha a opção","group":"129f038b.7e6834","order":2,"width":14,"height":1,"passthru":true,"multiple":false,"options":[{"label":"","value":"Teste Estático","type":"str"},{"label":"","value":"Teste Dinâmico","type":"str"}],"payload":"","topic":"teste","x":610,"y":240,"wires":[["ff305678.fa3538"]]},{"id":"c4332066.6b31c8","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"Rotina/OpenLoop","label":"Formato do Teste","tooltip":"","place":"Escolha a opção","group":"129f038b.7e6834","order":4,"width":14,"height":1,"passthru":true,"multiple":false,"options":[{"label":"Rotina","value":"Rotina","type":"str"},{"label":"Open Loop","value":"Open Loop","type":"str"}],"payload":"","topic":"teste","x":600,"y":300,"wires":[["776f3272.44bc9c"]]},{"id":"d0fa7354.6ddf48","type":"inject","z":"6dc3f0bb.36c81","name":"Insere zero","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":210,"y":360,"wires":[["26cf270b.2056b8","c4332066.6b31c8","34fa5777.fd6858","93c3c5e6.518348","b652184c.cfb708","ae4f3104.6cf81","a5441556.68ce28","18943f0b.a0e561","d7735eb6.78995"]]},{"id":"e4f63b41.60e9b8","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"motor","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":460,"wires":[["38f22727.bedcb8"]]},{"id":"8034bff1.ec3e78","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"helice","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":680,"wires":[["458d821b.e5b2a4"]]},{"id":"ff305678.fa3538","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"tipo_teste","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":240,"wires":[["150c16eb.145b39"]]},{"id":"776f3272.44bc9c","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"metodo_teste","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":300,"wires":[["d6046b56.b69b7"]]},{"id":"43d68bf6.171604","type":"ui_button","z":"6dc3f0bb.36c81","name":"","group":"129f038b.7e6834","order":15,"width":4,"height":1,"passthru":false,"label":"Limpar","tooltip":"","color":"","bgcolor":"red","icon":"touch_app","payload":"0","payloadType":"num","topic":"","x":170,"y":440,"wires":[["26cf270b.2056b8","c4332066.6b31c8","470b1f16.5f922","34fa5777.fd6858","93c3c5e6.518348","b652184c.cfb708","a5441556.68ce28","d7735eb6.78995"]]},{"id":"150c16eb.145b39","type":"function","z":"6dc3f0bb.36c81","name":"Retorna Teste","func":"var tipo_teste = global.get('tipo_teste');\nmsg.payload = \"O tipo de teste escolhido foi\"+ \" \" + tipo_teste;\nglobal.set('tipo_teste', tipo_teste);\nreturn msg;","outputs":1,"noerr":0,"x":1110,"y":240,"wires":[["2bf4618f.e75c36"]]},{"id":"d6046b56.b69b7","type":"function","z":"6dc3f0bb.36c81","name":"Retorna método","func":"var metodo_teste = global.get('metodo_teste');\nmsg.payload = \"O método escolhido foi\" + \" \" + metodo_teste;\nglobal.set('metodo_teste', metodo_teste);\nreturn msg;","outputs":1,"noerr":0,"x":1120,"y":300,"wires":[["2bf4618f.e75c36"]]},{"id":"38f22727.bedcb8","type":"function","z":"6dc3f0bb.36c81","name":"Retorna motor","func":"var motor = global.get('motor');\nmsg.payload = \"O motor do teste é\" + \" \" + motor;\nglobal.set('motor', motor);\nreturn msg;","outputs":1,"noerr":0,"x":1110,"y":460,"wires":[["2bf4618f.e75c36"]]},{"id":"458d821b.e5b2a4","type":"function","z":"6dc3f0bb.36c81","name":"Retorna hélice","func":"var bateria = global.get('bateria');\nmsg.payload = \"A bateria do teste é\" + \" \" + bateria;\nglobal.set('bateria', bateria);\nreturn msg;","outputs":1,"noerr":0,"x":1110,"y":680,"wires":[["2bf4618f.e75c36"]]},{"id":"8023dc2d.3400f","type":"ui_button","z":"6dc3f0bb.36c81","name":"","group":"129f038b.7e6834","order":16,"width":12,"height":1,"passthru":true,"label":"Confirmar","tooltip":"","color":"","bgcolor":"green","icon":"thumb_up","payload":"concatenar","payloadType":"global","topic":"","x":380,"y":1100,"wires":[["ed4e06e6.f27ec8","e77292da.27cd3"]]},{"id":"2bf4618f.e75c36","type":"function","z":"6dc3f0bb.36c81","name":"Concatenar informações","func":"var tipo_teste = global.get('tipo_teste');\nvar metodo_teste = global.get('metodo_teste');\nvar motor = global.get('motor');\nvar helice = global.get('helice');\nvar esc = global.get('esc');\nvar bateria = global.get('bateria')\nvar configuracao = global.get('configuracao')\n\nvar teste = tipo_teste + metodo_teste + helice + motor + esc + bateria+configuracao;\nconcatenar = [tipo_teste,metodo_teste,motor,helice,esc,bateria,configuracao];\nglobal.set('concatenar', concatenar);\nglobal.set('teste', teste)\nreturn msg;","outputs":1,"noerr":0,"x":1410,"y":520,"wires":[[]]},{"id":"c3102e26.9a3fb","type":"ui_button","z":"6dc3f0bb.36c81","name":"Motor","group":"129f038b.7e6834","order":5,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#87A980","icon":"flight","payload":"","payloadType":"str","topic":"","x":1910,"y":1360,"wires":[[]]},{"id":"5020bf25.4efb88","type":"ui_button","z":"6dc3f0bb.36c81","name":"Hélice","group":"129f038b.7e6834","order":9,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#FFCC66","icon":"toys","payload":"","payloadType":"str","topic":"","x":1910,"y":1480,"wires":[[]]},{"id":"da19ad70.4b316","type":"ui_button","z":"6dc3f0bb.36c81","name":"Metodo","group":"129f038b.7e6834","order":3,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#DAC4B4","icon":"view_list","payload":"","payloadType":"str","topic":"","x":1920,"y":1440,"wires":[[]]},{"id":"470b1f16.5f922","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["593ebe8a.3a85b","6d9d50d5.60cc3","700b0d29.607dc4","f5e6a4d2.0a6bc","899f3620.bca1a8","9d9732a1.490e6","27b9c4b1.3b944c","a5df2b86.50e32","623ae9d8.09b81","3451674b.a6bba8","e3ea500.91eebb","aed06b51.8d54e","7d4253e8.93635c","970c3714.416b38"],"x":180,"y":540,"wires":[]},{"id":"36e7568e.51257a","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":13,"width":10,"height":1,"passthru":false,"label":"Sensor de Temperatura SP","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":2380,"y":200,"wires":[[]]},{"id":"6b1ed06c.14a04","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":7,"width":10,"height":1,"passthru":false,"label":"Sensor de Pressão BMP180","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":2680,"y":260,"wires":[[]]},{"id":"fd84e8f5.53e74","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":15,"width":10,"height":1,"passthru":false,"label":"Célula de Carga","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":2640,"y":380,"wires":[[]]},{"id":"5e9c363a.485ca8","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":19,"width":10,"height":1,"passthru":false,"label":"Sensor de Velocidade do ar","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":2380,"y":380,"wires":[[]]},{"id":"e5e5639c.d823c","type":"ui_button","z":"e45fea15.9c4e3","name":"Iniciar calibração","group":"1e52356.f784f4b","order":2,"width":10,"height":1,"passthru":false,"label":"Iniciar verificação ","tooltip":"","color":"","bgcolor":"green","icon":"","payload":"0","payloadType":"num","topic":"","x":110,"y":260,"wires":[["5b16961d.8a3d38","ee180021.a86fb8"]]},{"id":"9b28fb2e.1b7818","type":"ui_button","z":"e45fea15.9c4e3","name":"Icone de Calibração","group":"1e52356.f784f4b","order":3,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"green","icon":"flight_takeoff","payload":"","payloadType":"str","topic":"","x":2380,"y":140,"wires":[[]]},{"id":"2633da85.cb8586","type":"exec","z":"6c2b044a.6deeb4","command":"python3 calibration_pressure_sensor.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":360,"y":240,"wires":[["223156fe.82d5b2"],[],[]]},{"id":"223156fe.82d5b2","type":"function","z":"6c2b044a.6deeb4","name":"Verificando","func":"str = msg.payload;\nvar partsOfStr = str.split(',');\n\nvar temp = (Number(partsOfStr[0]));\nvar press = (Number(partsOfStr[1]));\nvar press_mar = (Number(partsOfStr[2]));\nvar altitude = (Number(partsOfStr[3]));\n\nif (temp < 1){\n    msg.payload = 'Not OK';\n}\nelse{\n    msg.payload = 'OK';\n}\nreturn msg;","outputs":1,"noerr":0,"x":620,"y":240,"wires":[["b6fc7e9f.0cde6"]]},{"id":"b6fc7e9f.0cde6","type":"switch","z":"6c2b044a.6deeb4","name":"\"OK\" ou \"NOT OK\"?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Not OK","vt":"str"},{"t":"eq","v":"OK","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":830,"y":240,"wires":[[],[]]},{"id":"9986b3b1.c55198","type":"function","z":"c9ae39d3.fb822","name":"Verificando","func":"var tensao_bateria_motor = global.get('tensao_sistema_potencia');\n\nif (tensao_bateria_motor >21.9){\n    msg.payload = 'Not OK';\n}\nelse {\n    msg.payload = 'OK';\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":240,"wires":[["ee4addca.6425c"]]},{"id":"ee4addca.6425c","type":"switch","z":"c9ae39d3.fb822","name":"\"OK\" ou \"NOT OK\"?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Not OK","vt":"str"},{"t":"eq","v":"OK","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":450,"y":240,"wires":[[],[]]},{"id":"d6cc431.be66e4","type":"ui_button","z":"6dc3f0bb.36c81","name":"Teste","group":"129f038b.7e6834","order":1,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#A6BBCF","icon":"flight_takeoff","payload":"","payloadType":"str","topic":"","x":1910,"y":1400,"wires":[[]]},{"id":"eb886d07.9f6dc8","type":"ui_button","z":"e45fea15.9c4e3","name":"Restart","group":"1e52356.f784f4b","order":25,"width":0,"height":0,"passthru":false,"label":"Reiniciar","tooltip":"","color":"black","bgcolor":"yellow","icon":"restore","payload":"","payloadType":"num","topic":"","x":120,"y":40,"wires":[["3f37c34.b6b0fbc"]]},{"id":"3f37c34.b6b0fbc","type":"link out","z":"e45fea15.9c4e3","name":"","links":["1366383a.d72f88","e0c40117.9f117","899f3620.bca1a8","9d9732a1.490e6","27b9c4b1.3b944c","a5df2b86.50e32","623ae9d8.09b81","3451674b.a6bba8","e3ea500.91eebb","aed06b51.8d54e","7d4253e8.93635c"],"x":235,"y":40,"wires":[]},{"id":"d78fdbcc.35109","type":"ui_dropdown","z":"760dfb14.3731dc","name":"Rotinas","label":"Tipo de Teste","tooltip":"","place":"Escolha a opção","group":"3e26bae5.c7f52e","order":1,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"","value":"Modo Degrau","type":"str"},{"label":"","value":"Modo Turbo","type":"str"},{"label":"","value":"Modo Pico","type":"str"}],"payload":"","topic":"","x":1070,"y":380,"wires":[["70128b7f.22341c","9d1847f1.95bdb8","770a2683.cab49","d280ecf0.6d688","6ad46023.d045d"]]},{"id":"2f0b2ae6.27d28e","type":"ui_dropdown","z":"760dfb14.3731dc","name":"Open Loop","label":"Tipo de Teste","tooltip":"","place":"Escolha a opção","group":"b4eec92e.11ffd","order":1,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"","value":"Open Loop","type":"str"}],"payload":"","topic":"","x":1110,"y":540,"wires":[["70128b7f.22341c","9cf3f5ab.858908","653173e8.49ab14","6ad46023.d045d"]]},{"id":"291d2ac0.a8ef06","type":"switch","z":"760dfb14.3731dc","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Open Loop","vt":"str"},{"t":"eq","v":"Rotina","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":720,"y":460,"wires":[["a50984d5.bc3c78"],["f46f6c95.5a23e"]]},{"id":"70128b7f.22341c","type":"ui_ui_control","z":"760dfb14.3731dc","name":"","events":"all","x":1120,"y":480,"wires":[[]]},{"id":"a50984d5.bc3c78","type":"change","z":"760dfb14.3731dc","name":"Mudar para Loop","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Display_Rotina\",\"Display_Rotinaescolha\"],\"show\":[\"Display_Loop\",\"Display_Loopescolha\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":400,"wires":[["70128b7f.22341c"]]},{"id":"f46f6c95.5a23e","type":"change","z":"760dfb14.3731dc","name":"Mudar para Rotina","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Display_Loop\",\"Display_Loopescolha\"],\"show\":[\"Display_Rotina\",\"Display_Rotinaescolha\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":520,"wires":[["70128b7f.22341c"]]},{"id":"ed4e06e6.f27ec8","type":"link out","z":"6dc3f0bb.36c81","name":"Confirmação","links":["c697df34.5692f","8b37a042.036cf"],"x":575,"y":1020,"wires":[]},{"id":"c697df34.5692f","type":"link in","z":"760dfb14.3731dc","name":"","links":["ed4e06e6.f27ec8"],"x":55,"y":340,"wires":[["6ee968ad.15a348"]]},{"id":"6ee968ad.15a348","type":"function","z":"760dfb14.3731dc","name":"Variaveis","func":"str = msg.payload;\nvar Tipo_Teste = str[0];\nvar Metodo_Teste = str[1];\nvar Motor = str[2];\nvar Helice = str[3];\n\nif (Tipo_Teste || Metodo_Teste || Motor || Helice === null){\n    msg.payload=true;\n}\nelse{\n    msg.payload=false;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":200,"y":340,"wires":[["3f645d60.e7b91a"]]},{"id":"3f645d60.e7b91a","type":"switch","z":"760dfb14.3731dc","name":"Avalia input","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":340,"wires":[["7e8e797f.a6c208"],[]]},{"id":"7e8e797f.a6c208","type":"function","z":"760dfb14.3731dc","name":"Extração dos dados","func":"var tipo_teste = global.get('tipo_teste');\nvar metodo_teste = global.get('metodo_teste');\nvar motor = global.get('motor');\nvar helice = global.get('helice');\n\nmsg1 = {payload: tipo_teste}\nmsg2 = {payload: metodo_teste}\nmsg3 = {payload: motor}\nmsg4 = {payload: helice}\n\nreturn [msg1, msg2, msg3, msg4];","outputs":4,"noerr":0,"x":590,"y":340,"wires":[["90150e46.93108"],["291d2ac0.a8ef06","a3b48c26.03a958"],["ebdcb847.b03af"],["56621b1c.fb0afc"]]},{"id":"90150e46.93108","type":"ui_button","z":"760dfb14.3731dc","name":"Tipo de teste","group":"1285dd49.e3515b","order":2,"width":3,"height":1,"passthru":false,"label":"{{msg.payload}}","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":910,"y":140,"wires":[[]]},{"id":"5091f979.c32738","type":"ui_button","z":"760dfb14.3731dc","name":"","group":"1285dd49.e3515b","order":1,"width":8,"height":1,"passthru":false,"label":"Você escolheu o tipo de teste:","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":1280,"y":1940,"wires":[[]]},{"id":"fcd91259.7bf1a","type":"ui_button","z":"760dfb14.3731dc","name":"Motor","group":"1285dd49.e3515b","order":9,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#87A980","icon":"flight","payload":"","payloadType":"str","topic":"","x":1510,"y":2020,"wires":[[]]},{"id":"e8e3e20e.d01ab","type":"ui_button","z":"760dfb14.3731dc","name":"Hélice","group":"1285dd49.e3515b","order":12,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#FFCC66","icon":"toys","payload":"","payloadType":"str","topic":"","x":1210,"y":2100,"wires":[[]]},{"id":"ffea9700.df72f","type":"ui_button","z":"760dfb14.3731dc","name":"Metodo","group":"1285dd49.e3515b","order":6,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#DAC4B4","icon":"view_list","payload":"","payloadType":"str","topic":"","x":1510,"y":2060,"wires":[[]]},{"id":"e238546.4c36528","type":"ui_button","z":"760dfb14.3731dc","name":"Teste","group":"1285dd49.e3515b","order":3,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#A6BBCF","icon":"flight_takeoff","payload":"","payloadType":"str","topic":"","x":1210,"y":2060,"wires":[[]]},{"id":"8db666ea.aa4168","type":"ui_button","z":"760dfb14.3731dc","name":"","group":"1285dd49.e3515b","order":4,"width":8,"height":1,"passthru":false,"label":"Você escolheu o método:","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":1260,"y":1900,"wires":[[]]},{"id":"1b6160d5.bac647","type":"ui_button","z":"760dfb14.3731dc","name":"","group":"1285dd49.e3515b","order":7,"width":8,"height":1,"passthru":false,"label":"Motor a ser testado:","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":1250,"y":1980,"wires":[[]]},{"id":"64c18b3a.f3e5e4","type":"ui_button","z":"760dfb14.3731dc","name":"","group":"1285dd49.e3515b","order":10,"width":8,"height":1,"passthru":false,"label":"Hélice a ser testada:","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":1250,"y":2020,"wires":[[]]},{"id":"a3b48c26.03a958","type":"ui_button","z":"760dfb14.3731dc","name":"Metodo de teste","group":"1285dd49.e3515b","order":5,"width":3,"height":1,"passthru":false,"label":"{{msg.payload}}","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":920,"y":200,"wires":[[]]},{"id":"ebdcb847.b03af","type":"ui_button","z":"760dfb14.3731dc","name":"Motor","group":"1285dd49.e3515b","order":8,"width":3,"height":1,"passthru":false,"label":"{{msg.payload}}","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":890,"y":260,"wires":[[]]},{"id":"56621b1c.fb0afc","type":"ui_button","z":"760dfb14.3731dc","name":"Hélice","group":"1285dd49.e3515b","order":11,"width":3,"height":1,"passthru":false,"label":"{{msg.payload}}","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":890,"y":320,"wires":[[]]},{"id":"4dd880f6.4ee438","type":"exec","z":"760dfb14.3731dc","command":"python3 calibration_pressure_sensor.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":460,"y":920,"wires":[["432a174e.c0606"],[],[]]},{"id":"432a174e.c0606","type":"function","z":"760dfb14.3731dc","name":"Split Data","func":"str = msg.payload;\nvar partsOfStr = str.split(',');\n\nvar temp = (Number(partsOfStr[0]));\nvar press = (Number(partsOfStr[1]));\nvar press_mar = (Number(partsOfStr[2]));\nvar altitude = (Number(partsOfStr[3]));\n\nmsg1 = {payload: temp}\nmsg2 = {payload: press}\nmsg3 = {payload: press_mar}\nmsg4 = {payload: altitude}\n\nreturn [msg1, msg2, msg3, msg4];\n","outputs":4,"noerr":0,"x":720,"y":920,"wires":[["cd23dcb3.c4308"],["3f6a7f49.2aa49"],["e6dfab00.814f28"],["3e6c21bb.904c6e"]]},{"id":"6b7e5d6a.5d2f4c","type":"inject","z":"760dfb14.3731dc","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":210,"y":920,"wires":[["4dd880f6.4ee438"]]},{"id":"9d1847f1.95bdb8","type":"ui_text","z":"760dfb14.3731dc","group":"638d889c.647d","order":1,"width":0,"height":0,"name":"Modo Potencia Máxima","label":"Modo Degrau: motor sobe de potencia em 10 em 10%.","format":"","layout":"row-spread","x":1300,"y":120,"wires":[]},{"id":"770a2683.cab49","type":"ui_text","z":"760dfb14.3731dc","group":"638d889c.647d","order":2,"width":0,"height":0,"name":"Modo Curva de Torque","label":"Modo Turbo: potencia máxima por 30s.","format":"","layout":"row-spread","x":1310,"y":180,"wires":[]},{"id":"d280ecf0.6d688","type":"ui_text","z":"760dfb14.3731dc","group":"638d889c.647d","order":3,"width":0,"height":0,"name":"Modo Baby","label":"Modo Pico: Analisar picos de torque aplicados ao motor.","format":"","layout":"row-spread","x":1270,"y":240,"wires":[]},{"id":"9cf3f5ab.858908","type":"ui_text","z":"760dfb14.3731dc","group":"f0dad106.0e302","order":1,"width":0,"height":0,"name":"Modo Open Loop","label":"Modo Open Loop: Aqui o controle é todo seu! Por meio de um potenciômetro, a potência do motor será controlada totalmente pelo usuário. Teste o sistema.","format":"","layout":"row-spread","x":1320,"y":580,"wires":[]},{"id":"653173e8.49ab14","type":"ui_slider","z":"760dfb14.3731dc","name":"","label":"Deslize o botão","tooltip":"","group":"f0dad106.0e302","order":2,"width":5,"height":2,"passthru":true,"outs":"all","topic":"","min":0,"max":"100","step":"1","x":1350,"y":640,"wires":[["bc49404b.fc876"]]},{"id":"bc49404b.fc876","type":"ui_gauge","z":"760dfb14.3731dc","name":"","group":"f0dad106.0e302","order":3,"width":12,"height":2,"gtype":"gage","title":"Potência do Motor","label":"%","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1540,"y":640,"wires":[]},{"id":"a366b95a.fde8a","type":"inject","z":"760dfb14.3731dc","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":570,"y":1220,"wires":[["722c56e0.bc5af"]]},{"id":"722c56e0.bc5af","type":"function","z":"760dfb14.3731dc","name":"Potência","func":"var corrente = global.get('corrente_sistema_potencia');\nvar tensao = global.get('tensao_sistema_potencia');\nvar potencia = corrente*tensao;\nmsg.payload = potencia\nreturn msg;","outputs":1,"noerr":0,"x":760,"y":1220,"wires":[["4e7af004.287b68"]]},{"id":"4e7af004.287b68","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"low","count":"1","round":"2","mult":"single","reduce":false,"x":900,"y":1220,"wires":[["342f1530.c877ca"]]},{"id":"91b8bdb2.9a79","type":"pi-gpiod out","z":"6c53f7a3.674208","name":"BLDC PWM","host":"localhost","port":8888,"pin":"12","set":"","level":"0","out":"ser","sermin":"1000","sermax":"2000","x":250,"y":980,"wires":[]},{"id":"32a63167.a2af4e","type":"link in","z":"6c53f7a3.674208","name":"","links":["ddce3c48.991ec"],"x":95,"y":980,"wires":[["91b8bdb2.9a79"]]},{"id":"453fc0a.de6f04","type":"ui_button","z":"6c53f7a3.674208","name":"","group":"cf5ef35d.d04a78","order":1,"width":30,"height":1,"passthru":false,"label":"INICIAR TESTE","tooltip":"","color":"","bgcolor":"green","icon":"touch_app","payload":"1","payloadType":"num","topic":"","x":90,"y":100,"wires":[["cdde611d.da42a"]]},{"id":"ee3a224a.2d745","type":"function","z":"6c53f7a3.674208","name":"Battery_Voltage","func":"var battery_voltage = global.get('tensao_sistema_potencia');\nmsg.payload = battery_voltage;\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":200,"wires":[["a4c218ee.5b4d48"]]},{"id":"a4c218ee.5b4d48","type":"switch","z":"6c53f7a3.674208","name":"Avalia Bateria","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"7.6","vt":"str"},{"t":"lte","v":"7.6","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":1010,"y":200,"wires":[["aa95f46f.08a72","7370ceeb.90c7a"],["edf95506.1e6f38"]]},{"id":"b843e546.36ff48","type":"pi-gpiod out","z":"6c53f7a3.674208","name":"Relay GND","host":"localhost","port":8888,"pin":"20","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","x":330,"y":1120,"wires":[]},{"id":"27a00b49.cfe0f4","type":"link in","z":"6c53f7a3.674208","name":"","links":["4d822601.1f3b78","c2d284c9.3e2ed","28be2caa.bbeb1c"],"x":105,"y":1180,"wires":[["b843e546.36ff48"]]},{"id":"3513ebba.67e1f4","type":"ui_slider","z":"6c53f7a3.674208","name":"Controle do Motor","label":"Controle do Motor","tooltip":"","group":"cf5ef35d.d04a78","order":3,"width":26,"height":1,"passthru":true,"outs":"all","topic":"","min":0,"max":"100","step":1,"x":2720,"y":140,"wires":[["ddce3c48.991ec","45d99750.643568","fc2e4bd7.59ce58"]]},{"id":"ddce3c48.991ec","type":"link out","z":"6c53f7a3.674208","name":"","links":["32a63167.a2af4e"],"x":2845,"y":140,"wires":[]},{"id":"6ad46023.d045d","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"modo_escolhido","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1360,"y":420,"wires":[["5b32b1b.e5cef5"]]},{"id":"5b32b1b.e5cef5","type":"function","z":"760dfb14.3731dc","name":"Retorna Teste","func":"var modo_escolhido = global.get('modo_escolhido');\nmsg.payload = modo_escolhido;\nreturn msg;","outputs":1,"noerr":0,"x":1580,"y":420,"wires":[[]]},{"id":"b6523244.206fd","type":"switch","z":"6c53f7a3.674208","name":"Direciona Teste","property":"modo_escolhido","propertyType":"global","rules":[{"t":"eq","v":"Open Loop","vt":"str"},{"t":"eq","v":"Modo Turbo","vt":"str"},{"t":"eq","v":"Modo Degrau","vt":"str"},{"t":"eq","v":"Modo Pico","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":2060,"y":160,"wires":[["8a7199c3.c0fbd8"],["4b7bb530.816644"],["777a9b74.7f7414"],["55f7a6c6.0216d"]]},{"id":"388b7165.ea0cae","type":"function","z":"e73b8405.466b88","name":"Low signal to Transistor","func":"var relay;\nrelay = 0;\nmsg.payload = relay;\nreturn msg;","outputs":1,"noerr":0,"x":1210,"y":120,"wires":[["8b0b1fc0.a2032"]]},{"id":"cd23dcb3.c4308","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"low","count":"10","round":"2","mult":"single","reduce":false,"x":900,"y":860,"wires":[["d4da9992.b850e8"]]},{"id":"d4da9992.b850e8","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"temp_ambiente","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1120,"y":860,"wires":[["646df9f1.031ed8"]]},{"id":"3f6a7f49.2aa49","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"low","count":"10","round":"2","mult":"single","reduce":false,"x":900,"y":900,"wires":[["5981f042.b9674"]]},{"id":"5981f042.b9674","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"press_mar","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":900,"wires":[["6aa5d2e2.f2b8fc"]]},{"id":"e6dfab00.814f28","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"low","count":"10","round":"2","mult":"single","reduce":false,"x":900,"y":940,"wires":[["5d4a776.0f72988"]]},{"id":"5d4a776.0f72988","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"press_ambiente","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1130,"y":940,"wires":[["7022414.8d0ecc"]]},{"id":"3e6c21bb.904c6e","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"low","count":"10","round":"2","mult":"single","reduce":false,"x":900,"y":980,"wires":[["daece7c2.ce0cc8"]]},{"id":"daece7c2.ce0cc8","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"altitude","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1100,"y":980,"wires":[["ca7d2b4f.eb59a8"]]},{"id":"646df9f1.031ed8","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":11,"width":4,"height":1,"name":"","label":"Temperatura Ambiente","format":"{{msg.payload}}","layout":"col-center","x":1390,"y":860,"wires":[]},{"id":"6aa5d2e2.f2b8fc","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":10,"width":5,"height":1,"name":"","label":"Pressão Nível do Mar","format":"{{msg.payload}}","layout":"col-center","x":1380,"y":900,"wires":[]},{"id":"7022414.8d0ecc","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":12,"width":5,"height":1,"name":"","label":"Pressão Ambiente","format":"{{msg.payload}}","layout":"col-center","x":1370,"y":940,"wires":[]},{"id":"ca7d2b4f.eb59a8","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":9,"width":4,"height":1,"name":"","label":"Altitude ","format":"{{msg.payload}}","layout":"col-center","x":1340,"y":980,"wires":[]},{"id":"17d4ee7c.a431d2","type":"ui_gauge","z":"760dfb14.3731dc","name":"","group":"cf5ef35d.d04a78","order":7,"width":10,"height":5,"gtype":"gage","title":"Potência do Motor (%)","label":"W","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1370,"y":1220,"wires":[]},{"id":"342f1530.c877ca","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"potencia","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1090,"y":1220,"wires":[["17d4ee7c.a431d2"]]},{"id":"29e3fbbf.390654","type":"function","z":"6a7f58b5.ba1848","name":"Escreve dados em CSV","func":"var continuidade = global.get('variable_stop');\nvar motor = global.get('motor');\nvar helice = global.get('helice');\nvar corrente = global.get('corrente');\nvar pressao_mar = global.get('press_mar');\nvar pressao_amb = global.get('press_ambiente');\nvar altitude = global.get('altitude');\nvar timestamp= global.get('timestamp');\nvar potencia = global.get('potencia');\nvar massa = global.get('massa');\nvar torque = global.get('torque');\nvar rotacao = global.get('rotacao');\nvar airspeed = global.get('airspeed');\nvar tensao_controle = global.get('tensao_sistema_controle');\nvar tensao_potencia = global.get('tensao_sistema_potencia');\nvar corrente_controle = global.get('corrente_sistema_controle');\nvar pwm = global.get('pwm_porc')\nvar corrente_potencia = global.get('corrente_sistema_pontencia');\n\nif(continuidade===0){\n    msg.payload=0;\n}\n\nelse{\n    var data = timestamp+\",\"+pressao_mar+\",\"+pressao_amb+\",\"+altitude+\",\"+potencia+\",\"+torque+\",\"+rotacao+\",\"+airspeed+\",\"+tensao_controle+\",\"+tensao_potencia+\",\"+corrente_controle+\",\"+pwm+\",\"+corrente_potencia;\n    msg.payload = data;\n}\nreturn msg;","outputs":1,"noerr":0,"x":660,"y":220,"wires":[["73803b42.e3176c","732420c.37501e","88eee7b7.2ac168"]]},{"id":"732420c.37501e","type":"file","z":"6a7f58b5.ba1848","name":"Arquivo CSV - Dados Coletados","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"false","encoding":"none","x":1030,"y":220,"wires":[[]]},{"id":"67f732c7.0f2f2c","type":"while-loop","z":"6a7f58b5.ba1848","name":"","condi":"msg.payload !== 0 ","x":670,"y":360,"wires":[[],["9bd6ac.6d18e958"]]},{"id":"b3ee618d.a1281","type":"link in","z":"6a7f58b5.ba1848","name":"","links":["bb6ecd58.a937b"],"x":75,"y":160,"wires":[["d51bc178.29e5c","6d676ae5.69786c"]]},{"id":"1516119a.9cee4e","type":"fs-file-lister","z":"6a7f58b5.ba1848","name":"","start":"/home/pi/Documents/Tests","pattern":"*.csv*","folders":"*","hidden":true,"lstype":"files","path":true,"single":true,"depth":0,"stat":false,"showWarnings":true,"x":290,"y":520,"wires":[["49961aa4.8306ec"]]},{"id":"49961aa4.8306ec","type":"change","z":"6a7f58b5.ba1848","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":520,"wires":[["20b5b073.a952e"]]},{"id":"20b5b073.a952e","type":"ui_dropdown","z":"6a7f58b5.ba1848","name":"","label":"Escolha o Teste","tooltip":"","place":"Escolha o teste","group":"a0d000c5.3838e","order":1,"width":21,"height":1,"passthru":true,"multiple":false,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":710,"y":520,"wires":[["dd74262e.6e5498"]]},{"id":"88d627eb.2ee89","type":"file in","z":"6a7f58b5.ba1848","name":"Read File","filename":"","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":330,"y":720,"wires":[["6281b075.dc58d8"]]},{"id":"6281b075.dc58d8","type":"csv","z":"6a7f58b5.ba1848","name":"","sep":",","hdrin":false,"hdrout":false,"multi":"mult","ret":"\\r\\n","temp":"","skip":"0","strings":false,"x":570,"y":720,"wires":[["fdc83680.0ee26"]]},{"id":"ca25d8e2.7b4908","type":"ui_chart","z":"6a7f58b5.ba1848","name":"","group":"a0d000c5.3838e","order":4,"width":8,"height":7,"label":"Potência (W)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":true,"ymin":"0","ymax":"700","removeOlder":"1","removeOlderPoints":"1000","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1610,"y":720,"wires":[[]]},{"id":"a46ce0c4.34131","type":"inject","z":"6a7f58b5.ba1848","name":"","topic":"","payload":"[]","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1420,"y":640,"wires":[["ca25d8e2.7b4908","f6d4efbe.32651","6929b06.f7f145","bf9d0b84.52d178","b08724c.9a2c2d8","4e51fcc7.59f3e4","f4714308.d4a238","d40fe693.e762f8"]]},{"id":"a9a66f82.4c6c8","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Potência)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col5}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":720,"wires":[["e579678f.ffd9e"]]},{"id":"e579678f.ffd9e","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Potência (W)\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1370,"y":720,"wires":[["ca25d8e2.7b4908"]]},{"id":"fdc83680.0ee26","type":"function","z":"6a7f58b5.ba1848","name":"Dataset","func":"msg = \n\n{\n\"channel\":\n{\n\"id\":\"XXXXXXX\",\"name\":\"temperature sensor\",\n\"description\":\"Temperatura / Prototipo 1 Esp8266 /Sensor /PowerBank / Deepsleep \",\n\"latitude\":\"0.0\",\n\"longitude\":\"0.0\",\n\"field1\":\"Temperatura\",\n\"created_at\":\"2018-09-23T13:26:03Z\",\n\"updated_at\":\"2018-09-29T22:48:56Z\",\n\"last_entry_id\":964\n},\n\n\"feeds\":msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":720,"wires":[["a9a66f82.4c6c8","bb5298e9.380518","93465c15.842fb","81ccbf54.2f124","89528e9c.09aa4","254ed027.dd4e2","81494c5b.29407","4ffc7cf3.f5b374","9276d551.b11658","bc8bb7b3.5b3f28","999599eb.87702","18288ada.119125"]]},{"id":"4f8e454e.2ea18c","type":"inject","z":"6a7f58b5.ba1848","name":"","topic":"","payload":"","payloadType":"date","repeat":"0.1","crontab":"","once":true,"onceDelay":0.1,"x":1270,"y":100,"wires":[["5b3f3f2.27373c"]]},{"id":"106bb805.f4a008","type":"change","z":"6a7f58b5.ba1848","name":"","rules":[{"t":"set","p":"timestamp","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1700,"y":100,"wires":[[]]},{"id":"5b3f3f2.27373c","type":"change","z":"6a7f58b5.ba1848","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$now()","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":100,"wires":[["106bb805.f4a008"]]},{"id":"861973ce.a7828","type":"debug","z":"6a7f58b5.ba1848","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":630,"y":620,"wires":[]},{"id":"dd74262e.6e5498","type":"function","z":"6a7f58b5.ba1848","name":"Nome do arquivo","func":"filename = msg.payload;\nmsg.filename=filename;\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":620,"wires":[["88d627eb.2ee89","861973ce.a7828"]]},{"id":"4e2e0657.9d2a98","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Torque (N)\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":800,"wires":[["f6d4efbe.32651"]]},{"id":"f6d4efbe.32651","type":"ui_chart","z":"6a7f58b5.ba1848","name":"","group":"a0d000c5.3838e","order":5,"width":9,"height":7,"label":"Torque","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":true,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"1000","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1600,"y":800,"wires":[[]]},{"id":"39b8b303.4a549c","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Pressão Ambiente\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":860,"wires":[[]]},{"id":"beca036a.6abae","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Pressão Ambiente\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":920,"wires":[["b08724c.9a2c2d8"]]},{"id":"bb5298e9.380518","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Torque)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col6}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1070,"y":800,"wires":[["4e2e0657.9d2a98"]]},{"id":"93465c15.842fb","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Pressão Mar)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col2}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1080,"y":860,"wires":[["39b8b303.4a549c"]]},{"id":"81ccbf54.2f124","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Pressão Amb.)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col3}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1090,"y":920,"wires":[["beca036a.6abae"]]},{"id":"a02fca35.2608e8","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Altitude(m)\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":980,"wires":[[]]},{"id":"f7e0ee48.8c951","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Velocidade do ar (m/s)\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":1040,"wires":[["6929b06.f7f145"]]},{"id":"6929b06.f7f145","type":"ui_chart","z":"6a7f58b5.ba1848","name":"","group":"a0d000c5.3838e","order":23,"width":8,"height":4,"label":"Velocidade do Ar","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":true,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"1000","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1630,"y":1040,"wires":[[]]},{"id":"7b069915.6e2328","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Rotação (RPM)\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":1100,"wires":[["bf9d0b84.52d178"]]},{"id":"bf9d0b84.52d178","type":"ui_chart","z":"6a7f58b5.ba1848","name":"","group":"a0d000c5.3838e","order":16,"width":9,"height":6,"label":"Rotação (RPM)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":true,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"1000","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1630,"y":1100,"wires":[[]]},{"id":"89528e9c.09aa4","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Altitude)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col4}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1070,"y":980,"wires":[["a02fca35.2608e8"]]},{"id":"254ed027.dd4e2","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Velocidade Ar)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col8}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1080,"y":1040,"wires":[["f7e0ee48.8c951"]]},{"id":"81494c5b.29407","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Rotação (RPM))","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col7}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1080,"y":1100,"wires":[["7b069915.6e2328"]]},{"id":"8ec2c30a.f9a7e","type":"ui_button","z":"6a7f58b5.ba1848","name":"","group":"a0d000c5.3838e","order":2,"width":5,"height":1,"passthru":false,"label":"Atualizar","tooltip":"","color":"","bgcolor":"green","icon":"cached","payload":"true","payloadType":"bool","topic":"","x":100,"y":520,"wires":[["1516119a.9cee4e"]]},{"id":"bb6ecd58.a937b","type":"link out","z":"6c53f7a3.674208","name":"","links":["8f86c236.32bb9","b3ee618d.a1281"],"x":695,"y":100,"wires":[]},{"id":"34fa5777.fd6858","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"Motor Escolhido","label":"Qual o motor escolhido?","tooltip":"","place":"Escolha a opção","group":"129f038b.7e6834","order":6,"width":14,"height":1,"passthru":true,"multiple":false,"options":[{"label":"A2212/1000KV ","value":"A2212","type":"str"},{"label":"T-Motor AT3520 KV850","value":"AT3520_KV850","type":"str"},{"label":"Turnigy D3548/4 1100KV","value":"Turnigy_D3548","type":"str"}],"payload":"","topic":"teste","x":590,"y":460,"wires":[["e4f63b41.60e9b8","f4b867f2.06de28"]]},{"id":"93c3c5e6.518348","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"Helice Escolhida","label":"Qual a hélice escolhida?","tooltip":"","place":"Escolha a opção","group":"129f038b.7e6834","order":10,"width":14,"height":1,"passthru":true,"multiple":false,"options":[{"label":"1045R","value":"1045R","type":"str"},{"label":"WINDSOR S-1380 3320","value":"S-1380","type":"str"}],"payload":"","topic":"teste","x":580,"y":680,"wires":[["8034bff1.ec3e78"]]},{"id":"b652184c.cfb708","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"ESC Escolhido","label":"Qual o ESC escolhido?","tooltip":"","place":"Escolha a opção","group":"129f038b.7e6834","order":8,"width":14,"height":1,"passthru":true,"multiple":false,"options":[{"label":"ESC-30A 5.5V-12.6V","value":"ESC_30A","type":"str"},{"label":"ESC-80A HobbyKing","value":"ESC_80A","type":"str"},{"label":"ESC-50A Skywalker","value":"ESC_50A","type":"str"}],"payload":"","topic":"teste","x":580,"y":560,"wires":[["45691f5e.13252","ea5c627a.a88988"]]},{"id":"45691f5e.13252","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"esc","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":560,"wires":[["3464398f.8a29e6"]]},{"id":"3464398f.8a29e6","type":"function","z":"6dc3f0bb.36c81","name":"Retorna ESC","func":"var esc = global.get('esc');\nmsg.payload = \"O ESC do teste é\" + \" \" + esc;\nglobal.set('esc', esc);\nreturn msg;","outputs":1,"noerr":0,"x":1110,"y":560,"wires":[["2bf4618f.e75c36"]]},{"id":"85364c34.231ae","type":"ui_button","z":"6dc3f0bb.36c81","name":"ESC","group":"129f038b.7e6834","order":7,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#A6BBCF","icon":"view_list","payload":"","payloadType":"str","topic":"","x":1910,"y":1520,"wires":[[]]},{"id":"6aab9f59.0ebdb","type":"ui_text","z":"6dc3f0bb.36c81","group":"129f038b.7e6834","order":17,"width":0,"height":0,"name":"Texto de confirmação","label":"","format":"{{msg.payload}}","layout":"col-center","x":970,"y":1100,"wires":[]},{"id":"e77292da.27cd3","type":"function","z":"6dc3f0bb.36c81","name":"Confirmação do Teste","func":"str = msg.payload;\nvar Tipo_Teste = str[0];\nvar Metodo_Teste = str[1];\nvar Motor = str[2];\nvar Helice = str[3];\nvar Esc = str[4];\nvar Bateria = str[5]\nvar Configuracao = str[6]\nvar condicao=0;\n\n\nif (Tipo_Teste === 0 || Metodo_Teste  === 0 || Motor === 0 || Helice  === 0|| Esc  === 0|| Bateria === 0 || Configuracao===0){\n    condicao = 1;}\n\nelse {\n   condicao = 0;\n}\n\nif (condicao === 1){\n   msg.payload = \"Faltam informações de entrada. Verifique e confirme novamente.\";\n    \n}\n\nelse{\n    msg.payload = \"Teste confirmado. Observe abaixo se não há nenhuma inconsistência com os parâmetros escolhidos. Se estiver tudo ok, vá para a aba 'Verificação' para testar os sensores.\";\n}\n\nmsg.topic = condicao;\nreturn msg;","outputs":1,"noerr":0,"x":620,"y":1100,"wires":[["6aab9f59.0ebdb","3db64fb2.8865d"]]},{"id":"593ebe8a.3a85b","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["470b1f16.5f922","ae4f3104.6cf81"],"x":635,"y":1160,"wires":[["4f8aeb0e.e251e4"]]},{"id":"ae4f3104.6cf81","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["5fd04d80.a326dc","6d9d50d5.60cc3","700b0d29.607dc4","ddbb5446.8ac5b8","f5e6a4d2.0a6bc","593ebe8a.3a85b","31fe00bf.dd2c98","9d9732a1.490e6","899f3620.bca1a8","27b9c4b1.3b944c","a5df2b86.50e32","623ae9d8.09b81","3451674b.a6bba8","e3ea500.91eebb","aed06b51.8d54e","7d4253e8.93635c","970c3714.416b38"],"x":195,"y":260,"wires":[]},{"id":"5d1076d8.911928","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":21,"width":10,"height":1,"passthru":false,"label":"Sensor de Rotação","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":2650,"y":320,"wires":[[]]},{"id":"519768a1.5b9078","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":9,"width":10,"height":1,"passthru":false,"label":"Sensor de Corrente do Motor","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":2380,"y":260,"wires":[[]]},{"id":"d158af6a.c3c5b","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":11,"width":10,"height":1,"passthru":false,"label":"Sensor de Corrente do uControlador","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":2400,"y":320,"wires":[[]]},{"id":"d2f58c06.73302","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":5,"width":10,"height":1,"passthru":false,"label":"Sensor de Tensão (Bateria Motor)","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":2680,"y":140,"wires":[[]]},{"id":"1594a8fc.2deb37","type":"ui_button","z":"e45fea15.9c4e3","name":"","group":"1e52356.f784f4b","order":17,"width":10,"height":1,"passthru":false,"label":"Sensor de Tensão (Bateria uControlador)","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":2700,"y":200,"wires":[[]]},{"id":"a0774c4a.8676e","type":"switch","z":"a7d57ee5.4eda68","name":"\"OK\" ou \"NOT OK\"?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Not OK","vt":"str"},{"t":"eq","v":"OK","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":590,"y":240,"wires":[[],[]]},{"id":"5b16961d.8a3d38","type":"function","z":"e45fea15.9c4e3","name":"Verifica se tem sensor falhado","func":"i = msg.payload;\nsensores_falhados = i;\nglobal.set('sensores_falhados', sensores_falhados);\nreturn msg;","outputs":1,"noerr":0,"x":260,"y":180,"wires":[[]]},{"id":"beb459b8.707ae8","type":"link in","z":"e45fea15.9c4e3","name":"","links":["6ab5de0c.3ac1b8","c5242fe.2fb4a5","2b08d97a.e6cd8e","a46472b3.4a7928","df98ca9f.a51678","e540ef20.4eb84","816b2769.82a1c8","320308ec.fd663","3573f5be.3eecb2"],"x":65,"y":180,"wires":[["5b16961d.8a3d38"]]},{"id":"972a83af.ecc77","type":"function","z":"e45fea15.9c4e3","name":"Envia texto ao usuário","func":"sensores_falhados = global.get('sensores_falhados');\nif(sensores_falhados >= 1){\n    msg.payload = \"Tem sensor falhado aí! Verifique antes de iniciar o teste\"\n}\nelse{\n    msg.payload = \"Todos os sensores cruciais estão OK! Pode prosseguir para o teste.\"\n}\nreturn msg;","outputs":1,"noerr":0,"x":1210,"y":1360,"wires":[["34d9f1e9.fbfcbe"]]},{"id":"34d9f1e9.fbfcbe","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":24,"width":24,"height":1,"name":"Texto para o Usuário","label":"","format":"{{msg.payload}}","layout":"col-center","x":1470,"y":1360,"wires":[]},{"id":"e0c40117.9f117","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc"],"x":1355,"y":1280,"wires":[["34d9f1e9.fbfcbe"]]},{"id":"dc1e7026.01916","type":"function","z":"6a7f58b5.ba1848","name":"Guarda parâmetros dos testes","func":"var motor = global.get('motor');\nvar helice = global.get('helice');\nvar esc = global.get('esc');\nvar tipo_teste = global.get('tipo_teste');\nvar metodo_teste = global.get('metodo_teste');\nvar bateria = global.get('bateria');\nvar configuracao = global.get('configuracao')\n\nvar data = motor+\",\"+helice+\",\"+esc+\",\"+tipo_teste+\",\"+metodo_teste+\",\"+bateria+\",\"+configuracao;\n\nmsg.payload = data;\n\nreturn msg;","outputs":1,"noerr":0,"x":700,"y":100,"wires":[["a8a338a4.61b098"]]},{"id":"a8a338a4.61b098","type":"file","z":"6a7f58b5.ba1848","name":"Arquivo CSV - Parâmetros","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"false","encoding":"none","x":1010,"y":100,"wires":[[]]},{"id":"d51bc178.29e5c","type":"function","z":"6a7f58b5.ba1848","name":"Nome do arquivo","func":"var time_now = global.get('timestamp')\nvar motor = global.get('motor');\nvar helice = global.get('helice');\n\nmsg.topic = motor;\nmsg.filename = \"/home/pi/Documents/Parâmetros_de_Testes/\"+motor+\"_\"+helice+\"_\"+time_now+\".csv\"\nreturn msg;","outputs":1,"noerr":0,"x":340,"y":100,"wires":[["dc1e7026.01916"]]},{"id":"6d56bdda.085844","type":"fs-file-lister","z":"6dc3f0bb.36c81","name":"Listagem","start":"/home/pi/Documents/Parâmetros_de_Testes","pattern":"*.csv*","folders":"*","hidden":true,"lstype":"files","path":true,"single":true,"depth":0,"stat":false,"showWarnings":true,"x":560,"y":1380,"wires":[["10f70350.9b32ed"]]},{"id":"10f70350.9b32ed","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":1380,"wires":[["910833d9.c25f"]]},{"id":"910833d9.c25f","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"Escolha do Teste","label":"","tooltip":"","place":"Escolha o teste que deseja carregar","group":"4ef5f78.ffccc08","order":1,"width":6,"height":1,"passthru":true,"multiple":false,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":980,"y":1380,"wires":[["e57b642f.656a98"]]},{"id":"89454211.eb1f7","type":"file in","z":"6dc3f0bb.36c81","name":"Read File","filename":"","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":540,"y":1460,"wires":[["a5abe77c.278978"]]},{"id":"a5abe77c.278978","type":"csv","z":"6dc3f0bb.36c81","name":"","sep":",","hdrin":false,"hdrout":false,"multi":"mult","ret":"\\r\\n","temp":"","skip":"0","strings":false,"x":750,"y":1460,"wires":[["32ac05ff.398eba"]]},{"id":"e57b642f.656a98","type":"function","z":"6dc3f0bb.36c81","name":"","func":"filename = msg.payload;\nmsg.filename=filename;\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":1460,"wires":[["89454211.eb1f7"]]},{"id":"32ac05ff.398eba","type":"function","z":"6dc3f0bb.36c81","name":"Puxando informações","func":"var motor = msg.payload[0].col1;\nvar helice = msg.payload[0].col2;\nvar esc = msg.payload[0].col3;\nvar tipo_teste = msg.payload[0].col4;\nvar metodo_teste = msg.payload[0].col5;\nvar bateria = msg.payload[0].col6;\nvar configuracao = msg.payload[0].col7;\n\nmsg1 = {payload: tipo_teste}\nmsg2 = {payload: metodo_teste}\nmsg3 = {payload: motor}\nmsg4 = {payload: esc}\nmsg5 = {payload: helice}\nmsg6 = {payload: bateria}\nmsg7 = {payload: configuracao}\n\nreturn [msg1, msg2, msg3, msg4, msg5, msg6, msg7];","outputs":7,"noerr":0,"x":1280,"y":1460,"wires":[["9dd7edf3.ad83c"],["322cb675.15c2ea"],["36eadd32.ecb7a2"],["153d5e24.e130b2"],["73a2a0a1.76c21"],["4341c41a.efee04"],["7cb51ddf.810c2c"]]},{"id":"9dd7edf3.ad83c","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["2c83e895.0bc698"],"x":1555,"y":1380,"wires":[]},{"id":"322cb675.15c2ea","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["45ee134.13475ec"],"x":1555,"y":1420,"wires":[]},{"id":"36eadd32.ecb7a2","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["83c95f83.78eed"],"x":1555,"y":1460,"wires":[]},{"id":"153d5e24.e130b2","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["82e7e681.242fb8"],"x":1555,"y":1500,"wires":[]},{"id":"73a2a0a1.76c21","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["e688b908.4c4278"],"x":1555,"y":1540,"wires":[]},{"id":"2c83e895.0bc698","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["9dd7edf3.ad83c"],"x":515,"y":180,"wires":[["26cf270b.2056b8"]]},{"id":"45ee134.13475ec","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["322cb675.15c2ea"],"x":475,"y":360,"wires":[["c4332066.6b31c8"]]},{"id":"83c95f83.78eed","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["36eadd32.ecb7a2"],"x":475,"y":400,"wires":[["34fa5777.fd6858"]]},{"id":"82e7e681.242fb8","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["153d5e24.e130b2"],"x":475,"y":500,"wires":[["b652184c.cfb708"]]},{"id":"e688b908.4c4278","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["73a2a0a1.76c21"],"x":495,"y":620,"wires":[["93c3c5e6.518348"]]},{"id":"7214983a.dab0c8","type":"inject","z":"6dc3f0bb.36c81","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":390,"y":1380,"wires":[["6d56bdda.085844"]]},{"id":"6b73f0e2.e01a5","type":"inject","z":"6a7f58b5.ba1848","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":90,"y":580,"wires":[["1516119a.9cee4e"]]},{"id":"136e4ac8.22d585","type":"ui_button","z":"6dc3f0bb.36c81","name":"","group":"4ef5f78.ffccc08","order":2,"width":2,"height":1,"passthru":false,"label":"Atualizar","tooltip":"","color":"","bgcolor":"green","icon":"cached","payload":"true","payloadType":"bool","topic":"","x":380,"y":1320,"wires":[["6d56bdda.085844"]]},{"id":"a5441556.68ce28","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"Bateria Escolhida","label":"Qual a bateria utilizada?","tooltip":"","place":"Escolha a opção","group":"129f038b.7e6834","order":12,"width":14,"height":1,"passthru":true,"multiple":false,"options":[{"label":"Zippy 3S 2500mAh","value":"Zippy_3S_2500","type":"str"},{"label":"ZOP 5S 4500mAh","value":"ZOP_5S_4500","type":"str"},{"label":"PowerBolt 4S 4000mAh","value":"Powerbolt_4S_4000mAh","type":"str"}],"payload":"","topic":"teste","x":590,"y":780,"wires":[["e0bbaeec.76d53","eb65272d.336868"]]},{"id":"e0bbaeec.76d53","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"bateria","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":780,"wires":[["86c9a8dc.0e38a8"]]},{"id":"86c9a8dc.0e38a8","type":"function","z":"6dc3f0bb.36c81","name":"Retorna bateria","func":"var bateria = global.get('bateria');\nmsg.payload = \"A bateria do teste é\" + \" \" + bateria;\nglobal.set('bateria', bateria);\nreturn msg;","outputs":1,"noerr":0,"x":1120,"y":780,"wires":[["2bf4618f.e75c36"]]},{"id":"d5f8b795.cc22d8","type":"ui_button","z":"6dc3f0bb.36c81","name":"Bateria","group":"129f038b.7e6834","order":11,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#87A980","icon":"battery_full","payload":"","payloadType":"str","topic":"","x":1910,"y":1560,"wires":[[]]},{"id":"a720f45e.adeb08","type":"function","z":"760dfb14.3731dc","name":"Split data","func":"var output = msg.payload.split(\",\");\n\nvar massa = parseInt(output[0]);\nvar rotacao = parseInt(output[1]);\nvar velocidade = parseInt(output[2]);\nvar tensao_bateria_controle = parseFloat(output[3]);\nvar tensao_bateria_potencia = parseFloat(output[4]);\nvar corrente_bateria_controle = parseFloat(output[5]);\nvar corrente_sistema_potencia = parseFloat(output[6]);\nvar temperatura_sistema_potencia = parseFloat(output[7]);\n\nvar msg1 = {payload : massa};\nvar msg2 = {payload : rotacao};\nvar msg3 = {payload : velocidade};\nvar msg4 = {payload : tensao_bateria_controle};\nvar msg5 = {payload : tensao_bateria_potencia};\nvar msg6 = {payload : corrente_bateria_controle};\nvar msg7 = {payload : corrente_sistema_potencia};\nvar msg8 = {payload : temperatura_sistema_potencia};\n\nreturn [msg1, msg2, msg3, msg4, msg5, msg6, msg7, msg8];\n","outputs":8,"noerr":0,"x":320,"y":1440,"wires":[["86a0a40c.6070f","24b1d2b4.9f4546"],["c6e37bb.f623608"],["91f6db41.7db2a8"],["e1475321.65ade8"],["f03b9b0a.3a655"],["9e079282.fe21f"],["3a02bb09.c710dc"],["fc3739ec.8e94f"]]},{"id":"39abecca.4040dc","type":"ui_gauge","z":"760dfb14.3731dc","name":"Torque","group":"cf5ef35d.d04a78","order":19,"width":10,"height":3,"gtype":"gage","title":"Torque","label":"N","format":"{{value}}","min":0,"max":"50","colors":["#00b500","#e6e600","#ca3838"],"seg1":"15","seg2":"30","x":1230,"y":1320,"wires":[]},{"id":"dffaea66.5f2f18","type":"ui_gauge","z":"760dfb14.3731dc","name":"Rotação","group":"cf5ef35d.d04a78","order":8,"width":11,"height":5,"gtype":"gage","title":"Rotação","label":"RPM","format":"{{value}}","min":0,"max":"15000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"5000","seg2":"10000","x":1240,"y":1380,"wires":[]},{"id":"354eaf1.0f4b0d","type":"ui_gauge","z":"760dfb14.3731dc","name":"Velocidade ar","group":"cf5ef35d.d04a78","order":18,"width":9,"height":4,"gtype":"gage","title":"Velocidade ar","label":"m/s","format":"{{value}}","min":0,"max":"40","colors":["#00b500","#e6e600","#ca3838"],"seg1":"20","seg2":"30","x":1250,"y":1440,"wires":[]},{"id":"9de3ddee.8ead","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":14,"width":4,"height":1,"name":"","label":"Tensão do Sistema de Controle (V)","format":"{{msg.payload}}","layout":"col-center","x":1310,"y":1500,"wires":[]},{"id":"d1f19577.e82be","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":24,"width":5,"height":1,"name":"","label":"Tensão do Sistema de Potência (V)","format":"{{msg.payload}}","layout":"col-center","x":1310,"y":1560,"wires":[]},{"id":"1ca204da.e1d32b","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":15,"width":5,"height":1,"name":"","label":"Corrente do Sistema de Controle (A)","format":"{{msg.payload}}","layout":"col-center","x":1320,"y":1600,"wires":[]},{"id":"ff8a69ee.daf55","type":"ui_button","z":"760dfb14.3731dc","name":"Sensores - Ambiente","group":"cf5ef35d.d04a78","order":6,"width":9,"height":1,"passthru":false,"label":"Sensores - Ambiente","tooltip":"","color":"black","bgcolor":"#FFCC66","icon":"wb_sunny","payload":"","payloadType":"str","topic":"","x":1550,"y":1900,"wires":[[]]},{"id":"7368ad26.59349c","type":"ui_button","z":"760dfb14.3731dc","name":"Sensores - Controle","group":"cf5ef35d.d04a78","order":13,"width":9,"height":1,"passthru":false,"label":"Sistema de Controle","tooltip":"","color":"white","bgcolor":"#87A980","icon":"battery_full","payload":"","payloadType":"str","topic":"","x":1550,"y":1940,"wires":[[]]},{"id":"e573de7f.ab1eb8","type":"ui_button","z":"760dfb14.3731dc","name":"Sensores - Potência","group":"cf5ef35d.d04a78","order":16,"width":9,"height":1,"passthru":false,"label":"Sensores - Potência","tooltip":"","color":"black","bgcolor":"#A6BBCF","icon":"battery_full","payload":"","payloadType":"str","topic":"","x":1550,"y":1980,"wires":[[]]},{"id":"86a0a40c.6070f","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"mean","count":"10","round":"1","mult":"single","reduce":false,"x":600,"y":1280,"wires":[["5f1c85bb.71077c"]]},{"id":"c6e37bb.f623608","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"mean","count":"10","round":"1","mult":"single","reduce":false,"x":590,"y":1380,"wires":[["84782198.356c38"]]},{"id":"91f6db41.7db2a8","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"mean","count":"10","round":"1","mult":"single","reduce":false,"x":590,"y":1440,"wires":[["d1bd45e9.49f2c"]]},{"id":"e1475321.65ade8","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"mean","count":"10","round":"1","mult":"single","reduce":false,"x":590,"y":1500,"wires":[["de35fe54.0ad8c8"]]},{"id":"f03b9b0a.3a655","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"mean","count":"10","round":"1","mult":"single","reduce":false,"x":590,"y":1560,"wires":[["da66d547.0342f"]]},{"id":"9e079282.fe21f","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"mean","count":"10","round":"1","mult":"single","reduce":false,"x":590,"y":1600,"wires":[["722c563d.ccffb"]]},{"id":"24b1d2b4.9f4546","type":"function","z":"760dfb14.3731dc","name":"Tração","func":"var configuracao = global.get('configuracao');\nvar traction = msg.payload;\n\nif(configuracao==='Pusher'){\n    msg.payload = -1*traction*9.81/1000;\n}\nelse{\n    msg.payload = traction*9.81/1000;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":580,"y":1320,"wires":[["ecb4dfd6.0d47"]]},{"id":"43afebd0.b601bc","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":28,"width":10,"height":1,"name":"","label":"Massa (g)","format":"{{msg.payload}}","layout":"col-center","x":1240,"y":1280,"wires":[]},{"id":"ecb4dfd6.0d47","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"mean","count":"10","round":"2","mult":"single","reduce":false,"x":740,"y":1320,"wires":[["ab3bb3bd.087ec8"]]},{"id":"5f1c85bb.71077c","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"massa","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":1280,"wires":[["43afebd0.b601bc"]]},{"id":"ab3bb3bd.087ec8","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"torque","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":1320,"wires":[["39abecca.4040dc"]]},{"id":"84782198.356c38","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"rotacao","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":1380,"wires":[["dffaea66.5f2f18"]]},{"id":"d1bd45e9.49f2c","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"airspeed","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":1440,"wires":[["354eaf1.0f4b0d"]]},{"id":"de35fe54.0ad8c8","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"tensao_sistema_controle","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":1500,"wires":[["9de3ddee.8ead"]]},{"id":"722c563d.ccffb","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"corrente_sistema_controle","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":1600,"wires":[["1ca204da.e1d32b"]]},{"id":"9bd6ac.6d18e958","type":"function","z":"6a7f58b5.ba1848","name":"Parar teste","func":"var variable_1 = global.get('variable_stop');\n\nif (variable_1===0){\n    msg.payload = 0;\n}\n\nelse{}\n\nreturn msg;","outputs":1,"noerr":0,"x":880,"y":360,"wires":[["29e3fbbf.390654"]]},{"id":"73803b42.e3176c","type":"delay","z":"6a7f58b5.ba1848","name":"","pauseType":"delay","timeout":"0.2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":470,"y":360,"wires":[["67f732c7.0f2f2c"]]},{"id":"b08724c.9a2c2d8","type":"ui_chart","z":"6a7f58b5.ba1848","name":"","group":"a0d000c5.3838e","order":25,"width":8,"height":4,"label":"Pressão Ambiente (Pa)","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1650,"y":920,"wires":[[]]},{"id":"4ffc7cf3.f5b374","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Tensão - Sistema de Controle)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col9}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":1160,"wires":[["24d9e4ed.a41984"]]},{"id":"24d9e4ed.a41984","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Tensão - Sistema de Controle (V)\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":1160,"wires":[[]]},{"id":"4e51fcc7.59f3e4","type":"ui_chart","z":"6a7f58b5.ba1848","name":"","group":"a0d000c5.3838e","order":15,"width":9,"height":6,"label":"Tensão Potência","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":true,"ymin":"0","ymax":"18.5","removeOlder":"1","removeOlderPoints":"1000","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1630,"y":1220,"wires":[[]]},{"id":"9276d551.b11658","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Tensão - Sistema de Potência)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col10}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":1220,"wires":[["971c5775.ee8d2"]]},{"id":"971c5775.ee8d2","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Tensão - Sistema de Potência (V)\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":1220,"wires":[["4e51fcc7.59f3e4"]]},{"id":"bc8bb7b3.5b3f28","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Corrente - Sistema de Controle)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col11}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1120,"y":1280,"wires":[["53eb77d1.f9cec8"]]},{"id":"53eb77d1.f9cec8","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Corrente - Sistema de Controle\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":1280,"wires":[[]]},{"id":"da66d547.0342f","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"tensao_sistema_potencia","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":1560,"wires":[["d1f19577.e82be"]]},{"id":"8c2f9b06.96768","type":"function","z":"a7d57ee5.4eda68","name":"Verificando","func":"var massa_verificando= global.get('massa');\n\nif (massa_verificando < -50){\n    msg.payload = 'Not OK';\n}\nelse {\n    msg.payload = 'OK';\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":360,"y":240,"wires":[["a0774c4a.8676e"]]},{"id":"f0c363b2.1bf8a8","type":"switch","z":"20533a99.a46f76","name":"\"OK\" ou \"NOT OK\"?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Not OK","vt":"str"},{"t":"eq","v":"OK","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":630,"y":140,"wires":[[],[]]},{"id":"c8dc3aa9.4438e8","type":"function","z":"20533a99.a46f76","name":"Verificando","func":"var rotacao_verificando = global.get('rotacao');\n\nif (rotacao_verificando > 0){\n    msg.payload = 'OK';\n}\nelse {\n    msg.payload = 'OK';\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":140,"wires":[["f0c363b2.1bf8a8"]]},{"id":"8e344953.383d48","type":"switch","z":"b7bbb9ce.008c28","name":"\"OK\" ou \"NOT OK\"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Not OK","vt":"str"},{"t":"eq","v":"OK","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":590,"y":140,"wires":[[],[]]},{"id":"b4cfe97f.f3aaa8","type":"function","z":"b7bbb9ce.008c28","name":"Verificando","func":"var airspeed_verificando = global.get('airspeed');\n\nif (airspeed_verificando !== 0){\n    msg.payload = 'OK';\n}\nelse {\n    msg.payload = 'OK';\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":140,"wires":[["8e344953.383d48"]]},{"id":"6bf3718a.40d63","type":"change","z":"760dfb14.3731dc","name":"Mudar para OFF","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Display_Sistema_ON\"],\"show\":[\"Display_Sistema_Off\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":2040,"wires":[["6d2bee9e.84954"]]},{"id":"4e831781.cbbc6","type":"switch","z":"760dfb14.3731dc","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":400,"y":1960,"wires":[["7c37b8e0.98d408"],["6bf3718a.40d63"]]},{"id":"7c37b8e0.98d408","type":"change","z":"760dfb14.3731dc","name":"Mudar para ON","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Display_Sistema_Off\"],\"show\":[\"Display_Sistema_ON\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":1900,"wires":[["6d2bee9e.84954"]]},{"id":"6d2bee9e.84954","type":"ui_ui_control","z":"760dfb14.3731dc","name":"","events":"all","x":840,"y":2000,"wires":[[]]},{"id":"3a80a00.890b7e","type":"ui_button","z":"760dfb14.3731dc","name":"","group":"b839b32a.9c8578","order":1,"width":0,"height":0,"passthru":false,"label":"OFF","tooltip":"","color":"","bgcolor":"red","icon":"close","payload":"","payloadType":"str","topic":"","x":850,"y":1940,"wires":[[]]},{"id":"6f7b45d4.11cf34","type":"ui_button","z":"760dfb14.3731dc","name":"","group":"aca7b6e8.183af8","order":1,"width":0,"height":0,"passthru":false,"label":"ON","tooltip":"","color":"","bgcolor":"green","icon":"check","payload":"","payloadType":"str","topic":"","x":850,"y":2060,"wires":[[]]},{"id":"18943f0b.a0e561","type":"function","z":"6dc3f0bb.36c81","name":"Zera variável ao iniciar","func":"msg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":340,"y":80,"wires":[["37e8373d.63126"]]},{"id":"37e8373d.63126","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"status_teste","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":80,"wires":[[]]},{"id":"5fd04d80.a326dc","type":"link in","z":"760dfb14.3731dc","name":"","links":["ae4f3104.6cf81"],"x":95,"y":1980,"wires":[["4e831781.cbbc6"]]},{"id":"8f86c236.32bb9","type":"link in","z":"760dfb14.3731dc","name":"","links":["bb6ecd58.a937b"],"x":100,"y":1900,"wires":[["4e831781.cbbc6"]]},{"id":"f63bf9c9.4acf78","type":"link in","z":"760dfb14.3731dc","name":"","links":["4d822601.1f3b78","c2d284c9.3e2ed","28be2caa.bbeb1c"],"x":95,"y":2060,"wires":[["4e831781.cbbc6"]]},{"id":"3d3e43de.702484","type":"change","z":"6c53f7a3.674208","name":"","rules":[{"t":"set","p":"variable_stop","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1410,"y":340,"wires":[["ef1b3e02.f9d04"]]},{"id":"83a6040d.f0249","type":"function","z":"6c53f7a3.674208","name":"Não permite teste","func":"msg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":1170,"y":340,"wires":[["3d3e43de.702484"]]},{"id":"d88ea100.80b228","type":"switch","z":"17941c70.3cd594","name":"\"OK\" ou \"NOT OK\"?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Not OK","vt":"str"},{"t":"eq","v":"OK","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":700,"y":200,"wires":[[],[]]},{"id":"f14f9414.5683c8","type":"function","z":"17941c70.3cd594","name":"Verificando","func":"var temperatura_verificando = global.get('temperatura_sistema_potencia');\n\nif (temperatura_verificando < -1){\n    msg.payload = 'OK';\n}\nelse {\n    msg.payload = 'Not OK';\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":200,"wires":[["d88ea100.80b228"]]},{"id":"fc3739ec.8e94f","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"mean","count":"20","round":"2","mult":"single","reduce":false,"x":600,"y":1720,"wires":[["56cd5631.0dc3a"]]},{"id":"56cd5631.0dc3a","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"corrente_sistema_potencia","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":1720,"wires":[["73de6e2b.1148c"]]},{"id":"73de6e2b.1148c","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":21,"width":5,"height":1,"name":"","label":"Corrente do Sistema de Potência (A)","format":"{{msg.payload}}","layout":"col-center","x":1330,"y":1720,"wires":[]},{"id":"3a02bb09.c710dc","type":"smooth","z":"760dfb14.3731dc","name":"","property":"payload","action":"mean","count":"10","round":"1","mult":"single","reduce":false,"x":610,"y":1660,"wires":[["dd6c727f.8a81a8"]]},{"id":"dd6c727f.8a81a8","type":"change","z":"760dfb14.3731dc","name":"","rules":[{"t":"set","p":"temperatura_sistema_potencia","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":1660,"wires":[["2629651f.dc016a"]]},{"id":"2629651f.dc016a","type":"ui_text","z":"760dfb14.3731dc","group":"cf5ef35d.d04a78","order":22,"width":5,"height":1,"name":"","label":"Temperatura do Sistema de Potencia (°C)","format":"{{msg.payload}}","layout":"col-center","x":1330,"y":1660,"wires":[]},{"id":"dfe44b8c.73d87","type":"switch","z":"28ca1b7d.b04354","name":"\"OK\" ou \"NOT OK\"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Not OK","vt":"str"},{"t":"eq","v":"OK","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":530,"y":200,"wires":[[],[]]},{"id":"6905a74d.034bf","type":"function","z":"28ca1b7d.b04354","name":"Verificando","func":"var corrente_motor_verificando = global.get('corrente_sistema_potencia');\n\nif (corrente_motor_verificando < -1){\n    msg.payload = 'OK';\n}\nelse {\n    msg.payload = 'Not OK';\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":200,"wires":[["dfe44b8c.73d87"]]},{"id":"c5f4b8e3.2c48e","type":"switch","z":"16560827.4150e8","name":"\"OK\" ou \"NOT OK\"?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Not OK","vt":"str"},{"t":"eq","v":"OK","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":510,"y":140,"wires":[["600fb778.5c9628"],[]]},{"id":"5e830348.30d7ec","type":"function","z":"16560827.4150e8","name":"Verificando","func":"var bateria_controle_verificando = global.get('tensao_sistema_controle');\n\nif (bateria_controle_verificando >23){\n    msg.payload = 'Not OK';\n}\nelse {\n    msg.payload = 'OK';\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":140,"wires":[["c5f4b8e3.2c48e","7f9be623.9e495"]]},{"id":"7540833f.477b5c","type":"switch","z":"6b193936.2f1078","name":"\"OK\" ou \"NOT OK\"?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Not OK","vt":"str"},{"t":"eq","v":"OK","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":550,"y":140,"wires":[[],[]]},{"id":"a05b0e8e.d03c88","type":"function","z":"6b193936.2f1078","name":"Verificando","func":"var corrente_controle_verificando = global.get('corrente_sistema_controle');\n\nif (corrente_controle_verificando >5 ){\n    msg.payload = 'Not OK';\n}\nelse {\n    msg.payload = 'OK';\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":140,"wires":[["7540833f.477b5c"]]},{"id":"7389aa92.d3bd9c","type":"switch","z":"6c53f7a3.674208","name":"Avalia inicio","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":650,"y":220,"wires":[["bb6ecd58.a937b","ee3a224a.2d745"],["fcb29ed3.7f59e8"]]},{"id":"fcb29ed3.7f59e8","type":"function","z":"6c53f7a3.674208","name":"Avisa que tem falha","func":"msg.payload = \"Sensor falhado ou falta de parâmetro. Verifique antes de iniciar o teste\"\nreturn msg;","outputs":1,"noerr":0,"x":130,"y":340,"wires":[["a40dd6d0.14229","35e276a7.ee4b02"]]},{"id":"a40dd6d0.14229","type":"ui_text","z":"6c53f7a3.674208","group":"b839b32a.9c8578","order":2,"width":4,"height":2,"name":"Texto de Falha","label":"","format":"{{msg.payload}}","layout":"row-spread","x":350,"y":420,"wires":[]},{"id":"7d7b1f47.ccab18","type":"function","z":"6c53f7a3.674208","name":"Verificação dos sensores cruciais e Parâmetros","func":"var sensor_bateria_motor = global.get(\"bateria_motor_falhada\");\n//var sensor_corrente_motor = global.get(\"corrente_motor_falhada\");\nvar sensor_temperatura_bateria = global.get(\"temperatura_bateria_falhada\");\nvar sensor_celula_carga = global.get(\"celula_falhada\");\nvar entrada_parametros = global.get(\"status_parametros\");\n\nif(entrada_parametros ===1 ||sensor_bateria_motor === 1 || sensor_temperatura_bateria === 1 || sensor_celula_carga === 1){\n    msg.payload = 1;\n}\n\nelse{\n    msg.payload = 0;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":80,"wires":[["7389aa92.d3bd9c"]]},{"id":"777a9b74.7f7414","type":"subflow:e73b8405.466b88","z":"6c53f7a3.674208","name":"","env":[],"x":2300,"y":260,"wires":[]},{"id":"e94342ff.a88758","type":"delay","z":"e73b8405.466b88","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":990,"y":220,"wires":[["f7307148.3f01c"]]},{"id":"f7307148.3f01c","type":"while-loop","z":"e73b8405.466b88","name":"","condi":"msg.payload <100","x":850,"y":120,"wires":[["388b7165.ea0cae"],["8e8b11f2.9dd6f8"]]},{"id":"8e8b11f2.9dd6f8","type":"function","z":"e73b8405.466b88","name":"Incremento de Potência","func":"var porcentagem=msg.payload;\n\nporcentagem = porcentagem + 10;\n\nmsg.payload = porcentagem;\n\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":220,"wires":[["e94342ff.a88758","629f31d6.26505","18497667.90fa4a"]]},{"id":"d5e84ed7.00ccc","type":"function","z":"e73b8405.466b88","name":"Inicializando variável","func":"var porcentagem;\n\nporcentagem = 0;\n\nmsg.payload= porcentagem;\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":220,"wires":[["8e8b11f2.9dd6f8"]]},{"id":"666b2e75.dc7c2","type":"function","z":"6e7f666f.e705a8","name":"Modo Turbo- 10%","func":"var turbo;\nturbo = 10;\nmsg.payload = turbo;\nreturn msg; ","outputs":1,"noerr":0,"x":390,"y":120,"wires":[["94ee87d9.63d438","f588cd5d.616e38","bba51f50.aa83b"]]},{"id":"94ee87d9.63d438","type":"delay","z":"6e7f666f.e705a8","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":580,"y":120,"wires":[["6801f3ef.e11124"]]},{"id":"e7af1766.b48618","type":"delay","z":"6e7f666f.e705a8","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":940,"y":120,"wires":[["365853a5.f9162c"]]},{"id":"6801f3ef.e11124","type":"function","z":"6e7f666f.e705a8","name":"Modo Turbo- 100%","func":"var turbo;\nturbo = 40;\nmsg.payload = turbo;\nreturn msg; ","outputs":1,"noerr":0,"x":750,"y":120,"wires":[["e7af1766.b48618","c90a0459.5a4ec"]]},{"id":"4b7bb530.816644","type":"subflow:6e7f666f.e705a8","z":"6c53f7a3.674208","name":"Modo Turbo","env":[],"x":2300,"y":200,"wires":[]},{"id":"365853a5.f9162c","type":"function","z":"6e7f666f.e705a8","name":"Low signal to Transistor","func":"var relay;\nrelay = 0;\nmsg.payload = relay;\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":120,"wires":[["c7e0763.354f408"]]},{"id":"4f8aeb0e.e251e4","type":"function","z":"6dc3f0bb.36c81","name":"Deleta texto ao reiniciar","func":"msg.payload = null\nreturn msg;","outputs":1,"noerr":0,"x":840,"y":1160,"wires":[["6aab9f59.0ebdb","d575dcb.046a42"]]},{"id":"3db64fb2.8865d","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"topic","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":1020,"wires":[["e18444b5.e807d"]]},{"id":"891be1ad.fe8c08","type":"debug","z":"6dc3f0bb.36c81","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1370,"y":1020,"wires":[]},{"id":"e18444b5.e807d","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"status_parametros","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1150,"y":1020,"wires":[["891be1ad.fe8c08"]]},{"id":"3bbcf128.622046","type":"function","z":"a10284.9be9d58","name":"Nivel Máximo","func":"var stop_test = global.get('variable_stop') //extrai valor instantaneo da variavel stop test do usuário\nvar maximo;\nmaximo = 100;\nmsg.payload = maximo;\nmsg.topic= stop_test;\nreturn msg; ","outputs":1,"noerr":0,"x":460,"y":140,"wires":[["1feeccc3.3c0733","17ddbe03.36e6a2"]]},{"id":"4e65f21b.4a959c","type":"delay","z":"a10284.9be9d58","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":840,"y":140,"wires":[["1a8a310e.d544ff"]]},{"id":"1feeccc3.3c0733","type":"link out","z":"a10284.9be9d58","name":"","links":[],"x":615,"y":80,"wires":[]},{"id":"1a8a310e.d544ff","type":"function","z":"a10284.9be9d58","name":"Nivel Minimo","func":"var stop_test = global.get('variable_stop') //extrai valor instantaneo da variavel stop test do usuário\nvar minimo;\nminimo = 0;\nmsg.payload = minimo;\nmsg.topic=stop_test;\nreturn msg; ","outputs":1,"noerr":0,"x":1030,"y":140,"wires":[["5bf500a6.6e9488","628cffa1.21f348"]]},{"id":"5bf500a6.6e9488","type":"link out","z":"a10284.9be9d58","name":"","links":[],"x":1155,"y":100,"wires":[]},{"id":"b7f80c55.25c5b","type":"delay","z":"a10284.9be9d58","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1420,"y":140,"wires":[["21bf64bd.e55bac","d7f0ac0c.cfd15"]]},{"id":"55f7a6c6.0216d","type":"subflow:fe36eb2d.6b9e68","z":"6c53f7a3.674208","name":"Modo Pico","env":[],"x":2300,"y":320,"wires":[]},{"id":"2fcf9c.098ce064","type":"switch","z":"6c53f7a3.674208","name":"Qual o ESC utilizado?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"ESC_30A","vt":"str"},{"t":"eq","v":"ESC_80A","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1590,"y":160,"wires":[["8cb0ba36.0c6bd8"],["a19c6a54.87eca8"]]},{"id":"555cef19.031f88","type":"function","z":"33a2d9a1.58df5e","name":"Nivel máximo","func":"var stop_test = global.get('variable_stop') //extrai valor instantaneo da variavel stop test do usuário\nvar maximo;\nmaximo = 100;\nmsg.payload = maximo;\nmsg.topic= stop_test;\nreturn msg; ","outputs":1,"noerr":0,"x":410,"y":140,"wires":[["5eb9e8c6.f87f8","eaad0020.4ce358"]]},{"id":"41da53d5.97cd1c","type":"delay","z":"33a2d9a1.58df5e","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":760,"y":140,"wires":[["ae9cee51.a5419"]]},{"id":"ae9cee51.a5419","type":"function","z":"33a2d9a1.58df5e","name":"Nivel Minimo","func":"var stop_test = global.get('variable_stop') //extrai valor instantaneo da variavel stop test do usuário\nvar minimo;\nminimo = 0;\nmsg.payload = minimo;\nmsg.topic = stop_test;\nreturn msg; ","outputs":1,"noerr":0,"x":940,"y":140,"wires":[["c41bfdcf.f3044","2d372bb1.cc84c4"]]},{"id":"35e276a7.ee4b02","type":"function","z":"6c53f7a3.674208","name":"Não permite teste","func":"msg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":340,"wires":[["4b0d3c36.37b494"]]},{"id":"4b0d3c36.37b494","type":"change","z":"6c53f7a3.674208","name":"","rules":[{"t":"set","p":"variable_stop","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":340,"wires":[[]]},{"id":"f5e6a4d2.0a6bc","type":"link in","z":"e45fea15.9c4e3","name":"","links":["470b1f16.5f922","ae4f3104.6cf81"],"x":1075,"y":1420,"wires":[["fd5386fb.f5388"]]},{"id":"fd5386fb.f5388","type":"function","z":"e45fea15.9c4e3","name":"Limpa ao Iniciar","func":"msg.payload = null\nreturn msg;","outputs":1,"noerr":0,"x":1210,"y":1440,"wires":[["34d9f1e9.fbfcbe"]]},{"id":"6d9d50d5.60cc3","type":"link in","z":"6c53f7a3.674208","name":"","links":["470b1f16.5f922","ae4f3104.6cf81"],"x":195,"y":480,"wires":[["f717fa94.f2f8d8"]]},{"id":"f717fa94.f2f8d8","type":"function","z":"6c53f7a3.674208","name":"Limpa ao Iniciar","func":"msg.payload = null\nreturn msg;","outputs":1,"noerr":0,"x":340,"y":480,"wires":[["a40dd6d0.14229"]]},{"id":"edf95506.1e6f38","type":"function","z":"6c53f7a3.674208","name":"Avisa que tem falha","func":"msg.payload = \"Bateria com tensão abaixo do permitido\"\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":340,"wires":[["83a6040d.f0249"]]},{"id":"a19c6a54.87eca8","type":"subflow:33a2d9a1.58df5e","z":"6c53f7a3.674208","name":"","env":[],"x":1810,"y":200,"wires":[["b6523244.206fd"]]},{"id":"8cb0ba36.0c6bd8","type":"subflow:a10284.9be9d58","z":"6c53f7a3.674208","name":"","env":[],"x":1810,"y":120,"wires":[["b6523244.206fd"]]},{"id":"700b0d29.607dc4","type":"link in","z":"6c53f7a3.674208","name":"","links":["470b1f16.5f922","ae4f3104.6cf81"],"x":95,"y":1100,"wires":[["b843e546.36ff48"]]},{"id":"21bf64bd.e55bac","type":"pi-gpiod out","z":"a10284.9be9d58","name":"Relay GND","host":"localhost","port":8888,"pin":"20","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","x":1610,"y":100,"wires":[]},{"id":"f6e1660d.58c2f","type":"pi-gpiod out","z":"6c53f7a3.674208","name":"Relay GND","host":"localhost","port":8888,"pin":"20","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","x":2580,"y":80,"wires":[]},{"id":"8a7199c3.c0fbd8","type":"function","z":"6c53f7a3.674208","name":"Aciona motor novamente","func":"msg.payload = 1;\nreturn msg;","outputs":1,"noerr":0,"x":2330,"y":140,"wires":[["f6e1660d.58c2f","87316b70.4ce2a"]]},{"id":"87316b70.4ce2a","type":"delay","z":"6c53f7a3.674208","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2550,"y":140,"wires":[["3513ebba.67e1f4"]]},{"id":"57d058c2.8903e8","type":"delay","z":"33a2d9a1.58df5e","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1340,"y":140,"wires":[["9bde65b9.c8b3e"]]},{"id":"9bde65b9.c8b3e","type":"function","z":"33a2d9a1.58df5e","name":"Termina a calibração e desliga motor","func":"msg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":1590,"y":140,"wires":[["6a5c07c0.c113d"]]},{"id":"d7f0ac0c.cfd15","type":"function","z":"a10284.9be9d58","name":"Termina a calibração e Aciona o motor","func":"msg.payload = 1;\nreturn msg;","outputs":1,"noerr":0,"x":1680,"y":140,"wires":[["665d8cb0.0d89dc"]]},{"id":"665d8cb0.0d89dc","type":"pi-gpiod out","z":"a10284.9be9d58","name":"Relay GND","host":"localhost","port":8888,"pin":"20","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","x":1950,"y":100,"wires":[]},{"id":"d76aa91e.867a58","type":"pi-gpiod out","z":"a10284.9be9d58","name":"Relay GND","host":"localhost","port":8888,"pin":"20","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","x":330,"y":80,"wires":[]},{"id":"92f450f7.e0efd","type":"function","z":"a10284.9be9d58","name":"Aciona motor ","func":"var inicio;\ninicio = 1;\nmsg.payload = maximo;\nreturn msg; ","outputs":1,"noerr":0,"x":190,"y":140,"wires":[["3bbcf128.622046","d76aa91e.867a58"]]},{"id":"a1b35eff.f48548","type":"function","z":"33a2d9a1.58df5e","name":"Aciona Motor","func":"var inicio;\ninicio = 1;\nmsg.payload = inicio;\nreturn msg; ","outputs":1,"noerr":0,"x":170,"y":140,"wires":[["555cef19.031f88","98b2e6f7.9a7ed8"]]},{"id":"98b2e6f7.9a7ed8","type":"pi-gpiod out","z":"33a2d9a1.58df5e","name":"Relay GND","host":"localhost","port":8888,"pin":"20","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","x":270,"y":40,"wires":[]},{"id":"aa95f46f.08a72","type":"function","z":"6c53f7a3.674208","name":"Indica inicio do teste","func":"msg.payload = 1;\n\nreturn msg;","outputs":1,"noerr":0,"x":1350,"y":260,"wires":[["7b53b8b1.f7ad78"]]},{"id":"7b53b8b1.f7ad78","type":"link out","z":"6c53f7a3.674208","name":"","links":["6076b199.000d68"],"x":1495,"y":220,"wires":[]},{"id":"6076b199.000d68","type":"link in","z":"760dfb14.3731dc","name":"","links":["7b53b8b1.f7ad78"],"x":95,"y":2140,"wires":[["4e831781.cbbc6"]]},{"id":"7370ceeb.90c7a","type":"function","z":"6c53f7a3.674208","name":"Avalia o ESC utilizado","func":"var esc = global.get('esc');\nmsg.payload = esc;\nreturn msg;","outputs":1,"noerr":0,"x":1360,"y":160,"wires":[["2fcf9c.098ce064"]]},{"id":"629f31d6.26505","type":"pi-gpiod out","z":"e73b8405.466b88","name":"BLDC PWM","host":"localhost","port":8888,"pin":"12","set":"","level":"0","out":"ser","sermin":"1000","sermax":"2000","x":980,"y":300,"wires":[]},{"id":"f588cd5d.616e38","type":"pi-gpiod out","z":"6e7f666f.e705a8","name":"BLDC PWM","host":"localhost","port":8888,"pin":"12","set":"","level":"0","out":"ser","sermin":"1000","sermax":"2000","x":630,"y":60,"wires":[]},{"id":"ee180021.a86fb8","type":"subflow:6c2b044a.6deeb4","z":"e45fea15.9c4e3","name":"","env":[],"x":350,"y":260,"wires":[["c8f8966c.0bee9","fbb8bb51.3bd3b8","72762eba.c5a03"],["c8f8966c.0bee9","72762eba.c5a03"]]},{"id":"c8f8966c.0bee9","type":"subflow:c9ae39d3.fb822","z":"e45fea15.9c4e3","name":"","env":[],"x":340,"y":460,"wires":[["b7c881fe.30bd4","b9aa829d.f5f1e8","fa1b764c.5c969"],["b7c881fe.30bd4","fa1b764c.5c969"]]},{"id":"b7c881fe.30bd4","type":"subflow:a7d57ee5.4eda68","z":"e45fea15.9c4e3","name":"","env":[],"x":330,"y":740,"wires":[["4ad395ed.2d6d64","a5ce6f1d.189f1","b601c0e1.3068"],["4ad395ed.2d6d64","b601c0e1.3068"]]},{"id":"4ad395ed.2d6d64","type":"subflow:20533a99.a46f76","z":"e45fea15.9c4e3","name":"","env":[],"x":320,"y":980,"wires":[["4b54731.a78d38c","f6ba8a28.6aa1e8","54156e90.3b5368"],["54156e90.3b5368","f6ba8a28.6aa1e8"]]},{"id":"54156e90.3b5368","type":"subflow:b7bbb9ce.008c28","z":"e45fea15.9c4e3","name":"","env":[],"x":340,"y":1220,"wires":[["9e5775c2.2bb0b","24073a98.4865be","76b38a4f.588e94"],["76b38a4f.588e94","24073a98.4865be"]]},{"id":"6ee78b33.cae214","type":"subflow:17941c70.3cd594","z":"e45fea15.9c4e3","name":"","env":[],"x":1190,"y":240,"wires":[["fc715eff.8e4538","ec7c85ee.6649c","a7086697.49c2a8"],["fc715eff.8e4538","a7086697.49c2a8"]]},{"id":"fc715eff.8e4538","type":"subflow:28ca1b7d.b04354","z":"e45fea15.9c4e3","name":"","env":[],"x":1210,"y":560,"wires":[["8cb69c4a.2bdd98","2a6b5128.36783e","5b461ada.76a0cc"],["8cb69c4a.2bdd98","5b461ada.76a0cc"]]},{"id":"8cb69c4a.2bdd98","type":"subflow:16560827.4150e8","z":"e45fea15.9c4e3","name":"","env":[],"x":1160,"y":860,"wires":[["f98bfe1f.afed38","18fa5a54.61fa1e","2cd1e050.d1e958"],["f98bfe1f.afed38","2cd1e050.d1e958"]]},{"id":"f98bfe1f.afed38","type":"subflow:6b193936.2f1078","z":"e45fea15.9c4e3","name":"","env":[],"x":1190,"y":1120,"wires":[["972a83af.ecc77","d89fee15.0d6eb8","e4d3f511.e5b92"],["972a83af.ecc77","e4d3f511.e5b92"]]},{"id":"b9aa829d.f5f1e8","type":"change","z":"e45fea15.9c4e3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":480,"wires":[["6ab5de0c.3ac1b8"]]},{"id":"6ab5de0c.3ac1b8","type":"link out","z":"e45fea15.9c4e3","name":"","links":["beb459b8.707ae8"],"x":805,"y":480,"wires":[]},{"id":"b82d44f3.80cd4","type":"change","z":"e45fea15.9c4e3","name":"","rules":[{"t":"set","p":"celula_falhada","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":760,"wires":[[]]},{"id":"a5ce6f1d.189f1","type":"function","z":"e45fea15.9c4e3","name":"Identifica falha","func":"if(msg.payload === 'NOT OK'){\n    msg.payload = 1;\n}\nelse{\n    msg.payload = 0;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":760,"wires":[["b82d44f3.80cd4","c5242fe.2fb4a5"]]},{"id":"c5242fe.2fb4a5","type":"link out","z":"e45fea15.9c4e3","name":"","links":["beb459b8.707ae8"],"x":795,"y":720,"wires":[]},{"id":"4b54731.a78d38c","type":"change","z":"e45fea15.9c4e3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":980,"wires":[["2b08d97a.e6cd8e"]]},{"id":"2b08d97a.e6cd8e","type":"link out","z":"e45fea15.9c4e3","name":"","links":["beb459b8.707ae8"],"x":795,"y":980,"wires":[]},{"id":"9e5775c2.2bb0b","type":"change","z":"e45fea15.9c4e3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":1240,"wires":[["a46472b3.4a7928"]]},{"id":"a46472b3.4a7928","type":"link out","z":"e45fea15.9c4e3","name":"","links":["beb459b8.707ae8"],"x":825,"y":1240,"wires":[]},{"id":"7a1cf8.a4e17b08","type":"change","z":"e45fea15.9c4e3","name":"","rules":[{"t":"set","p":"temperatura_bateria_falhada","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1840,"y":220,"wires":[[]]},{"id":"ec7c85ee.6649c","type":"function","z":"e45fea15.9c4e3","name":"Identifica falha","func":"if(msg.payload === 'NOT OK'){\n    msg.payload = 1;\n}\nelse{\n    msg.payload = 0;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":1530,"y":220,"wires":[["7a1cf8.a4e17b08","df98ca9f.a51678"]]},{"id":"df98ca9f.a51678","type":"link out","z":"e45fea15.9c4e3","name":"","links":["beb459b8.707ae8"],"x":1675,"y":180,"wires":[]},{"id":"9f52a6be.6ae52","type":"change","z":"e45fea15.9c4e3","name":"","rules":[{"t":"set","p":"corrente_motor_falhada","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1770,"y":540,"wires":[[]]},{"id":"2a6b5128.36783e","type":"function","z":"e45fea15.9c4e3","name":"Identifica falha","func":"if(msg.payload === 'NOT OK'){\n    msg.payload = 1;\n}\nelse{\n    msg.payload = 0;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":1510,"y":540,"wires":[["9f52a6be.6ae52","e540ef20.4eb84"]]},{"id":"e540ef20.4eb84","type":"link out","z":"e45fea15.9c4e3","name":"","links":["beb459b8.707ae8"],"x":1695,"y":500,"wires":[]},{"id":"18fa5a54.61fa1e","type":"change","z":"e45fea15.9c4e3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1500,"y":860,"wires":[["816b2769.82a1c8"]]},{"id":"d89fee15.0d6eb8","type":"change","z":"e45fea15.9c4e3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1520,"y":1120,"wires":[["320308ec.fd663"]]},{"id":"816b2769.82a1c8","type":"link out","z":"e45fea15.9c4e3","name":"","links":["beb459b8.707ae8"],"x":1655,"y":860,"wires":[]},{"id":"320308ec.fd663","type":"link out","z":"e45fea15.9c4e3","name":"","links":["beb459b8.707ae8"],"x":1675,"y":1120,"wires":[]},{"id":"fbb8bb51.3bd3b8","type":"change","z":"e45fea15.9c4e3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":240,"wires":[["3573f5be.3eecb2"]]},{"id":"3573f5be.3eecb2","type":"link out","z":"e45fea15.9c4e3","name":"","links":["beb459b8.707ae8"],"x":835,"y":240,"wires":[]},{"id":"72762eba.c5a03","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":8,"width":2,"height":1,"name":"Pressão","label":"","format":"{{msg.payload}}","layout":"col-center","x":700,"y":180,"wires":[]},{"id":"fa1b764c.5c969","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":6,"width":2,"height":1,"name":"Tensão Bateria Motor","label":"","format":"{{msg.payload}}","layout":"col-center","x":680,"y":420,"wires":[]},{"id":"b601c0e1.3068","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":16,"width":2,"height":1,"name":"Celula de Carga OK","label":"","format":"{{msg.payload}}","layout":"col-center","x":680,"y":680,"wires":[]},{"id":"f6ba8a28.6aa1e8","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":22,"width":2,"height":1,"name":"Sensor Rotação OK","label":"","format":"{{msg.payload}}","layout":"col-center","x":680,"y":920,"wires":[]},{"id":"24073a98.4865be","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":20,"width":2,"height":1,"name":"Sensor Velocidade OK","label":"","format":"{{msg.payload}}","layout":"col-center","x":710,"y":1180,"wires":[]},{"id":"a7086697.49c2a8","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":14,"width":2,"height":1,"name":"Sensor Temperatura OK","label":"","format":"{{msg.payload}}","layout":"col-center","x":1520,"y":160,"wires":[]},{"id":"5b461ada.76a0cc","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":10,"width":2,"height":1,"name":"Sensor Corrente Motor OK","label":"","format":"{{msg.payload}}","layout":"col-center","x":1550,"y":480,"wires":[]},{"id":"2cd1e050.d1e958","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":18,"width":2,"height":1,"name":"Sensor Bateria uC OK","label":"","format":"{{msg.payload}}","layout":"col-center","x":1520,"y":800,"wires":[]},{"id":"e4d3f511.e5b92","type":"ui_text","z":"e45fea15.9c4e3","group":"1e52356.f784f4b","order":12,"width":2,"height":1,"name":"Sensor Corrente uC OK","label":"","format":"{{msg.payload}}","layout":"col-center","x":1540,"y":1060,"wires":[]},{"id":"899f3620.bca1a8","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc","470b1f16.5f922","ae4f3104.6cf81"],"x":515,"y":120,"wires":[["74c7e337.3dcab4"]]},{"id":"9d9732a1.490e6","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc","470b1f16.5f922","ae4f3104.6cf81"],"x":465,"y":360,"wires":[["9bcc82da.540518"]]},{"id":"27b9c4b1.3b944c","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc","470b1f16.5f922","ae4f3104.6cf81"],"x":495,"y":620,"wires":[["ef24e9b1.eb23e"]]},{"id":"a5df2b86.50e32","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc","470b1f16.5f922","ae4f3104.6cf81"],"x":515,"y":860,"wires":[["3a833cec.8a42f4"]]},{"id":"623ae9d8.09b81","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc","470b1f16.5f922","ae4f3104.6cf81"],"x":505,"y":1100,"wires":[["169c160e.5d88d2"]]},{"id":"3451674b.a6bba8","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc","470b1f16.5f922","ae4f3104.6cf81"],"x":1315,"y":80,"wires":[["d5e9f5ef.12971"]]},{"id":"e3ea500.91eebb","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc","470b1f16.5f922","ae4f3104.6cf81"],"x":1395,"y":380,"wires":[["8abcb338.e0191"]]},{"id":"aed06b51.8d54e","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc","470b1f16.5f922","ae4f3104.6cf81"],"x":1395,"y":740,"wires":[["138f8717.8f5b01"]]},{"id":"7d4253e8.93635c","type":"link in","z":"e45fea15.9c4e3","name":"","links":["3f37c34.b6b0fbc","470b1f16.5f922","ae4f3104.6cf81"],"x":1375,"y":1000,"wires":[["e2e302db.2ae2f"]]},{"id":"9bcc82da.540518","type":"function","z":"e45fea15.9c4e3","name":"Limpa ao Iniciar","func":"msg.payload = null\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":360,"wires":[["fa1b764c.5c969"]]},{"id":"74c7e337.3dcab4","type":"function","z":"e45fea15.9c4e3","name":"Limpa ao Iniciar","func":"msg.payload = null\nreturn msg;","outputs":1,"noerr":0,"x":660,"y":120,"wires":[["72762eba.c5a03"]]},{"id":"ef24e9b1.eb23e","type":"function","z":"e45fea15.9c4e3","name":"Limpa ao Iniciar","func":"msg.payload = null\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":620,"wires":[["b601c0e1.3068"]]},{"id":"3a833cec.8a42f4","type":"function","z":"e45fea15.9c4e3","name":"Limpa ao Iniciar","func":"msg.payload = null\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":860,"wires":[["f6ba8a28.6aa1e8"]]},{"id":"169c160e.5d88d2","type":"function","z":"e45fea15.9c4e3","name":"Limpa ao Iniciar","func":"msg.payload = null\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":1120,"wires":[["24073a98.4865be"]]},{"id":"d5e9f5ef.12971","type":"function","z":"e45fea15.9c4e3","name":"Limpa ao Iniciar","func":"msg.payload = null\nreturn msg;","outputs":1,"noerr":0,"x":1510,"y":100,"wires":[["a7086697.49c2a8"]]},{"id":"8abcb338.e0191","type":"function","z":"e45fea15.9c4e3","name":"Limpa ao Iniciar","func":"msg.payload = null\nreturn msg;","outputs":1,"noerr":0,"x":1530,"y":420,"wires":[["5b461ada.76a0cc"]]},{"id":"138f8717.8f5b01","type":"function","z":"e45fea15.9c4e3","name":"Limpa ao Iniciar","func":"msg.payload = null\nreturn msg;","outputs":1,"noerr":0,"x":1530,"y":740,"wires":[["2cd1e050.d1e958"]]},{"id":"e2e302db.2ae2f","type":"function","z":"e45fea15.9c4e3","name":"Limpa ao Iniciar","func":"msg.payload = null\nreturn msg;","outputs":1,"noerr":0,"x":1530,"y":1000,"wires":[["e4d3f511.e5b92"]]},{"id":"76b38a4f.588e94","type":"link out","z":"e45fea15.9c4e3","name":"","links":["9f6628c.2d1f858"],"x":535,"y":1320,"wires":[]},{"id":"9f6628c.2d1f858","type":"link in","z":"e45fea15.9c4e3","name":"","links":["76b38a4f.588e94"],"x":975,"y":240,"wires":[["6ee78b33.cae214"]]},{"id":"5eb9e8c6.f87f8","type":"pi-gpiod out","z":"33a2d9a1.58df5e","name":"BLDC PWM","host":"localhost","port":8888,"pin":"12","set":"","level":"0","out":"ser","sermin":"1000","sermax":"2000","x":610,"y":40,"wires":[]},{"id":"7ca368fb.6bd43","type":"link in","z":"33a2d9a1.58df5e","name":"","links":["6a5c07c0.c113d"],"x":80,"y":40,"wires":[["98b2e6f7.9a7ed8"]]},{"id":"c066dcf4.6242b","type":"link in","z":"33a2d9a1.58df5e","name":"","links":["c41bfdcf.f3044"],"x":435,"y":40,"wires":[["5eb9e8c6.f87f8"]]},{"id":"c41bfdcf.f3044","type":"link out","z":"33a2d9a1.58df5e","name":"","links":["c066dcf4.6242b"],"x":1115,"y":40,"wires":[]},{"id":"6a5c07c0.c113d","type":"link out","z":"33a2d9a1.58df5e","name":"","links":["7ca368fb.6bd43"],"x":1785,"y":40,"wires":[]},{"id":"66395007.30e408","type":"pi-gpiod out","z":"e73b8405.466b88","name":"Relay GND","host":"localhost","port":8888,"pin":"20","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","x":350,"y":140,"wires":[]},{"id":"6f9b8fe9.f1d978","type":"function","z":"e73b8405.466b88","name":"Aciona Motor","func":"var inicio;\ninicio = 1;\nmsg.payload = inicio;\nreturn msg; ","outputs":1,"noerr":0,"x":190,"y":220,"wires":[["d5e84ed7.00ccc","66395007.30e408"]]},{"id":"4237ca9.9c445b4","type":"link in","z":"e73b8405.466b88","name":"","links":["8b0b1fc0.a2032"],"x":195,"y":140,"wires":[["66395007.30e408"]]},{"id":"8b0b1fc0.a2032","type":"link out","z":"e73b8405.466b88","name":"","links":["4237ca9.9c445b4"],"x":1455,"y":120,"wires":[]},{"id":"b8e6e031.30cb1","type":"pi-gpiod out","z":"6e7f666f.e705a8","name":"Relay GND","host":"localhost","port":8888,"pin":"20","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","x":350,"y":60,"wires":[]},{"id":"ea082484.6e2108","type":"function","z":"6e7f666f.e705a8","name":"Aciona Motor","func":"var inicio;\ninicio = 1;\nmsg.payload = inicio;\nreturn msg; ","outputs":1,"noerr":0,"x":170,"y":120,"wires":[["666b2e75.dc7c2","b8e6e031.30cb1"]]},{"id":"c7e0763.354f408","type":"link out","z":"6e7f666f.e705a8","name":"","links":["2d4787c1.2ea5c"],"x":1315,"y":120,"wires":[]},{"id":"2d4787c1.2ea5c","type":"link in","z":"6e7f666f.e705a8","name":"","links":["c7e0763.354f408"],"x":160,"y":60,"wires":[["b8e6e031.30cb1"]]},{"id":"c90a0459.5a4ec","type":"link out","z":"6e7f666f.e705a8","name":"","links":["5a42368c.6754b8"],"x":895,"y":60,"wires":[]},{"id":"5a42368c.6754b8","type":"link in","z":"6e7f666f.e705a8","name":"","links":["c90a0459.5a4ec"],"x":500,"y":60,"wires":[["f588cd5d.616e38","bba51f50.aa83b"]]},{"id":"dc62e969.2406b8","type":"pi-gpiod out","z":"fe36eb2d.6b9e68","name":"Relay GND","host":"localhost","port":8888,"pin":"20","set":"","level":"0","out":"out","sermin":"1000","sermax":"2000","x":360,"y":320,"wires":[]},{"id":"e507602f.1cb618","type":"function","z":"fe36eb2d.6b9e68","name":"Aciona Motor","func":"var inicio;\ninicio = 1;\nmsg.payload = inicio;\nreturn msg; ","outputs":1,"noerr":0,"x":200,"y":400,"wires":[["dc62e969.2406b8","5c2e7d6d.6b36cc"]]},{"id":"1cf5c14e.559687","type":"link in","z":"fe36eb2d.6b9e68","name":"","links":["4d8b1f3e.dcfb58","2a7097ce.732a8"],"x":205,"y":320,"wires":[["dc62e969.2406b8"]]},{"id":"fb37ac83.92d51","type":"function","z":"fe36eb2d.6b9e68","name":"Low signal to Transistor","func":"var relay;\nrelay = 0;\nmsg.payload = relay;\nreturn msg;","outputs":1,"noerr":0,"x":1220,"y":280,"wires":[["2a7097ce.732a8"]]},{"id":"917af564.892c68","type":"delay","z":"fe36eb2d.6b9e68","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":960,"y":400,"wires":[["8595c58c.52651"]]},{"id":"52ded71a.7a6d78","type":"while-loop","z":"fe36eb2d.6b9e68","name":"","condi":"msg.payload <=5","x":860,"y":300,"wires":[["fb37ac83.92d51"],["30f70800.727508"]]},{"id":"30f70800.727508","type":"function","z":"fe36eb2d.6b9e68","name":"Momento de repouso","func":"msg.payload = 10;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":400,"wires":[["917af564.892c68","bad96d53.dd19d","23b3e8f.01ae518"]]},{"id":"5c2e7d6d.6b36cc","type":"function","z":"fe36eb2d.6b9e68","name":"Inicializando variável","func":"var porcentagem;\nflow.set(\"contador\", 0);\n\nporcentagem = 0;\n\nmsg.payload= porcentagem;\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":400,"wires":[["30f70800.727508"]]},{"id":"2a7097ce.732a8","type":"link out","z":"fe36eb2d.6b9e68","name":"","links":["1cf5c14e.559687"],"x":1455,"y":280,"wires":[]},{"id":"8595c58c.52651","type":"function","z":"fe36eb2d.6b9e68","name":"Torque máximo","func":"msg.payload = 100;\nreturn msg;","outputs":1,"noerr":0,"x":1120,"y":400,"wires":[["45e6ab82.97ab44","4698cd29.fbae4c"]]},{"id":"45e6ab82.97ab44","type":"delay","z":"fe36eb2d.6b9e68","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1300,"y":400,"wires":[["84b4d4e6.112888"]]},{"id":"84b4d4e6.112888","type":"function","z":"fe36eb2d.6b9e68","name":"Contador","func":"contador = flow.get('contador');\ncontador = contador + 1;\nmsg.payload = contador;\nflow.set('contador', contador);\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":400,"wires":[["52ded71a.7a6d78"]]},{"id":"bad96d53.dd19d","type":"pi-gpiod out","z":"fe36eb2d.6b9e68","name":"BLDC PWM","host":"localhost","port":8888,"pin":"12","set":"","level":"0","out":"ser","sermin":"1000","sermax":"2000","x":930,"y":480,"wires":[]},{"id":"5807ecaa.cd6d1c","type":"link in","z":"fe36eb2d.6b9e68","name":"","links":["4698cd29.fbae4c"],"x":700,"y":480,"wires":[["bad96d53.dd19d","23b3e8f.01ae518"]]},{"id":"4698cd29.fbae4c","type":"link out","z":"fe36eb2d.6b9e68","name":"","links":["5807ecaa.cd6d1c"],"x":1315,"y":480,"wires":[]},{"id":"d7735eb6.78995","type":"ui_dropdown","z":"6dc3f0bb.36c81","name":"Configuração Escolhida","label":"Qual a configuração utilizada?","tooltip":"","place":"Escolha a opção","group":"129f038b.7e6834","order":14,"width":14,"height":1,"passthru":true,"multiple":false,"options":[{"label":"Tractor","value":"Tractor","type":"str"},{"label":"Pusher","value":"Pusher","type":"str"}],"payload":"","topic":"teste","x":610,"y":880,"wires":[["243728f9.3e7608"]]},{"id":"243728f9.3e7608","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"configuracao","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":880,"wires":[["4b168371.5a029c"]]},{"id":"4b168371.5a029c","type":"function","z":"6dc3f0bb.36c81","name":"Retorna configuração","func":"var configuracao = global.get('configuracao');\nmsg.payload = \"A configuração do teste é\" + \" \" + configuracao;\nglobal.set('configuracao', configuracao);\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":880,"wires":[["2bf4618f.e75c36"]]},{"id":"97b31d00.d02eb","type":"ui_button","z":"6dc3f0bb.36c81","name":"Configuracao","group":"129f038b.7e6834","order":13,"width":2,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"#A6BBCF","icon":"arrows-h","payload":"","payloadType":"str","topic":"","x":1910,"y":1600,"wires":[[]]},{"id":"b02a952e.3303f8","type":"serial in","z":"760dfb14.3731dc","d":true,"name":"","serial":"954a129.77f23f","x":90,"y":1420,"wires":[["a720f45e.adeb08"]]},{"id":"45d99750.643568","type":"ui_text","z":"6c53f7a3.674208","group":"cf5ef35d.d04a78","order":4,"width":4,"height":1,"name":"","label":"%","format":"{{msg.payload}}","layout":"row-spread","x":2880,"y":200,"wires":[]},{"id":"26431c35.6bd8ec","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["4341c41a.efee04"],"x":495,"y":740,"wires":[["a5441556.68ce28"]]},{"id":"813b90c7.5a77d","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["7cb51ddf.810c2c"],"x":495,"y":840,"wires":[["d7735eb6.78995"]]},{"id":"4341c41a.efee04","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["26431c35.6bd8ec"],"x":1555,"y":1600,"wires":[]},{"id":"7cb51ddf.810c2c","type":"link out","z":"6dc3f0bb.36c81","name":"","links":["813b90c7.5a77d"],"x":1555,"y":1660,"wires":[]},{"id":"7f9be623.9e495","type":"debug","z":"16560827.4150e8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":500,"y":240,"wires":[]},{"id":"600fb778.5c9628","type":"debug","z":"16560827.4150e8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":800,"y":180,"wires":[]},{"id":"fc2e4bd7.59ce58","type":"change","z":"6c53f7a3.674208","name":"","rules":[{"t":"set","p":"pwm_porc","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2940,"y":280,"wires":[[]]},{"id":"bba51f50.aa83b","type":"change","z":"6e7f666f.e705a8","name":"","rules":[{"t":"set","p":"pwm_porc","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":20,"wires":[[]]},{"id":"18497667.90fa4a","type":"change","z":"e73b8405.466b88","name":"","rules":[{"t":"set","p":"pwm_porc","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1010,"y":360,"wires":[[]]},{"id":"23b3e8f.01ae518","type":"change","z":"fe36eb2d.6b9e68","name":"","rules":[{"t":"set","p":"pwm_porc","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":540,"wires":[[]]},{"id":"6d676ae5.69786c","type":"function","z":"6a7f58b5.ba1848","name":"Nome do arquivo","func":"var time_now = global.get('timestamp')\nvar motor = global.get('motor');\nvar helice = global.get('helice');\n\nmsg.topic = motor;\nmsg.filename = \"/home/pi/Documents/Tests/\"+motor+\"_\"+helice+\"_\"+time_now+\".csv\"\nreturn msg;","outputs":1,"noerr":0,"x":320,"y":220,"wires":[["29e3fbbf.390654"]]},{"id":"88eee7b7.2ac168","type":"debug","z":"6a7f58b5.ba1848","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1040,"y":300,"wires":[]},{"id":"ef1b3e02.f9d04","type":"debug","z":"6c53f7a3.674208","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1660,"y":340,"wires":[]},{"id":"12d1ce53.938d0a","type":"function","z":"6c53f7a3.674208","name":"Configura variável de início de teste","func":"var start = msg.payload;\n\nglobal.set('variable_stop',start);\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":180,"wires":[["7d7b1f47.ccab18"]]},{"id":"15425b2e.1f704d","type":"inject","z":"6c53f7a3.674208","name":"","topic":"","payload":"","payloadType":"date","repeat":"0.5","crontab":"","once":true,"onceDelay":0.1,"x":110,"y":740,"wires":[["1bd85b53.79886d"]]},{"id":"1bd85b53.79886d","type":"function","z":"6c53f7a3.674208","name":"Leitura da Variable stop","func":"var stop = global.get(\"variable_stop\");\nmsg.payload = stop;\nreturn msg;\n\n","outputs":1,"noerr":0,"x":340,"y":740,"wires":[["9c64897c.bd232"]]},{"id":"9c64897c.bd232","type":"switch","z":"6c53f7a3.674208","name":"if ","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":560,"y":740,"wires":[["28be2caa.bbeb1c"],[]]},{"id":"28be2caa.bbeb1c","type":"link out","z":"6c53f7a3.674208","name":"","links":["27a00b49.cfe0f4","f63bf9c9.4acf78"],"x":695,"y":660,"wires":[]},{"id":"566d5384.f2d3ac","type":"ui_button","z":"6c53f7a3.674208","name":"","group":"cf5ef35d.d04a78","order":30,"width":30,"height":1,"passthru":false,"label":"Stop test","tooltip":"","color":"","bgcolor":"orange","icon":"","payload":"0","payloadType":"num","topic":"","x":120,"y":840,"wires":[["204e6411.3dab84","c3ce3486.832398"]]},{"id":"204e6411.3dab84","type":"change","z":"6c53f7a3.674208","name":"","rules":[{"t":"set","p":"variable_stop","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":840,"wires":[[]]},{"id":"6d7e342.238a0cc","type":"comment","z":"6c53f7a3.674208","name":"AVALIA SE O TESTE DEVE PARAR ","info":"Avalia se o teste deve parar caso algum problema tenha ocorrido.","x":830,"y":740,"wires":[]},{"id":"e2159729.96a0e","type":"comment","z":"6c53f7a3.674208","name":"SETA ZERO NA VARIAVÉL PARA PARAR O TESTE","info":"","x":700,"y":840,"wires":[]},{"id":"1d1c0253.5e3966","type":"comment","z":"6c53f7a3.674208","name":"INPUTS PARA A PORTA GPIO DO RASP QUE ACIONA O TRANSISTOR","info":"","x":730,"y":1120,"wires":[]},{"id":"7e65b097.f4ce18","type":"comment","z":"6c53f7a3.674208","name":"INPUTS PARA A PORTA GPIO DO RASP QUE ACIONA CONTROLA O MOTOR","info":"","x":740,"y":980,"wires":[]},{"id":"f4714308.d4a238","type":"ui_chart","z":"6a7f58b5.ba1848","name":"","group":"a0d000c5.3838e","order":14,"width":8,"height":6,"label":"Corrente Potencia","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":true,"ymin":"0","ymax":"70","removeOlder":"1","removeOlderPoints":"1000","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1630,"y":1340,"wires":[[]]},{"id":"999599eb.87702","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (Corrente - Sistema de Potência)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col13}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1120,"y":1340,"wires":[["21691cca.f2837c"]]},{"id":"21691cca.f2837c","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"Corrente - Sistema de Potência (A)\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":1340,"wires":[["f4714308.d4a238"]]},{"id":"d40fe693.e762f8","type":"ui_chart","z":"6a7f58b5.ba1848","name":"","group":"a0d000c5.3838e","order":6,"width":9,"height":7,"label":"PWM (%)","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":true,"ymin":"0","ymax":"100","removeOlder":"1","removeOlderPoints":"1000","removeOlderUnit":"60","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1610,"y":1400,"wires":[[]]},{"id":"18288ada.119125","type":"change","z":"6a7f58b5.ba1848","name":"Data Array (PWM %)","rules":[{"t":"set","p":"data","pt":"msg","to":"$.feeds.{\"x\":col1, \"y\" : col12}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1060,"y":1400,"wires":[["262917c8.e426e"]]},{"id":"262917c8.e426e","type":"function","z":"6a7f58b5.ba1848","name":"Setup payload","func":"series = [];\ndata = [];\nlabels = [];\n\nseries.push(\"PWM (%)\");\nlabels.push(\"Tempo\");\ndata.push(msg.data);\n\nmsg.payload = [{\"series\":series, \"data\":data,\"labels\": labels}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":1400,"wires":[["d40fe693.e762f8"]]},{"id":"2f1eba1c.5df506","type":"comment","z":"6c53f7a3.674208","name":"PARA TESTE POR PROBLEMA NOS PARAMETROS DE ENTRADA","info":"","x":310,"y":540,"wires":[]},{"id":"9d96a242.6f1f2","type":"comment","z":"6c53f7a3.674208","name":"PARA TESTE POR PROBLEMA NA TENSÃO DE ALIMENTAÇÃO","info":"","x":1340,"y":400,"wires":[]},{"id":"9cdf7ddb.6d107","type":"comment","z":"760dfb14.3731dc","name":"COLETA DOS VALORES DO BMP180","info":"","x":760,"y":780,"wires":[]},{"id":"c93034f8.f01708","type":"comment","z":"760dfb14.3731dc","name":"EXTRAÇÃO DOS DADOS VINDOS DO ARDUINO","info":"","x":760,"y":1120,"wires":[]},{"id":"a3cbfc01.bdc76","type":"comment","z":"760dfb14.3731dc","name":"BOTÕES DE INTERFACE","info":"","x":1390,"y":1840,"wires":[]},{"id":"c16b2015.855ae8","type":"comment","z":"760dfb14.3731dc","name":"PLOTA O STATUS DO TESTE (ON/OFF)","info":"","x":510,"y":1820,"wires":[]},{"id":"7a2c8b3f.88b374","type":"comment","z":"760dfb14.3731dc","name":"AVALIA A ESCOLHA DO USUÁRIO E COLOCA A DASHBOARD CORRETA","info":"","x":890,"y":60,"wires":[]},{"id":"1c708888.de1057","type":"comment","z":"6dc3f0bb.36c81","name":"ENTRADA DO USUÁRIO","info":"","x":770,"y":160,"wires":[]},{"id":"6806a0db.a2584","type":"comment","z":"6dc3f0bb.36c81","name":"CONFIRMA SE TODOS OS VALORES ESTÃO OK","info":"","x":910,"y":940,"wires":[]},{"id":"10b62935.d8605f","type":"comment","z":"6dc3f0bb.36c81","name":"EXTRAÇÃO DE PARÂMETROS DE TESTES ANTERIORES","info":"","x":910,"y":1300,"wires":[]},{"id":"da224400.08ee8","type":"comment","z":"6dc3f0bb.36c81","name":"BOTÕES DE DASHBOARD","info":"","x":1880,"y":1300,"wires":[]},{"id":"ccbdd90e.cef6e8","type":"comment","z":"6a7f58b5.ba1848","name":"GUARDA PARÂMETROS EM CSV","info":"","x":630,"y":40,"wires":[]},{"id":"1280d702.f53631","type":"comment","z":"6a7f58b5.ba1848","name":"GUARDA DADOS EM CSV","info":"","x":610,"y":160,"wires":[]},{"id":"62619787.eee16","type":"comment","z":"6a7f58b5.ba1848","name":"VARIÁVEL TEMPO","info":"","x":1540,"y":40,"wires":[]},{"id":"31bcc108.5314de","type":"comment","z":"6a7f58b5.ba1848","name":"EXTRAI DADOS CSV E PLOTA EM GRÁFICOS","info":"","x":660,"y":460,"wires":[]},{"id":"3a52ee8a.1e7bca","type":"function","z":"6dc3f0bb.36c81","name":"Extraindo dados do motor","func":"var motor_escolhido_usuario = msg.payload;\nvar tensao_minima;\nvar tensao_maxima;\nvar corrente_maxima;\nvar corrente_idle;\n\nif (motor_escolhido_usuario===\"Turnigy_D3548\"){\n    \n    tensao_minima=11.1;\n    tensao_maxima=18.5;\n    corrente_maxima=50;\n    corrente_idle=3.1;\n}\n\nelse if (motor_escolhido_usuario === \"AT3520_KV850\"){\n    tensao_minima=11.1;\n    tensao_maxima=14.8;\n    corrente_maxima=70;\n    corrente_idle=2.0;\n}\n\nelse if (motor_escolhido_usuario === \"A2212\"){\n    tensao_minima=7.4;\n    tensao_maxima=11.1;\n    corrente_maxima = 12;\n    corrente_idle=0.5;\n}\n\nmotor_caracteristicas = [tensao_minima, tensao_maxima, corrente_maxima, corrente_idle]\n\nmsg.payload = motor_caracteristicas;\n\nreturn msg;","outputs":1,"noerr":0,"x":720,"y":1640,"wires":[["27278f21.998468"]]},{"id":"f4b867f2.06de28","type":"link out","z":"6dc3f0bb.36c81","name":"motor","links":["f105bf8c.a1b14"],"x":695,"y":500,"wires":[]},{"id":"f105bf8c.a1b14","type":"link in","z":"6dc3f0bb.36c81","name":"Entrada motor","links":["f4b867f2.06de28"],"x":515,"y":1640,"wires":[["3a52ee8a.1e7bca"]]},{"id":"30063e2e.a79f3a","type":"comment","z":"6dc3f0bb.36c81","name":"ANALISE DO CONJUNTO MOTO PROPULSOR","info":"","x":870,"y":1560,"wires":[]},{"id":"27278f21.998468","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"motor_caracteristicas","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1010,"y":1640,"wires":[[]]},{"id":"1e8531d0.af6396","type":"function","z":"6dc3f0bb.36c81","name":"Extraindo dados do ESC","func":"var esc_escolhido_usuario = msg.payload;\n\nvar tensao_minima;\nvar tensao_maxima;\nvar corrente_maxima;\n\nif (esc_escolhido_usuario===\"ESC_30A\"){\n    tensao_minima=5.5;\n    tensao_maxima=12.6;\n    corrente_maxima=30;\n}\n\nelse if (esc_escolhido_usuario===\"ESC_50A\"){\n    tensao_minima=7.4;\n    tensao_maxima=14.8;\n    corrente_maxima=50;\n}\n\nelse if (esc_escolhido_usuario===\"ESC_80A\"){\n    tensao_minima=7.4;\n    tensao_maxima=22.2;\n    corrente_maxima=80;\n}\n\nesc_caracteristicas = [tensao_minima, tensao_maxima, corrente_maxima]\n\nmsg.payload = esc_caracteristicas;\n\nreturn msg;","outputs":1,"noerr":0,"x":720,"y":1720,"wires":[["178f47b8.8bcbc"]]},{"id":"5ad69e2a.0c101","type":"link in","z":"6dc3f0bb.36c81","name":"Entrada esc","links":["ea5c627a.a88988"],"x":515,"y":1720,"wires":[["1e8531d0.af6396"]]},{"id":"178f47b8.8bcbc","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"esc_caracteristicas","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1000,"y":1720,"wires":[[]]},{"id":"ea5c627a.a88988","type":"link out","z":"6dc3f0bb.36c81","name":"Esc escolhido saida","links":["5ad69e2a.0c101"],"x":695,"y":600,"wires":[]},{"id":"eb65272d.336868","type":"link out","z":"6dc3f0bb.36c81","name":"Bateria saida escolhida","links":["8763a737.9f40e8"],"x":715,"y":820,"wires":[]},{"id":"8763a737.9f40e8","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["eb65272d.336868"],"x":515,"y":1780,"wires":[["e36c0e42.daac5"]]},{"id":"e36c0e42.daac5","type":"function","z":"6dc3f0bb.36c81","name":"Extraindo dados das baterias","func":"var bateria_escolhida_usuario = msg.payload;\nvar tensao_minima;\nvar tensao_nominal;\n\nif (bateria_escolhida_usuario===\"Zippy_3S_2500\"){\n    tensao_minima=9.0; //Considerando tensão mínima por célula de 3V\n    tensao_nominal=11.1;\n}\n\nelse if (bateria_escolhida_usuario===\"ZOP_5S_4500\"){\n    tensao_minima=15; //Considerando tensão mínima por célula de 3V\n    tensao_nominal=18.5;\n\n}\n\nelse if (bateria_escolhida_usuario===\"Powerbolt_4S_4000mAh\"){\n    tensao_minima=12; //Considerando tensão mínima por célula de 3V\n    tensao_nominal=14.8;\n\n}\n\nbateria_caracteristicas = [tensao_minima, tensao_nominal]\n\nmsg.payload = bateria_caracteristicas;\n\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":1780,"wires":[["e4ec2d49.209048"]]},{"id":"e4ec2d49.209048","type":"change","z":"6dc3f0bb.36c81","name":"","rules":[{"t":"set","p":"bateria_caracteristicas","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1080,"y":1780,"wires":[[]]},{"id":"7d32cd55.28fbb4","type":"function","z":"6dc3f0bb.36c81","name":"Motor vs Bateria","func":"//Extraindo os dados \n\nvar motor_caracteristicas = global.get('motor_caracteristicas')\nvar bateria_caracteristicas = global.get('bateria_caracteristicas')\n\nvar tensao_maxima_motor = motor_caracteristicas[1];\nvar tensao_minima_motor = motor_caracteristicas[0];\nvar tensao_nominal_bateria = bateria_caracteristicas[1];\nvar tensao_minima_bateria = bateria_caracteristicas[0];\n\nif (tensao_maxima_motor<tensao_nominal_bateria || tensao_minima_motor>tensao_nominal_bateria){\n    msg.topic= \"Motor não compatível com bateria escolhida\"\n    msg.payload=0;\n}\n\nelse {\n    msg.topic = \"Motor compatível com bateria escolhida\"\n    msg.payload=1;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":1880,"wires":[["70039b81.0e2444","14e2407.ccf43c"]]},{"id":"15443e9b.c81ce9","type":"function","z":"6dc3f0bb.36c81","name":"ESC vs Bateria","func":"//Extraindo os dados \n\nvar esc_caracteristicas = global.get('esc_caracteristicas')\nvar bateria_caracteristicas = global.get('bateria_caracteristicas')\n\nvar tensao_maxima_esc = esc_caracteristicas[1];\nvar tensao_minima_esc = esc_caracteristicas[0];\nvar tensao_nominal_bateria = bateria_caracteristicas[1];\nvar tensao_minima_bateria = bateria_caracteristicas[0];\n\nif (tensao_maxima_esc<tensao_nominal_bateria || tensao_minima_esc>tensao_nominal_bateria){\n    msg.topic= \"ESC não compatível com bateria escolhida\"\n    msg.payload=0;\n}\n\nelse {\n    msg.topic = \"ESC compatível com bateria escolhida\"\n    msg.payload=1;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":1960,"wires":[["b42c6edd.d115d8","1484683c.09fcc"]]},{"id":"70039b81.0e2444","type":"ui_text","z":"6dc3f0bb.36c81","group":"129f038b.7e6834","order":18,"width":0,"height":0,"name":"Checagem Motor vs Bateria","label":"","format":"{{msg.topic}}","layout":"col-center","x":1110,"y":1880,"wires":[]},{"id":"b42c6edd.d115d8","type":"ui_text","z":"6dc3f0bb.36c81","group":"129f038b.7e6834","order":19,"width":0,"height":0,"name":"Checagem ESC vs Bateria","label":"","format":"{{msg.topic}}","layout":"col-center","x":1100,"y":1960,"wires":[]},{"id":"14e2407.ccf43c","type":"debug","z":"6dc3f0bb.36c81","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","targetType":"msg","x":1090,"y":1840,"wires":[]},{"id":"1484683c.09fcc","type":"debug","z":"6dc3f0bb.36c81","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","targetType":"msg","x":1070,"y":2020,"wires":[]},{"id":"d575dcb.046a42","type":"link out","z":"6dc3f0bb.36c81","name":"deleta texto ao iniciar","links":["b9b79ff4.d49b18"],"x":995,"y":1200,"wires":[]},{"id":"b9b79ff4.d49b18","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["d575dcb.046a42"],"x":895,"y":2040,"wires":[["b42c6edd.d115d8","70039b81.0e2444","ce343296.cf545"]]},{"id":"17ddbe03.36e6a2","type":"switch","z":"a10284.9be9d58","name":"Parar teste?","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":670,"y":140,"wires":[["4e65f21b.4a959c"],[]]},{"id":"628cffa1.21f348","type":"switch","z":"a10284.9be9d58","name":"Parar teste?","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":1230,"y":140,"wires":[["b7f80c55.25c5b"],[]]},{"id":"eaad0020.4ce358","type":"switch","z":"33a2d9a1.58df5e","name":"Parar teste?","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":140,"wires":[["41da53d5.97cd1c"],[]]},{"id":"2d372bb1.cc84c4","type":"switch","z":"33a2d9a1.58df5e","name":"Parar teste?","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":1150,"y":140,"wires":[["57d058c2.8903e8"],[]]},{"id":"2e3fc02e.61e49","type":"function","z":"6dc3f0bb.36c81","name":"ESC vs Motor","func":"//Extraindo os dados \n\nvar esc_caracteristicas = global.get('esc_caracteristicas')\nvar motor_caracteristicas = global.get('motor_caracteristicas')\n\nvar corrente_maxima_esc = esc_caracteristicas[2];\nvar corrente_maxima_motor = motor_caracteristicas[2];\n\nif (corrente_maxima_esc<corrente_maxima_motor){\n    msg.topic= \"ESC não compatível com motor escolhido\"\n    msg.payload=0;\n}\n\nelse {\n    msg.topic = \"ESC compatível com motor escolhido\"\n    msg.payload=1;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":2120,"wires":[["ce343296.cf545","7df29999.ba7218"]]},{"id":"ce343296.cf545","type":"ui_text","z":"6dc3f0bb.36c81","group":"129f038b.7e6834","order":20,"width":0,"height":0,"name":"Checagem ESC vs Motor","label":"","format":"{{msg.topic}}","layout":"col-center","x":1040,"y":2120,"wires":[]},{"id":"7df29999.ba7218","type":"debug","z":"6dc3f0bb.36c81","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","targetType":"msg","x":1060,"y":2180,"wires":[]},{"id":"8b37a042.036cf","type":"link in","z":"6dc3f0bb.36c81","name":"","links":["ed4e06e6.f27ec8"],"x":360,"y":2000,"wires":[["7d32cd55.28fbb4","15443e9b.c81ce9","2e3fc02e.61e49"]]},{"id":"cdde611d.da42a","type":"switch","z":"6c53f7a3.674208","name":"Analisa se teste já está em andamento","property":"variable_stop","propertyType":"global","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":140,"y":240,"wires":[[],["12d1ce53.938d0a"]]},{"id":"c3ce3486.832398","type":"link out","z":"6c53f7a3.674208","name":"PARAR TESTE JÁ!","links":["289c3adb.b3ff2e"],"x":200,"y":800,"wires":[]},{"id":"289c3adb.b3ff2e","type":"link in","z":"6c53f7a3.674208","name":"","links":["c3ce3486.832398"],"x":2515,"y":200,"wires":[["3513ebba.67e1f4"]]}]
